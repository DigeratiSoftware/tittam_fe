module.exports=[87796,a=>{"use strict";var b=a.i(23413),c=a.i(32496),d=a.i(39766),e=a.i(6765),f=a.i(46592),g=a.i(76314),h=a.i(9316),i=a.i(66086),j=a.i(9522),k=a.i(66370),l=a.i(21039);let m=(0,l.default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),n=[{id:"1",message:"System maintenance scheduled for tomorrow at 2 AM",url:"https://example.com/maintenance",createdAt:new Date(Date.now()-72e5).toISOString(),createdBy:"admin1",createdByName:"Admin User",targetType:"all",isRead:!1},{id:"2",message:"New scheme template available for review",createdAt:new Date(Date.now()-18e6).toISOString(),createdBy:"admin1",createdByName:"Admin User",targetType:"role",targetRole:"admin",isRead:!1},{id:"3",message:"Monthly report submission deadline is approaching",url:"https://example.com/reports",createdAt:new Date(Date.now()-864e5).toISOString(),createdBy:"admin1",createdByName:"Admin User",targetType:"all",isRead:!0}],o=new class{async delay(a=300){return new Promise(b=>setTimeout(b,a))}getCurrentUser(){return null}async getUserNotifications(){await this.delay();let a=this.getCurrentUser();return a?n.filter(b=>!!("all"===b.targetType||"role"===b.targetType&&b.targetRole===a.role||"users"===b.targetType&&b.targetUserIds?.includes(a.id))):[]}async getAllNotifications(){return await this.delay(),[...n]}async createNotification(a){await this.delay();let b=this.getCurrentUser(),c={id:Date.now().toString(),message:a.message,url:a.url,createdAt:new Date().toISOString(),createdBy:b?.id||"unknown",createdByName:b?.name||"Unknown User",targetType:a.targetType,targetUserIds:a.targetUserIds,targetRole:a.targetRole,isRead:!1};return n.unshift(c),c}async markAsRead(a){await this.delay();let b=n.find(b=>b.id===a);b&&(b.isRead=!0)}async markAllAsRead(){await this.delay();let a=this.getCurrentUser();a&&n.forEach(b=>{"all"===b.targetType||"role"===b.targetType&&b.targetRole===a.role?b.isRead=!0:"users"===b.targetType&&b.targetUserIds?.includes(a.id)&&(b.isRead=!0)})}async deleteNotification(a){await this.delay();let b=n.findIndex(b=>b.id===a);-1!==b&&n.splice(b,1)}async getUnreadCount(){await this.delay();let a=this.getCurrentUser();return a?n.filter(b=>!b.isRead&&!!("all"===b.targetType||"role"===b.targetType&&b.targetRole===a.role||"users"===b.targetType&&b.targetUserIds?.includes(a.id))).length:0}};var p=a.i(93663),q=a.i(52656),r=a.i(70663),s=a.i(77605),t=a.i(71081),u=a.i(24224),v=a.i(77377),w=a.i(70488);function x({open:a,onOpenChange:d,onSuccess:f}){let[g,h]=(0,c.useState)(""),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)("all"),[m,n]=(0,c.useState)([]),[p,x]=(0,c.useState)(""),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(!1),[C,D]=(0,c.useState)(!1);(0,c.useEffect)(()=>{a&&"users"===k&&E()},[a,k]);let E=async()=>{try{D(!0);let a=await v.userService.getUsers();z(a.filter(a=>a.isActive))}catch(a){console.error("[v0] Error loading users:",a)}finally{D(!1)}},F=async a=>{if(a.preventDefault(),!g.trim())return void alert("Please enter a message");if("users"===k&&0===m.length)return void alert("Please select at least one user");if("role"===k&&!p)return void alert("Please select a role");try{B(!0);let a={message:g.trim(),url:i.trim()||void 0,targetType:k,targetUserIds:"users"===k?m:void 0,targetRole:"role"===k?p:void 0};console.log("[v0] Creating notification:",a),await o.createNotification(a),h(""),j(""),l("all"),n([]),x(""),f(),d(!1)}catch(a){console.error("[v0] Error creating notification:",a),alert("Failed to create notification")}finally{B(!1)}};return(0,b.jsx)(q.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(q.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(q.DialogHeader,{children:(0,b.jsx)(q.DialogTitle,{className:"text-[#013A65]",children:"Create Notification"})}),(0,b.jsxs)("form",{onSubmit:F,className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(s.Label,{htmlFor:"message",children:["Message ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(t.Textarea,{id:"message",value:g,onChange:a=>h(a.target.value),placeholder:"Enter notification message...",rows:4,required:!0,className:"resize-none"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(s.Label,{htmlFor:"url",children:"URL (Optional)"}),(0,b.jsx)(r.Input,{id:"url",type:"url",value:i,onChange:a=>j(a.target.value),placeholder:"https://example.com/page"}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Add a link for users to navigate to when clicking the notification"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(s.Label,{htmlFor:"targetType",children:["Send To ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)(u.Select,{value:k,onValueChange:a=>l(a),children:[(0,b.jsx)(u.SelectTrigger,{id:"targetType",children:(0,b.jsx)(u.SelectValue,{})}),(0,b.jsxs)(u.SelectContent,{children:[(0,b.jsx)(u.SelectItem,{value:"all",children:"All Users"}),(0,b.jsx)(u.SelectItem,{value:"users",children:"Specific Users"}),(0,b.jsx)(u.SelectItem,{value:"role",children:"By Role"})]})]})]}),"users"===k&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(s.Label,{children:["Select Users ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),C?(0,b.jsx)("div",{className:"text-sm text-gray-500 py-4",children:"Loading users..."}):(0,b.jsx)("div",{className:"border rounded-lg p-4 max-h-60 overflow-y-auto space-y-2",children:0===y.length?(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"No active users found"}):y.map(a=>(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(w.Checkbox,{id:`user-${a.id}`,checked:m.includes(a.id),onCheckedChange:()=>{var b;return b=a.id,void n(a=>a.includes(b)?a.filter(a=>a!==b):[...a,b])}}),(0,b.jsxs)("label",{htmlFor:`user-${a.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer flex-1",children:[a.name," (",a.email,") - ",a.role]})]},a.id))}),m.length>0&&(0,b.jsxs)("p",{className:"text-xs text-gray-600",children:[m.length," user(s) selected"]})]}),"role"===k&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(s.Label,{htmlFor:"role",children:["Select Role ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsxs)(u.Select,{value:p,onValueChange:x,children:[(0,b.jsx)(u.SelectTrigger,{id:"role",children:(0,b.jsx)(u.SelectValue,{placeholder:"Choose a role"})}),(0,b.jsx)(u.SelectContent,{children:["super_admin","admin","user","viewer"].map(a=>(0,b.jsx)(u.SelectItem,{value:a,children:a.replace("_"," ").toUpperCase()},a))})]})]}),(0,b.jsxs)(q.DialogFooter,{children:[(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:()=>d(!1),disabled:A,children:"Cancel"}),(0,b.jsx)(e.Button,{type:"submit",disabled:A,className:"bg-gradient-to-r from-[#013A65] to-[#013A65]/90 hover:from-[#013A65]/90 hover:to-[#013A65] text-white",children:A?"Creating...":"Create Notification"})]})]})]})})}var y=a.i(10982);let z=(0,l.default)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);function A({notification:a,open:c,onOpenChange:d}){return a?(0,b.jsx)(q.Dialog,{open:c,onOpenChange:d,children:(0,b.jsxs)(q.DialogContent,{className:"max-w-2xl bg-card",children:[(0,b.jsx)(q.DialogHeader,{children:(0,b.jsx)(q.DialogTitle,{className:"text-2xl text-primary",children:"Notification Details"})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Message"}),(0,b.jsx)("p",{className:"text-base text-card-foreground leading-relaxed bg-muted/50 p-4 rounded-lg border border-border",children:a.message})]}),a.url&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Link"}),(0,b.jsxs)("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-primary hover:text-primary/80 hover:underline bg-muted/50 px-4 py-3 rounded-lg border border-border transition-colors",children:[(0,b.jsx)(i.ExternalLink,{className:"h-4 w-4"}),(0,b.jsx)("span",{className:"break-all",children:a.url})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Target Audience"}),(0,b.jsxs)("div",{className:"flex items-center gap-3 bg-muted/50 p-4 rounded-lg border border-border",children:[(a=>{switch(a){case"all":return(0,b.jsx)(j.Users,{className:"h-5 w-5 text-primary"});case"users":return(0,b.jsx)(k.User,{className:"h-5 w-5 text-primary"});case"role":return(0,b.jsx)(m,{className:"h-5 w-5 text-primary"});default:return null}})(a.targetType),(0,b.jsx)("span",{className:"text-card-foreground font-medium",children:(a=>{switch(a.targetType){case"all":return"All Users";case"users":return`${a.targetUserIds?.length||0} Selected Users`;case"role":return`Role: ${a.targetRole}`;default:return"Unknown"}})(a)})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Created By"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 bg-muted/50 p-3 rounded-lg border border-border",children:[(0,b.jsx)(z,{className:"h-4 w-4 text-primary"}),(0,b.jsx)("span",{className:"text-card-foreground",children:a.createdByName})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Created At"}),(0,b.jsxs)("div",{className:"flex items-center gap-2 bg-muted/50 p-3 rounded-lg border border-border",children:[(0,b.jsx)(y.Calendar,{className:"h-4 w-4 text-primary"}),(0,b.jsx)("span",{className:"text-card-foreground text-sm",children:new Date(a.createdAt).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]})]}),(0,b.jsx)("div",{className:"flex justify-end pt-4 border-t border-border",children:(0,b.jsx)(e.Button,{onClick:()=>d(!1),variant:"outline",className:"border-border",children:"Close"})})]})}):null}function B(){let{user:a}=(0,p.useAuth)(),[l,n]=(0,c.useState)([]),[q,r]=(0,c.useState)(!0),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(null),[w,y]=(0,c.useState)(!1);(0,c.useEffect)(()=>{z()},[]);let z=async()=>{try{r(!0);let a=await o.getAllNotifications();n(a)}catch(a){console.error("[v0] Error loading notifications:",a)}finally{r(!1)}},B=async a=>{if(confirm("Are you sure you want to delete this notification?"))try{await o.deleteNotification(a),n(b=>b.filter(b=>b.id!==a))}catch(a){console.error("[v0] Error deleting notification:",a),alert("Failed to delete notification")}};return(0,b.jsxs)(d.DashboardLayout,{children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-[#013A65] to-[#013A65]/90 rounded-lg py-3 px-6 text-white shadow-lg",children:(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-semibold",children:"Notification Management"}),(0,b.jsx)("p",{className:"text-white/80 text-sm mt-1",children:"Create and manage system notifications for users"})]}),(0,b.jsxs)(e.Button,{size:"sm",className:"bg-gradient-to-r from-[#F3B335] to-[#F3B335]/90 hover:from-[#F3B335]/90 hover:to-[#F3B335]/80 text-[#013A65] border-0 shadow-lg hover:shadow-xl transition-all duration-300 h-9 px-4 text-sm font-medium",onClick:()=>t(!0),children:[(0,b.jsx)(g.Plus,{className:"h-4 w-4 mr-1.5"}),"Create Notification"]})]})}),(0,b.jsxs)(f.Card,{className:"border-border bg-card",children:[(0,b.jsx)(f.CardHeader,{children:(0,b.jsx)(f.CardTitle,{className:"text-primary",children:"All Notifications"})}),(0,b.jsx)(f.CardContent,{children:q?(0,b.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"Loading notifications..."}):0===l.length?(0,b.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,b.jsx)("p",{className:"text-lg font-medium mb-2",children:"No notifications yet"}),(0,b.jsx)("p",{className:"text-sm",children:"Create your first notification to get started"})]}):(0,b.jsx)("div",{className:"space-y-3",children:l.map(a=>(0,b.jsx)("div",{onClick:()=>{v(a),y(!0)},className:"border-l-4 border-[#F3B335] border-t border-r border-b border-border rounded-lg p-4 hover:shadow-md hover:border-[#F3B335]/50 transition-all cursor-pointer bg-white",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsx)("div",{className:"flex-1 min-w-0",children:(0,b.jsx)("div",{className:"flex items-start gap-3",children:(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-foreground mb-1",children:a.message}),a.url&&(0,b.jsxs)("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",onClick:a=>a.stopPropagation(),className:"text-sm text-primary hover:underline inline-flex items-center gap-1 mb-2 font-medium",children:[(0,b.jsx)(i.ExternalLink,{className:"h-3 w-3"}),a.url]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-sm text-muted-foreground mt-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1.5",children:[(a=>{switch(a){case"all":return(0,b.jsx)(j.Users,{className:"h-4 w-4"});case"users":return(0,b.jsx)(k.User,{className:"h-4 w-4"});case"role":return(0,b.jsx)(m,{className:"h-4 w-4"});default:return null}})(a.targetType),(0,b.jsx)("span",{children:(a=>{switch(a.targetType){case"all":return"All Users";case"users":return`${a.targetUserIds?.length||0} Selected Users`;case"role":return`Role: ${a.targetRole}`;default:return"Unknown"}})(a)})]}),(0,b.jsx)("span",{className:"text-muted-foreground/40",children:"•"}),(0,b.jsxs)("span",{children:["Created by ",a.createdByName]}),(0,b.jsx)("span",{className:"text-muted-foreground/40",children:"•"}),(0,b.jsx)("span",{children:new Date(a.createdAt).toLocaleString()})]})]})})}),(0,b.jsx)(e.Button,{variant:"ghost",size:"sm",onClick:b=>{b.stopPropagation(),B(a.id)},className:"text-destructive hover:text-destructive hover:bg-destructive/10 flex-shrink-0",children:(0,b.jsx)(h.Trash2,{className:"h-4 w-4"})})]})},a.id))})})]})]}),(0,b.jsx)(x,{open:s,onOpenChange:t,onSuccess:z}),(0,b.jsx)(A,{notification:u,open:w,onOpenChange:y})]})}a.s(["default",()=>B],87796)}];

//# sourceMappingURL=projects_TITTAM_tittam_fe_app_dashboard_notifications_page_tsx_abeaeda3._.js.map