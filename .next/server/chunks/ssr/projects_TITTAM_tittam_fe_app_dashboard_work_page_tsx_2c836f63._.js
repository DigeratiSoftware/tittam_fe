module.exports=[79318,a=>{"use strict";var b=a.i(23413),c=a.i(39766),d=a.i(11800),e=a.i(32496),f=a.i(6765),g=a.i(46592),h=a.i(32684),i=a.i(52656),j=a.i(70663),k=a.i(77605),l=a.i(24224),m=a.i(76314),n=a.i(7408),o=a.i(97400),p=a.i(6538),q=a.i(9316),r=a.i(52050),s=a.i(23803),t=a.i(36183),u=a.i(26915),v=a.i(83231),w=a.i(66655),x=a.i(53577),y=a.i(93663),z=a.i(44089);function A(){let{user:a}=(0,y.useAuth)(),[c,d]=(0,e.useState)([]),[A,B]=(0,e.useState)([]),[C,D]=(0,e.useState)(""),[E,F]=(0,e.useState)("all"),[G,H]=(0,e.useState)("all"),[I,J]=(0,e.useState)(!0),[K,L]=(0,e.useState)(!1),[M,N]=(0,e.useState)(!1),[O,P]=(0,e.useState)(null),[Q,R]=(0,e.useState)([]),[S,T]=(0,e.useState)({});(0,e.useEffect)(()=>{U()},[]),(0,e.useEffect)(()=>{let a=c;C&&(a=a.filter(a=>a.schemeName.toLowerCase().includes(C.toLowerCase())||a.componentName.toLowerCase().includes(C.toLowerCase())||a.createdBy.toLowerCase().includes(C.toLowerCase())||Object.values(a.fieldData).some(a=>String(a).toLowerCase().includes(C.toLowerCase())))),"all"!==E&&(a=a.filter(a=>a.status===E)),"all"!==G&&(a=a.filter(a=>a.schemeId===G)),B(a)},[C,E,G,c]);let U=async()=>{try{J(!0);let a=await w.workService.getWorks();d(a),B(a)}catch(a){console.error("Failed to load works:",a)}finally{J(!1)}},V=async a=>{try{P(a);let b=(await x.fieldService.getAllFields()).filter(b=>b.componentId===a.componentId);R(b),L(!0)}catch(a){console.error("Failed to load work details:",a),alert("Failed to load work details. Please try again.")}},W=async a=>{if(confirm("Are you sure you want to delete this work entry?"))try{await w.workService.deleteWork(a),await U()}catch(a){console.error("Failed to delete work:",a),alert("Failed to delete work. Please try again.")}},X=async(a,b)=>{try{await w.workService.updateWorkStatus(a,b),await U()}catch(a){console.error("Failed to update work status:",a),alert("Failed to update work status. Please try again.")}},Y=async a=>{try{P(a);let b=(await x.fieldService.getAllFields()).filter(b=>b.componentId===a.componentId);R(b),T(a.fieldData),N(!0)}catch(a){console.error("Failed to load work for editing:",a),alert("Failed to load work details. Please try again.")}},Z=async()=>{if(O)try{await w.workService.updateWork(O.id,{fieldData:S,updatedAt:new Date().toISOString()}),N(!1),await U(),alert("Work updated successfully!")}catch(a){console.error("Failed to update work:",a),alert("Failed to update work. Please try again.")}},$=Array.from(new Set(c.map(a=>a.schemeId))).map(a=>{let b=c.find(b=>b.schemeId===a);return{id:a,name:b?.schemeName||a}});return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-[#013A65] to-[#013A65]/90 rounded-lg py-3 px-6 text-white shadow-lg",children:(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-semibold",children:"Work Management"}),(0,b.jsx)("p",{className:"text-white/80 text-sm mt-1",children:"View existing work entries and create new ones by selecting schemes and components"})]}),(0,b.jsx)(z.default,{href:"/dashboard/work/create",children:(0,b.jsxs)(f.Button,{size:"sm",className:"bg-gradient-to-r from-[#F3B335] to-[#F3B335]/90 hover:from-[#F3B335]/90 hover:to-[#F3B335]/80 text-[#013A65] border-0 shadow-lg hover:shadow-xl transition-all duration-300 h-9 px-4 text-sm font-medium",children:[(0,b.jsx)(m.Plus,{className:"h-4 w-4 mr-1.5"}),"Create Work"]})})]})}),(0,b.jsxs)("div",{className:"flex flex-col h-full bg-white rounded-lg border border-[#EDEEF0] shadow-sm overflow-hidden",children:[(0,b.jsx)("div",{className:"flex-shrink-0 p-4 border-b border-[#EDEEF0] bg-gradient-to-r from-[#F8F8F8] to-[#EDEEF0]",children:(0,b.jsx)("div",{className:"flex items-center justify-between gap-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(r.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-[#013A65]/60 h-4 w-4"}),(0,b.jsx)(j.Input,{placeholder:"Search works...",value:C,onChange:a=>D(a.target.value),className:"pl-10 h-9 border-[#EDEEF0] focus:border-[#013A65] focus:ring-[#013A65]/20 bg-white"})]}),(0,b.jsxs)(l.Select,{value:E,onValueChange:F,children:[(0,b.jsx)(l.SelectTrigger,{className:"w-40 h-9 bg-white",children:(0,b.jsx)(l.SelectValue,{placeholder:"All Status"})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"all",children:"All Status"}),(0,b.jsx)(l.SelectItem,{value:"pending",children:"Pending"}),(0,b.jsx)(l.SelectItem,{value:"in_progress",children:"In Progress"}),(0,b.jsx)(l.SelectItem,{value:"completed",children:"Completed"})]})]}),(0,b.jsxs)(l.Select,{value:G,onValueChange:H,children:[(0,b.jsx)(l.SelectTrigger,{className:"w-48 h-9 bg-white",children:(0,b.jsx)(l.SelectValue,{placeholder:"All Schemes"})}),(0,b.jsxs)(l.SelectContent,{children:[(0,b.jsx)(l.SelectItem,{value:"all",children:"All Schemes"}),$.map(a=>(0,b.jsx)(l.SelectItem,{value:a.id,children:a.name},a.id))]})]})]})})}),(0,b.jsx)("div",{className:"flex-1 overflow-auto",children:I?(0,b.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-[#013A65]/70",children:[(0,b.jsx)(v.Loader2,{className:"h-5 w-5 animate-spin"}),(0,b.jsx)("span",{children:"Loading works..."})]})}):0===A.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-[#013A65]/10 to-[#F3B335]/10 rounded-full flex items-center justify-center mb-4",children:(0,b.jsx)(n.Briefcase,{className:"h-8 w-8 text-[#013A65]/60"})}),(0,b.jsx)("h3",{className:"text-lg font-medium text-[#013A65] mb-2",children:"No work entries found"}),(0,b.jsx)("p",{className:"text-[#013A65]/70 mb-4",children:C||"all"!==E||"all"!==G?"No work entries match your search criteria.":"Get started by creating your first work entry."}),!C&&"all"===E&&"all"===G&&(0,b.jsx)(z.default,{href:"/dashboard/work/create",children:(0,b.jsxs)(f.Button,{className:"bg-gradient-to-r from-[#F3B335] to-[#F3B335]/90 hover:from-[#F3B335]/90 hover:to-[#F3B335] text-[#013A65] font-medium",children:[(0,b.jsx)(m.Plus,{className:"h-4 w-4 mr-2"}),"Create Work"]})})]}):(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{className:"bg-[#F3B335] hover:bg-[#F3B335]",children:[(0,b.jsx)(h.TableHead,{className:"text-[#013A65] font-semibold",children:"Scheme Name"}),(0,b.jsx)(h.TableHead,{className:"text-[#013A65] font-semibold",children:"Component Name"}),(0,b.jsx)(h.TableHead,{className:"text-[#013A65] font-semibold",children:"Work Name"}),(0,b.jsx)(h.TableHead,{className:"text-[#013A65] font-semibold",children:"Status"}),(0,b.jsx)(h.TableHead,{className:"text-[#013A65] font-semibold",children:"Created By"}),(0,b.jsx)(h.TableHead,{className:"text-[#013A65] font-semibold",children:"Created Date"}),(0,b.jsx)(h.TableHead,{className:"text-[#013A65] font-semibold w-32",children:"Actions"})]})}),(0,b.jsx)(h.TableBody,{children:A.map(a=>{let c=(a=>{switch(a){case"pending":return{variant:"secondary",icon:s.Clock,color:"text-yellow-600"};case"in_progress":return{variant:"default",icon:t.PlayCircle,color:"text-blue-600"};case"completed":return{variant:"default",icon:u.CheckCircle,color:"text-green-600"};default:return{variant:"secondary",icon:s.Clock,color:"text-gray-600"}}})(a.status||"pending"),d=c.icon;return(0,b.jsxs)(h.TableRow,{className:"hover:bg-[#F8F8F8]/50",children:[(0,b.jsx)(h.TableCell,{className:"font-medium text-[#013A65] max-w-xs truncate",title:a.schemeName,children:a.schemeName}),(0,b.jsx)(h.TableCell,{className:"text-[#013A65]/80 max-w-xs truncate",title:a.componentName,children:a.componentName}),(0,b.jsx)(h.TableCell,{className:"text-[#013A65]/80 max-w-xs truncate",children:a.fieldData?.workName||`Work-${a.id.slice(0,8)}`}),(0,b.jsx)(h.TableCell,{children:(0,b.jsxs)(l.Select,{value:a.status||"pending",onValueChange:b=>X(a.id,b),children:[(0,b.jsx)(l.SelectTrigger,{className:"w-32 h-8 bg-white",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d,{className:`h-3 w-3 ${c.color}`}),(0,b.jsx)(l.SelectValue,{})]})}),(0,b.jsxs)(l.SelectContent,{className:"bg-white",children:[(0,b.jsx)(l.SelectItem,{value:"pending",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(s.Clock,{className:"h-3 w-3 text-yellow-600"}),"Pending"]})}),(0,b.jsx)(l.SelectItem,{value:"in_progress",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(t.PlayCircle,{className:"h-3 w-3 text-blue-600"}),"In Progress"]})}),(0,b.jsx)(l.SelectItem,{value:"completed",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(u.CheckCircle,{className:"h-3 w-3 text-green-600"}),"Completed"]})})]})]})}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)("span",{className:"bg-gradient-to-r from-[#F3B335]/20 to-[#F3B335]/30 text-[#013A65] px-2 py-1 rounded text-xs font-medium",children:a.createdBy})}),(0,b.jsx)(h.TableCell,{className:"text-[#013A65]/70",children:new Date(a.createdAt).toLocaleDateString()}),(0,b.jsx)(h.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(f.Button,{variant:"outline",size:"sm",className:"h-8 w-8 p-0 border-[#EDEEF0] hover:bg-[#F3B335]/10 hover:border-[#F3B335]/30 bg-transparent",onClick:()=>V(a),title:"View Details",children:(0,b.jsx)(o.Eye,{className:"h-3 w-3"})}),(0,b.jsx)(f.Button,{variant:"outline",size:"sm",className:"h-8 w-8 p-0 border-[#EDEEF0] hover:bg-[#F3B335]/10 hover:border-[#F3B335]/30 bg-transparent",onClick:()=>Y(a),title:"Edit Work",children:(0,b.jsx)(p.Edit,{className:"h-3 w-3"})}),(0,b.jsx)(f.Button,{variant:"outline",size:"sm",className:"h-8 w-8 p-0 border-[#EDEEF0] hover:bg-red-50 hover:border-red-200 text-red-500 bg-transparent",onClick:()=>W(a.id),title:"Delete Work",children:(0,b.jsx)(q.Trash2,{className:"h-3 w-3"})})]})})]},a.id)})})]})})]}),(0,b.jsx)(i.Dialog,{open:K,onOpenChange:L,children:(0,b.jsxs)(i.DialogContent,{className:"max-w-4xl max-h-[80vh] overflow-y-auto border-0 shadow-2xl bg-[#F8F8F8] backdrop-blur-sm",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsxs)(i.DialogTitle,{className:"flex items-center gap-2 text-[#013A65]",children:[(0,b.jsx)(o.Eye,{className:"h-5 w-5 text-[#013A65]"}),"Work Details"]}),(0,b.jsxs)(i.DialogDescription,{className:"text-[#013A65]/70",children:["Complete details for ",O?.schemeName," - ",O?.componentName]})]}),O&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)(g.Card,{className:"border-[#EDEEF0] bg-white",children:[(0,b.jsx)(g.CardHeader,{className:"bg-gradient-to-r from-[#F8F8F8] to-[#EDEEF0] border-b border-[#EDEEF0]",children:(0,b.jsx)(g.CardTitle,{className:"text-base font-semibold text-[#013A65]",children:"Work Summary"})}),(0,b.jsx)(g.CardContent,{className:"p-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{className:"text-sm font-medium text-[#013A65]/70",children:"Scheme Name"}),(0,b.jsx)("p",{className:"text-sm text-[#013A65] font-medium",children:O.schemeName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{className:"text-sm font-medium text-[#013A65]/70",children:"Component Name"}),(0,b.jsx)("p",{className:"text-sm text-[#013A65] font-medium",children:O.componentName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{className:"text-sm font-medium text-[#013A65]/70",children:"Created By"}),(0,b.jsx)("span",{className:"bg-gradient-to-r from-[#F3B335]/20 to-[#F3B335]/30 text-[#013A65] px-2 py-1 rounded text-xs font-medium",children:O.createdBy})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(k.Label,{className:"text-sm font-medium text-[#013A65]/70",children:"Created Date"}),(0,b.jsx)("p",{className:"text-sm text-[#013A65]",children:new Date(O.createdAt).toLocaleString()})]})]})})]}),(0,b.jsxs)(g.Card,{className:"border-[#EDEEF0] bg-white",children:[(0,b.jsx)(g.CardHeader,{className:"bg-gradient-to-r from-[#F8F8F8] to-[#EDEEF0] border-b border-[#EDEEF0]",children:(0,b.jsx)(g.CardTitle,{className:"text-base font-semibold text-[#013A65]",children:"Field Data"})}),(0,b.jsx)(g.CardContent,{className:"p-4",children:(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Q.map(a=>{let c=O.fieldData?.[a.id]||"Not provided";return(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(k.Label,{className:"text-sm font-medium text-[#013A65]/70",children:[a.englishName,(0,b.jsxs)("span",{className:"text-xs text-[#013A65]/50 ml-1",children:["(",a.tamilName,")"]})]}),(0,b.jsx)("div",{className:"p-2 bg-[#F8F8F8] rounded border border-[#EDEEF0]",children:(0,b.jsx)("p",{className:"text-sm text-[#013A65]",children:"attachment"===a.dataType&&"Not provided"!==c?`${c.length} file(s) uploaded`:c})}),a.englishDescription&&(0,b.jsx)("p",{className:"text-xs text-[#013A65]/50",children:a.englishDescription})]},a.id)})})})]})]})]})}),(0,b.jsx)(i.Dialog,{open:M,onOpenChange:N,children:(0,b.jsxs)(i.DialogContent,{className:"max-w-4xl max-h-[80vh] overflow-y-auto border-0 shadow-2xl bg-[#F8F8F8] backdrop-blur-sm",children:[(0,b.jsxs)(i.DialogHeader,{children:[(0,b.jsxs)(i.DialogTitle,{className:"flex items-center gap-2 text-[#013A65]",children:[(0,b.jsx)(p.Edit,{className:"h-5 w-5 text-[#013A65]"}),"Edit Work"]}),(0,b.jsxs)(i.DialogDescription,{className:"text-[#013A65]/70",children:["Edit details for ",O?.schemeName," - ",O?.componentName]})]}),O&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Q.map(a=>(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-[#013A65]",children:[a.englishName,a.isRequired&&(0,b.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),"text"===a.dataType&&(0,b.jsx)(j.Input,{value:S[a.id]||"",onChange:b=>T(c=>({...c,[a.id]:b.target.value})),className:"h-10 border-[#EDEEF0] focus:border-[#013A65] focus:ring-[#013A65]/20 bg-white"}),"number"===a.dataType&&(0,b.jsx)(j.Input,{type:"number",value:S[a.id]||"",onChange:b=>T(c=>({...c,[a.id]:b.target.value})),className:"h-10 border-[#EDEEF0] focus:border-[#013A65] focus:ring-[#013A65]/20 bg-white"}),"date"===a.dataType&&(0,b.jsx)(j.Input,{type:"date",value:S[a.id]||"",onChange:b=>T(c=>({...c,[a.id]:b.target.value})),className:"h-10 border-[#EDEEF0] focus:border-[#013A65] focus:ring-[#013A65]/20 bg-white"})]},a.id))}),(0,b.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,b.jsx)(f.Button,{variant:"outline",onClick:()=>N(!1),className:"border-[#EDEEF0] hover:bg-[#F8F8F8]",children:"Cancel"}),(0,b.jsx)(f.Button,{onClick:Z,className:"bg-gradient-to-r from-[#013A65] to-[#013A65]/90 hover:from-[#013A65]/90 hover:to-[#013A65] text-white",children:"Save Changes"})]})]})]})})]})}function B(){return(0,e.useEffect)(()=>{},[]),(0,b.jsx)(d.ProtectedRoute,{children:(0,b.jsx)(c.DashboardLayout,{children:(0,b.jsx)(A,{})})})}a.s(["default",()=>B],79318)}];

//# sourceMappingURL=projects_TITTAM_tittam_fe_app_dashboard_work_page_tsx_2c836f63._.js.map