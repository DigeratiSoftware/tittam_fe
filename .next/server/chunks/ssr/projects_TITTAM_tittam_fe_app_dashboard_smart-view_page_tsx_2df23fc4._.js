module.exports=[65569,a=>{"use strict";var b=a.i(23413),c=a.i(32496),d=a.i(39766),e=a.i(77605),f=a.i(24224),g=a.i(6765),h=a.i(1039),i=a.i(9522),j=a.i(21039);let k=(0,j.default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),l=new class{mockLocations=[{id:"loc1",name:"Tiruvallur - Zone 1",type:"zone",coordinates:{lat:13.1167,lng:79.9167},zone:"North Chennai",district:"Tiruvallur",townPanchayat:"Tiruvallur",totalWorks:52,tenderStage:6,notStarted:9,physicallyCompleted:24,fullyCompleted:13,completedPercentage:71.2,estimate:185e5,expenditure:132e5,balance:53e5,expenditurePercentage:71.4,workDetails:[{id:"w1",name:"Road Construction - Tiruvallur Main Road",scheme:"PMGSY",component:"Roads",stage:"Physically Completed",estimate:32e5,expenditure:29e5},{id:"w2",name:"Water Supply - Tiruvallur Phase 1",scheme:"Jal Jeevan Mission",component:"Water Supply",stage:"In Progress",estimate:25e5,expenditure:18e5}]},{id:"loc2",name:"Poonamallee - Zone 2",type:"district",coordinates:{lat:13.0475,lng:80.0953},zone:"North Chennai",district:"Tiruvallur",townPanchayat:"Poonamallee",totalWorks:45,tenderStage:5,notStarted:7,physicallyCompleted:21,fullyCompleted:12,completedPercentage:73.3,estimate:16e6,expenditure:118e5,balance:42e5,expenditurePercentage:73.8,workDetails:[{id:"w3",name:"School Building - Poonamallee",scheme:"Samagra Shiksha",component:"Education",stage:"Fully Completed",estimate:35e5,expenditure:345e4}]},{id:"loc3",name:"Avadi - Zone 3",type:"townpanchayat",coordinates:{lat:13.1147,lng:80.1018},zone:"North Chennai",district:"Tiruvallur",townPanchayat:"Avadi",totalWorks:38,tenderStage:4,notStarted:6,physicallyCompleted:18,fullyCompleted:10,completedPercentage:73.7,estimate:14e6,expenditure:103e5,balance:37e5,expenditurePercentage:73.6,workDetails:[]},{id:"loc4",name:"Vellore - Zone 4",type:"zone",coordinates:{lat:12.9165,lng:79.1325},zone:"Vellore",district:"Vellore",townPanchayat:"Vellore City",totalWorks:58,tenderStage:7,notStarted:11,physicallyCompleted:26,fullyCompleted:14,completedPercentage:69,estimate:21e6,expenditure:145e5,balance:65e5,expenditurePercentage:69,workDetails:[{id:"w4",name:"Highway Development - Vellore",scheme:"PMGSY",component:"Roads",stage:"In Progress",estimate:5e6,expenditure:35e5}]},{id:"loc5",name:"Katpadi - Zone 5",type:"district",coordinates:{lat:12.9698,lng:79.1452},zone:"Vellore",district:"Vellore",townPanchayat:"Katpadi",totalWorks:42,tenderStage:5,notStarted:8,physicallyCompleted:19,fullyCompleted:10,completedPercentage:69,estimate:155e5,expenditure:107e5,balance:48e5,expenditurePercentage:69,workDetails:[]},{id:"loc6",name:"Arcot - Zone 6",type:"townpanchayat",coordinates:{lat:12.9059,lng:79.3191},zone:"Vellore",district:"Vellore",townPanchayat:"Arcot",totalWorks:35,tenderStage:3,notStarted:5,physicallyCompleted:17,fullyCompleted:10,completedPercentage:77.1,estimate:12e6,expenditure:93e5,balance:27e5,expenditurePercentage:77.5,workDetails:[]},{id:"loc7",name:"Ponneri - Zone 7",type:"townpanchayat",coordinates:{lat:13.3333,lng:80.1833},zone:"North Chennai",district:"Tiruvallur",townPanchayat:"Ponneri",totalWorks:31,tenderStage:3,notStarted:5,physicallyCompleted:15,fullyCompleted:8,completedPercentage:74.2,estimate:11e6,expenditure:82e5,balance:28e5,expenditurePercentage:74.5,workDetails:[]},{id:"loc8",name:"Ranipet - Zone 8",type:"townpanchayat",coordinates:{lat:12.9249,lng:79.3331},zone:"Vellore",district:"Vellore",townPanchayat:"Ranipet",totalWorks:40,tenderStage:4,notStarted:7,physicallyCompleted:19,fullyCompleted:10,completedPercentage:72.5,estimate:145e5,expenditure:105e5,balance:4e6,expenditurePercentage:72.4,workDetails:[]}];mockUsers=[{id:"u1",name:"Rajesh Kumar",role:"Field Engineer",zone:"North Chennai",district:"Tiruvallur",townPanchayat:"Tiruvallur",coordinates:{lat:13.1167,lng:79.9167},lastActive:"2025-01-10 14:30",status:"active"},{id:"u2",name:"Priya Sharma",role:"Site Supervisor",zone:"North Chennai",district:"Tiruvallur",townPanchayat:"Poonamallee",coordinates:{lat:13.0475,lng:80.0953},lastActive:"2025-01-10 14:25",status:"active"},{id:"u3",name:"Amit Patel",role:"Project Manager",zone:"Vellore",district:"Vellore",townPanchayat:"Vellore City",coordinates:{lat:12.9165,lng:79.1325},lastActive:"2025-01-10 13:45",status:"inactive"},{id:"u4",name:"Sneha Reddy",role:"Quality Inspector",zone:"Vellore",district:"Vellore",townPanchayat:"Katpadi",coordinates:{lat:12.9698,lng:79.1452},lastActive:"2025-01-10 14:28",status:"active"},{id:"u5",name:"Karthik Murugan",role:"Civil Engineer",zone:"North Chennai",district:"Tiruvallur",townPanchayat:"Avadi",coordinates:{lat:13.1147,lng:80.1018},lastActive:"2025-01-10 14:32",status:"active"},{id:"u6",name:"Lakshmi Devi",role:"Site Inspector",zone:"Vellore",district:"Vellore",townPanchayat:"Arcot",coordinates:{lat:12.9059,lng:79.3191},lastActive:"2025-01-10 14:15",status:"active"}];async getMapLocations(a){console.log("[v0] Fetching map locations with filters:",a);let b=[...this.mockLocations];return a.zone&&"all"!==a.zone&&(b=b.filter(b=>b.zone===a.zone)),a.district&&"all"!==a.district&&(b=b.filter(b=>b.district===a.district)),a.townPanchayat&&"all"!==a.townPanchayat&&(b=b.filter(b=>b.townPanchayat===a.townPanchayat)),b}async getUserLocations(a){console.log("[v0] Fetching user locations with filters:",a);let b=[...this.mockUsers];return a.zone&&"all"!==a.zone&&(b=b.filter(b=>b.zone===a.zone)),a.district&&"all"!==a.district&&(b=b.filter(b=>b.district===a.district)),a.townPanchayat&&"all"!==a.townPanchayat&&(b=b.filter(b=>b.townPanchayat===a.townPanchayat)),b}async getNearestTownPanchayats(a){return console.log("[v0] Fetching nearest town panchayats for:",a),this.mockLocations.filter(a=>"townpanchayat"===a.type).slice(0,3)}getZones(){return["all","North Chennai","Vellore"]}getDistricts(a){return a&&"all"!==a?["all",...Array.from(new Set(this.mockLocations.filter(b=>b.zone===a).map(a=>a.district)))]:["all","Tiruvallur","Vellore"]}getTownPanchayats(a){return a&&"all"!==a?["all",...Array.from(new Set(this.mockLocations.filter(b=>b.district===a).map(a=>a.townPanchayat)))]:["all","Tiruvallur","Poonamallee","Avadi","Ponneri","Vellore City","Katpadi","Arcot","Ranipet"]}getSchemes(){return["all","PMGSY","Jal Jeevan Mission","Samagra Shiksha","MGNREGA","Smart Cities"]}getComponents(){return["all","Roads","Water Supply","Education","Health","Sanitation"]}getYears(){return["all","2024-25","2023-24","2022-23","2021-22"]}getStages(){return["all","Tender Stage","Not Started","In Progress","Physically Completed","Fully Completed"]}async getAggregatedStatistics(a){console.log("[v0] Calculating aggregated statistics with filters:",a);let b=await this.getMapLocations(a);if(0===b.length)return{zone:"all"===a.zone?"All Zones":a.zone,district:"all"===a.district?"All Districts":a.district,townPanchayat:"all"===a.townPanchayat?"All Town Panchayats":a.townPanchayat,totalWorks:0,tenderStage:0,notStarted:0,physicallyCompleted:0,fullyCompleted:0,completedPercentage:0,estimate:0,expenditure:0,balance:0,expenditurePercentage:0};let c=b.reduce((a,b)=>({totalWorks:a.totalWorks+b.totalWorks,tenderStage:a.tenderStage+b.tenderStage,notStarted:a.notStarted+b.notStarted,physicallyCompleted:a.physicallyCompleted+b.physicallyCompleted,fullyCompleted:a.fullyCompleted+b.fullyCompleted,estimate:a.estimate+b.estimate,expenditure:a.expenditure+b.expenditure}),{totalWorks:0,tenderStage:0,notStarted:0,physicallyCompleted:0,fullyCompleted:0,estimate:0,expenditure:0}),d=c.estimate-c.expenditure,e=c.totalWorks>0?Math.round(c.fullyCompleted/c.totalWorks*1e3/10):0,f=c.estimate>0?Math.round(c.expenditure/c.estimate*1e3/10):0;return{zone:"all"===a.zone?"All Zones":a.zone,district:"all"===a.district?"All Districts":a.district,townPanchayat:"all"===a.townPanchayat?"All Town Panchayats":a.townPanchayat,totalWorks:c.totalWorks,tenderStage:c.tenderStage,notStarted:c.notStarted,physicallyCompleted:c.physicallyCompleted,fullyCompleted:c.fullyCompleted,completedPercentage:e,estimate:c.estimate,expenditure:c.expenditure,balance:d,expenditurePercentage:f}}};function m({locations:a,users:d,nearestLocations:e,onLocationClick:f,selectedLocation:g}){let h=(0,c.useRef)(null),i=(0,c.useRef)(null),j=(0,c.useRef)([]),[k,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(!1),[q,r]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{if(window.L){p(!0),r(!1);return}let a=document.querySelector('script[src*="leaflet"]');if(a)return void a.addEventListener("load",()=>{p(!0),r(!1)});let b=document.createElement("link");b.rel="stylesheet",b.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(b);let c=document.createElement("script");return c.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",c.async=!0,c.onload=()=>{console.log("[v0] Leaflet loaded successfully"),p(!0),r(!1)},c.onerror=()=>{console.error("[v0] Failed to load Leaflet"),r(!1)},document.head.appendChild(c),()=>{}},[]),(0,c.useEffect)(()=>{if(!o||!h.current||i.current)return;let a=window.L;if(!a)return void console.error("[v0] Leaflet not available");try{console.log("[v0] Initializing map");let b=a.map(h.current).setView([15.3173,75.7139],7);a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}).addTo(b),i.current=b,setTimeout(()=>{i.current&&(i.current.invalidateSize(),console.log("[v0] Map initialized and sized"))},100)}catch(a){console.error("[v0] Error initializing map:",a)}return()=>{i.current&&(console.log("[v0] Cleaning up map instance"),i.current.remove(),i.current=null)}},[o]),(0,c.useEffect)(()=>{if(!i.current||!o)return;let b=window.L;if(b)try{console.log("[v0] Adding markers to map"),j.current.forEach(a=>a.remove()),j.current=[];let c=(a,b=25)=>{let c=window.L;return c?c.divIcon({className:"custom-marker",html:`
            <div style="
              width: ${b}px;
              height: ${b}px;
              background-color: ${a};
              border: 3px solid white;
              border-radius: 50%;
              box-shadow: 0 2px 8px rgba(0,0,0,0.3);
              display: flex;
              align-items: center;
              justify-content: center;
              position: relative;
            ">
              ${"#F3B335"===a?`<div style="
                  width: ${b+10}px;
                  height: ${b+10}px;
                  border: 2px solid #F3B335;
                  border-radius: 50%;
                  position: absolute;
                  animation: pulse 1.5s infinite;
                "></div>`:""}
            </div>
            <style>
              @keyframes pulse {
                0% { transform: scale(1); opacity: 0.5; }
                100% { transform: scale(1.5); opacity: 0; }
              }
            </style>
          `,iconSize:[b,b],iconAnchor:[b/2,b/2]}):null};if(a.forEach(a=>{let d=g?.id===a.id,e=c(d?"#F3B335":"#013A65",d?30:25),h=b.marker([a.coordinates.lat,a.coordinates.lng],{icon:e}).addTo(i.current).on("click",()=>f(a)).on("mouseover",()=>l(a)).on("mouseout",()=>l(null)),k=`
          <div style="min-width: 200px;">
            <h4 style="font-weight: 600; color: #013A65; margin-bottom: 8px;">${a.name}</h4>
            <div style="font-size: 13px; color: #666;">
              <p><strong>Zone:</strong> ${a.zone}</p>
              <p><strong>District:</strong> ${a.district}</p>
              <p><strong>Town Panchayat:</strong> ${a.townPanchayat}</p>
              <p><strong>Total Works:</strong> ${a.totalWorks}</p>
              <p><strong>Completed:</strong> ${a.completedPercentage}%</p>
            </div>
          </div>
        `;h.bindPopup(k),j.current.push(h)}),e.forEach(a=>{let d=c("#10B981",20),e=b.marker([a.coordinates.lat,a.coordinates.lng],{icon:d}).addTo(i.current),f=`
          <div style="min-width: 180px;">
            <h4 style="font-weight: 600; color: #10B981; margin-bottom: 8px;">Nearest: ${a.name}</h4>
            <div style="font-size: 13px; color: #666;">
              <p><strong>Town Panchayat:</strong> ${a.townPanchayat}</p>
              <p><strong>Total Works:</strong> ${a.totalWorks}</p>
            </div>
          </div>
        `;e.bindPopup(f),j.current.push(e)}),d.forEach(a=>{let d=c("active"===a.status?"#10B981":"#6B7280",18),e=b.marker([a.coordinates.lat,a.coordinates.lng],{icon:d}).addTo(i.current).on("mouseover",()=>n(a)).on("mouseout",()=>n(null)),f=`
          <div style="min-width: 180px;">
            <h4 style="font-weight: 600; color: #013A65; margin-bottom: 8px;">${a.name}</h4>
            <div style="font-size: 13px; color: #666;">
              <p><strong>Role:</strong> ${a.role}</p>
              <p><strong>Location:</strong> ${a.townPanchayat}</p>
              <p><strong>Last Active:</strong> ${a.lastActive}</p>
              <p><strong>Status:</strong> <span style="
                display: inline-block;
                padding: 2px 8px;
                border-radius: 4px;
                font-size: 11px;
                background-color: ${"active"===a.status?"#D1FAE5":"#F3F4F6"};
                color: ${"active"===a.status?"#065F46":"#374151"};
              ">${a.status}</span></p>
            </div>
          </div>
        `;e.bindPopup(f),j.current.push(e)}),j.current.length>0){let a=b.featureGroup(j.current);i.current.fitBounds(a.getBounds().pad(.1))}console.log("[v0] Markers added successfully")}catch(a){console.error("[v0] Error adding markers:",a)}},[a,d,e,g,f,o]),q)?(0,b.jsx)("div",{className:"relative h-[600px] w-full",children:(0,b.jsx)("div",{className:"w-full h-full rounded-lg bg-gray-100 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-[#013A65] border-r-transparent mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading map..."})]})})}):(0,b.jsxs)("div",{className:"relative h-[600px] w-full",children:[o&&(0,b.jsx)("div",{ref:h,className:"w-full h-full rounded-lg"}),k&&(0,b.jsxs)("div",{className:"absolute top-16 right-4 bg-white p-4 rounded-lg shadow-lg border border-[#EDEEF0] max-w-xs z-[1000]",children:[(0,b.jsx)("h4",{className:"font-semibold text-[#013A65] mb-2",children:k.name}),(0,b.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,b.jsxs)("p",{className:"text-gray-600",children:[(0,b.jsx)("span",{className:"font-medium",children:"Zone:"})," ",k.zone]}),(0,b.jsxs)("p",{className:"text-gray-600",children:[(0,b.jsx)("span",{className:"font-medium",children:"District:"})," ",k.district]}),(0,b.jsxs)("p",{className:"text-gray-600",children:[(0,b.jsx)("span",{className:"font-medium",children:"Total Works:"})," ",k.totalWorks]}),(0,b.jsxs)("p",{className:"text-gray-600",children:[(0,b.jsx)("span",{className:"font-medium",children:"Completed:"})," ",k.completedPercentage,"%"]}),k.workDetails.length>0&&(0,b.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[(0,b.jsx)("p",{className:"font-medium text-[#013A65] mb-1",children:"Recent Works:"}),k.workDetails.slice(0,2).map(a=>(0,b.jsxs)("p",{className:"text-xs text-gray-600",children:["â€¢ ",a.name]},a.id))]})]})]}),m&&(0,b.jsxs)("div",{className:"absolute top-16 left-4 bg-white p-4 rounded-lg shadow-lg border border-[#EDEEF0] max-w-xs z-[1000]",children:[(0,b.jsx)("h4",{className:"font-semibold text-[#013A65] mb-2",children:m.name}),(0,b.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,b.jsxs)("p",{className:"text-gray-600",children:[(0,b.jsx)("span",{className:"font-medium",children:"Role:"})," ",m.role]}),(0,b.jsxs)("p",{className:"text-gray-600",children:[(0,b.jsx)("span",{className:"font-medium",children:"Location:"})," ",m.townPanchayat]}),(0,b.jsxs)("p",{className:"text-gray-600",children:[(0,b.jsx)("span",{className:"font-medium",children:"Last Active:"})," ",m.lastActive]}),(0,b.jsxs)("p",{className:"text-gray-600",children:[(0,b.jsx)("span",{className:"font-medium",children:"Status:"})," ",(0,b.jsx)("span",{className:`inline-block px-2 py-0.5 rounded text-xs ${"active"===m.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:m.status})]})]})]}),(0,b.jsxs)("div",{className:"mt-4 flex items-center gap-6 text-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 rounded-full bg-[#013A65] border-2 border-white shadow"}),(0,b.jsx)("span",{className:"text-gray-600",children:"Locations"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 rounded-full bg-[#F3B335] border-2 border-white shadow"}),(0,b.jsx)("span",{className:"text-gray-600",children:"Selected"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 rounded-full bg-[#10B981] border-2 border-white shadow"}),(0,b.jsx)("span",{className:"text-gray-600",children:"Nearest TP / Active Users"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"w-4 h-4 rounded-full bg-[#6B7280] border-2 border-white shadow"}),(0,b.jsx)("span",{className:"text-gray-600",children:"Inactive Users"})]})]})]})}var n=a.i(7408),o=a.i(23803),p=a.i(36183),q=a.i(26915),r=a.i(32110);let s=(0,j.default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),t=(0,j.default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),u=(0,j.default)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);function v({statistics:a}){let c=a=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(a),d=[{label:"Zone",value:a.zone,icon:h.MapPin,color:"text-[#013A65]",bgColor:"bg-[#013A65]/10"},{label:"District",value:a.district,icon:h.MapPin,color:"text-[#013A65]",bgColor:"bg-[#013A65]/10"},{label:"Town Panchayat",value:a.townPanchayat,icon:h.MapPin,color:"text-[#013A65]",bgColor:"bg-[#013A65]/10"},{label:"Total Works",value:a.totalWorks.toString(),icon:n.Briefcase,color:"text-[#F3B335]",bgColor:"bg-[#F3B335]/10"},{label:"Tender Stage",value:a.tenderStage.toString(),icon:o.Clock,color:"text-orange-600",bgColor:"bg-orange-50"},{label:"Not Started",value:a.notStarted.toString(),icon:p.PlayCircle,color:"text-red-600",bgColor:"bg-red-50"},{label:"Physically Completed",value:a.physicallyCompleted.toString(),icon:q.CheckCircle,color:"text-yellow-600",bgColor:"bg-yellow-50"},{label:"Fully Completed",value:a.fullyCompleted.toString(),icon:r.CheckCircle2,color:"text-green-600",bgColor:"bg-green-50"},{label:"Completed %",value:`${a.completedPercentage}%`,icon:s,color:"text-green-600",bgColor:"bg-green-50"},{label:"Estimate",value:c(a.estimate),icon:t,color:"text-blue-600",bgColor:"bg-blue-50"},{label:"Expenditure",value:c(a.expenditure),icon:t,color:"text-indigo-600",bgColor:"bg-indigo-50"},{label:"Balance",value:c(a.balance),icon:t,color:"text-gray-600",bgColor:"bg-gray-50"},{label:"Expenditure %",value:`${a.expenditurePercentage}%`,icon:u,color:"text-indigo-600",bgColor:"bg-indigo-50"}];return(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-13 gap-3",children:d.map((a,c)=>{let d=a.icon;return(0,b.jsxs)("div",{className:"bg-white border border-[#EDEEF0] rounded-lg p-3 hover:shadow-md transition-shadow",children:[(0,b.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,b.jsx)("div",{className:`p-2 rounded-lg ${a.bgColor}`,children:(0,b.jsx)(d,{className:`w-4 h-4 ${a.color}`})})}),(0,b.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:a.label}),(0,b.jsx)("p",{className:"text-base font-bold text-[#013A65] truncate",title:a.value,children:a.value})]},c)})})}var w=a.i(46592),x=a.i(32684);function y({locations:a}){let c=a=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(a);return(0,b.jsxs)(w.Card,{className:"border-[#EDEEF0] shadow-sm",children:[(0,b.jsx)(w.CardHeader,{className:"bg-gradient-to-r from-[#013A65] to-[#013A65]/90 text-white",children:(0,b.jsx)(w.CardTitle,{className:"text-lg",children:"Nearest Town Panchayat Details"})}),(0,b.jsx)(w.CardContent,{className:"p-0",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(x.Table,{children:[(0,b.jsx)(x.TableHeader,{children:(0,b.jsxs)(x.TableRow,{className:"bg-[#F3B335] hover:bg-[#F3B335]",children:[(0,b.jsx)(x.TableHead,{className:"text-[#013A65] font-semibold",children:"Town Panchayat"}),(0,b.jsx)(x.TableHead,{className:"text-[#013A65] font-semibold",children:"District"}),(0,b.jsx)(x.TableHead,{className:"text-[#013A65] font-semibold",children:"Total Works"}),(0,b.jsx)(x.TableHead,{className:"text-[#013A65] font-semibold",children:"Completed"}),(0,b.jsx)(x.TableHead,{className:"text-[#013A65] font-semibold",children:"Estimate"}),(0,b.jsx)(x.TableHead,{className:"text-[#013A65] font-semibold",children:"Expenditure"}),(0,b.jsx)(x.TableHead,{className:"text-[#013A65] font-semibold",children:"Balance"})]})}),(0,b.jsx)(x.TableBody,{children:a.map(a=>(0,b.jsxs)(x.TableRow,{className:"hover:bg-[#F8F8F8]/50",children:[(0,b.jsx)(x.TableCell,{className:"font-medium",children:a.townPanchayat}),(0,b.jsx)(x.TableCell,{children:a.district}),(0,b.jsx)(x.TableCell,{children:a.totalWorks}),(0,b.jsx)(x.TableCell,{children:(0,b.jsxs)("span",{className:"inline-block px-2 py-1 rounded bg-green-100 text-green-800 text-xs font-medium",children:[a.completedPercentage,"%"]})}),(0,b.jsx)(x.TableCell,{children:c(a.estimate)}),(0,b.jsx)(x.TableCell,{children:c(a.expenditure)}),(0,b.jsx)(x.TableCell,{children:c(a.balance)})]},a.id))})]})})})]})}var z=a.i(5052);function A({users:a}){return(0,b.jsxs)(w.Card,{className:"border-[#EDEEF0] shadow-sm",children:[(0,b.jsx)(w.CardHeader,{className:"bg-gradient-to-r from-[#013A65] to-[#013A65]/90 text-white",children:(0,b.jsx)(w.CardTitle,{className:"text-lg",children:"User Location Tracking"})}),(0,b.jsx)(w.CardContent,{className:"p-0",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)(x.Table,{children:[(0,b.jsx)(x.TableHeader,{children:(0,b.jsxs)(x.TableRow,{className:"bg-[#F3B335] hover:bg-[#F3B335]",children:[(0,b.jsx)(x.TableHead,{className:"text-[#013A65] font-semibold",children:"Name"}),(0,b.jsx)(x.TableHead,{className:"text-[#013A65] font-semibold",children:"Role"}),(0,b.jsx)(x.TableHead,{className:"text-[#013A65] font-semibold",children:"Zone"}),(0,b.jsx)(x.TableHead,{className:"text-[#013A65] font-semibold",children:"District"}),(0,b.jsx)(x.TableHead,{className:"text-[#013A65] font-semibold",children:"Town Panchayat"}),(0,b.jsx)(x.TableHead,{className:"text-[#013A65] font-semibold",children:"Last Active"}),(0,b.jsx)(x.TableHead,{className:"text-[#013A65] font-semibold",children:"Status"})]})}),(0,b.jsx)(x.TableBody,{children:a.map(a=>(0,b.jsxs)(x.TableRow,{className:"hover:bg-[#F8F8F8]/50",children:[(0,b.jsx)(x.TableCell,{className:"font-medium",children:a.name}),(0,b.jsx)(x.TableCell,{children:a.role}),(0,b.jsx)(x.TableCell,{children:a.zone}),(0,b.jsx)(x.TableCell,{children:a.district}),(0,b.jsx)(x.TableCell,{children:a.townPanchayat}),(0,b.jsx)(x.TableCell,{className:"text-sm text-gray-600",children:a.lastActive}),(0,b.jsx)(x.TableCell,{children:(0,b.jsx)(z.Badge,{variant:"active"===a.status?"default":"secondary",className:"active"===a.status?"bg-green-100 text-green-800 hover:bg-green-100":"bg-gray-100 text-gray-800 hover:bg-gray-100",children:a.status})})]},a.id))})]})})})]})}var B=a.i(22313);function C(){let[a,j]=(0,c.useState)({zone:"all",district:"all",townPanchayat:"all",scheme:"all",component:"all",year:"all",stage:"all"}),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)([]),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(!1),[w,x]=(0,c.useState)([]),[z,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)([]),[H,I]=(0,c.useState)([]),[J,K]=(0,c.useState)([]),[L,M]=(0,c.useState)(null);(0,c.useEffect)(()=>{G(l.getZones()),I(l.getDistricts(a.zone)),K(l.getTownPanchayats(a.district))},[a.zone,a.district]),(0,c.useEffect)(()=>{N()},[a]);let N=async()=>{E(!0);try{let[b,c,d]=await Promise.all([l.getMapLocations(a),l.getUserLocations(a),l.getAggregatedStatistics(a)]);o(b),q(c),M(d)}catch(a){(0,B.toast)({title:"Error",description:"Failed to load smart view data",variant:"destructive"})}finally{E(!1)}},O=async a=>{s(a),t&&x(await l.getNearestTownPanchayats(a.id))},P=async()=>{u(!t),!t&&r&&x(await l.getNearestTownPanchayats(r.id))};return(0,b.jsx)(d.DashboardLayout,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-[#013A65] to-[#013A65]/90 rounded-lg py-3 px-6 text-white shadow-lg",children:(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-semibold",children:"Smart View"}),(0,b.jsx)("p",{className:"text-white/80 text-sm mt-1",children:"Interactive map view with location tracking and analytics"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(g.Button,{onClick:()=>C(!z),size:"sm",className:"bg-gradient-to-r from-[#F3B335] to-[#F3B335]/90 hover:from-[#F3B335]/90 hover:to-[#F3B335]/80 text-[#013A65] border-0 shadow-lg hover:shadow-xl transition-all duration-300 h-9 px-4 text-sm font-medium",children:[(0,b.jsx)(i.Users,{className:"h-4 w-4 mr-1.5"}),z?"Hide":"Show"," User Tracking"]}),(0,b.jsxs)(g.Button,{onClick:P,size:"sm",className:"bg-gradient-to-r from-[#F3B335] to-[#F3B335]/90 hover:from-[#F3B335]/90 hover:to-[#F3B335]/80 text-[#013A65] border-0 shadow-lg hover:shadow-xl transition-all duration-300 h-9 px-4 text-sm font-medium",children:[(0,b.jsx)(h.MapPin,{className:"h-4 w-4 mr-1.5"}),t?"Hide":"Show"," Nearest TP"]}),(0,b.jsxs)(g.Button,{onClick:N,disabled:D,size:"sm",className:"bg-white/10 hover:bg-white/20 text-white border border-white/20 h-9 px-4 text-sm font-medium",children:[(0,b.jsx)(k,{className:`h-4 w-4 mr-1.5 ${D?"animate-spin":""}`}),"Refresh"]})]})]})}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-[#EDEEF0] shadow-sm overflow-hidden",children:[(0,b.jsx)("div",{className:"relative z-10 p-4 border-b border-[#EDEEF0] bg-gradient-to-r from-[#F8F8F8] to-[#EDEEF0]",children:(0,b.jsxs)("div",{className:"grid grid-cols-7 gap-3",children:[(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)(e.Label,{className:"text-sm font-medium text-[#013A65] mb-1.5 block",children:"Zone"}),(0,b.jsxs)(f.Select,{value:a.zone,onValueChange:b=>{j({...a,zone:b,district:"all",townPanchayat:"all"})},children:[(0,b.jsx)(f.SelectTrigger,{className:"h-9 w-full bg-white border-[#EDEEF0] focus:border-[#013A65] focus:ring-[#013A65]/20",children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsx)(f.SelectContent,{children:F.map(a=>(0,b.jsx)(f.SelectItem,{value:a,children:"all"===a?"All Zones":a},a))})]})]}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)(e.Label,{className:"text-sm font-medium text-[#013A65] mb-1.5 block",children:"District"}),(0,b.jsxs)(f.Select,{value:a.district,onValueChange:b=>{j({...a,district:b,townPanchayat:"all"})},children:[(0,b.jsx)(f.SelectTrigger,{className:"h-9 w-full bg-white border-[#EDEEF0] focus:border-[#013A65] focus:ring-[#013A65]/20",children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsx)(f.SelectContent,{children:H.map(a=>(0,b.jsx)(f.SelectItem,{value:a,children:"all"===a?"All Districts":a},a))})]})]}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)(e.Label,{className:"text-sm font-medium text-[#013A65] mb-1.5 block",children:"Town Panchayat"}),(0,b.jsxs)(f.Select,{value:a.townPanchayat,onValueChange:b=>j({...a,townPanchayat:b}),children:[(0,b.jsx)(f.SelectTrigger,{className:"h-9 w-full bg-white border-[#EDEEF0] focus:border-[#013A65] focus:ring-[#013A65]/20",children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsx)(f.SelectContent,{children:J.map(a=>(0,b.jsx)(f.SelectItem,{value:a,children:"all"===a?"All Town Panchayats":a},a))})]})]}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)(e.Label,{className:"text-sm font-medium text-[#013A65] mb-1.5 block",children:"Scheme"}),(0,b.jsxs)(f.Select,{value:a.scheme,onValueChange:b=>j({...a,scheme:b}),children:[(0,b.jsx)(f.SelectTrigger,{className:"h-9 w-full bg-white border-[#EDEEF0] focus:border-[#013A65] focus:ring-[#013A65]/20",children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsx)(f.SelectContent,{children:l.getSchemes().map(a=>(0,b.jsx)(f.SelectItem,{value:a,children:"all"===a?"All Schemes":a},a))})]})]}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)(e.Label,{className:"text-sm font-medium text-[#013A65] mb-1.5 block",children:"Component"}),(0,b.jsxs)(f.Select,{value:a.component,onValueChange:b=>j({...a,component:b}),children:[(0,b.jsx)(f.SelectTrigger,{className:"h-9 w-full bg-white border-[#EDEEF0] focus:border-[#013A65] focus:ring-[#013A65]/20",children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsx)(f.SelectContent,{children:l.getComponents().map(a=>(0,b.jsx)(f.SelectItem,{value:a,children:"all"===a?"All Components":a},a))})]})]}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)(e.Label,{className:"text-sm font-medium text-[#013A65] mb-1.5 block",children:"Year"}),(0,b.jsxs)(f.Select,{value:a.year,onValueChange:b=>j({...a,year:b}),children:[(0,b.jsx)(f.SelectTrigger,{className:"h-9 w-full bg-white border-[#EDEEF0] focus:border-[#013A65] focus:ring-[#013A65]/20",children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsx)(f.SelectContent,{children:l.getYears().map(a=>(0,b.jsx)(f.SelectItem,{value:a,children:"all"===a?"All Years":a},a))})]})]}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)(e.Label,{className:"text-sm font-medium text-[#013A65] mb-1.5 block",children:"Stage"}),(0,b.jsxs)(f.Select,{value:a.stage,onValueChange:b=>j({...a,stage:b}),children:[(0,b.jsx)(f.SelectTrigger,{className:"h-9 w-full bg-white border-[#EDEEF0] focus:border-[#013A65] focus:ring-[#013A65]/20",children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsx)(f.SelectContent,{children:l.getStages().map(a=>(0,b.jsx)(f.SelectItem,{value:a,children:"all"===a?"All Stages":a},a))})]})]})]})}),(0,b.jsxs)("div",{className:"relative z-0 bg-[#F8F8F8]",children:[(0,b.jsx)("div",{className:"p-4",children:(0,b.jsx)(m,{locations:n,users:z?p:[],nearestLocations:t?w:[],onLocationClick:O,selectedLocation:r})}),L&&(0,b.jsx)("div",{className:"bg-white border-t border-[#EDEEF0] p-4",children:(0,b.jsx)(v,{statistics:L})}),r&&t&&w.length>0&&(0,b.jsx)("div",{className:"p-4",children:(0,b.jsx)(y,{locations:w})}),z&&p.length>0&&(0,b.jsx)("div",{className:"p-4",children:(0,b.jsx)(A,{users:p})})]})]})]})})}a.s(["default",()=>C],65569)}];

//# sourceMappingURL=projects_TITTAM_tittam_fe_app_dashboard_smart-view_page_tsx_2df23fc4._.js.map