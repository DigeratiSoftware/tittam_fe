module.exports=[48775,a=>{"use strict";var b=a.i(23413),c=a.i(32496),d=a.i(11800),e=a.i(39766),f=a.i(6765),g=a.i(46592),h=a.i(94328),i=a.i(21039);let j=(0,i.default)("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);var k=a.i(74076);let l=(0,i.default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var m=a.i(97400),n=a.i(34892),o=a.i(42337),p=a.i(32340),q=a.i(54066),r=a.i(15481),s=a.i(99300),t=a.i(32967),u=a.i(53109),v=a.i(63740),w=a.i(93663),x=a.i(92349),y=a.i(44089),z=a.i(52656),A=a.i(70663),B=a.i(77605),C=a.i(87324);function D({open:a,onOpenChange:d,onSuccess:e,subfolder:g}){let{user:i}=(0,w.useAuth)(),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)({}),r=async a=>{if(a.preventDefault(),0!==j.length&&g&&i){o(""),m(!0),q({});try{let{canUpload:a,reason:b}=await v.driveService.canUserUpload(g.id,i.id,i.role);if(!a){o(b||"Cannot upload files"),m(!1);return}for(let a of j){let b=a.name.split(".").pop()?.toLowerCase()||"";a.size,q(b=>({...b,[a.name]:!0})),await v.driveService.uploadFile({subfolderId:g.id,folderId:g.folderId,fileName:a.name,fileType:b,fileSize:a.size,uploadedBy:i.id,uploadedByName:i.name,url:"/placeholder.svg?height=400&width=600",zone:"",district:"",townPanchayat:""})}e(),d(!1),k([]),q({})}catch(a){console.error("Failed to upload files:",a),o("Failed to upload files. Please try again.")}finally{m(!1)}}};return(0,b.jsx)(z.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(z.DialogContent,{className:"sm:max-w-[550px] max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)(z.DialogHeader,{children:[(0,b.jsx)(z.DialogTitle,{className:"text-xl font-semibold text-[#013A65]",children:"Upload Files"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Upload to ",g?.title]})]}),g&&(0,b.jsxs)("div",{className:"text-xs text-muted-foreground bg-muted/30 px-3 py-2 rounded border",children:[(0,b.jsx)("span",{className:"font-medium text-[#013A65]",children:"Requirements:"})," ",g.allowedFileTypes.join(", ").toUpperCase()," • Max ",g.maxFileSize,"MB • Up to"," ",g.maxFilesPerUser," files"]}),(0,b.jsxs)("form",{onSubmit:r,className:"space-y-4",children:[n&&(0,b.jsx)("div",{className:"p-2.5 bg-destructive/10 border border-destructive/20 text-destructive rounded text-sm",children:n}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(B.Label,{htmlFor:"fileInput",className:"text-sm font-medium text-[#013A65]",children:["Select Files ",(0,b.jsx)("span",{className:"text-destructive",children:"*"})]}),(0,b.jsx)(A.Input,{id:"fileInput",type:"file",onChange:a=>{let b=Array.from(a.target.files||[]);if(0===b.length)return;let c=[],d="";for(let a of b){let b=a.name.split(".").pop()?.toLowerCase()||"",e=a.size/1048576;if(g&&!g.allowedFileTypes.includes(b)){d=`File ${a.name} has invalid type. Allowed: ${g.allowedFileTypes.join(", ")}`;break}if(g&&e>g.maxFileSize){d=`File ${a.name} exceeds max size of ${g.maxFileSize} MB`;break}c.push(a)}d?o(d):(k(a=>[...a,...c]),o(""))},accept:g?.allowedFileTypes.map(a=>`.${a}`).join(","),multiple:!0,className:"cursor-pointer h-10 text-sm file:mr-3 file:py-1.5 file:px-3 file:rounded file:border-0 file:text-sm file:font-medium file:bg-[#F3B335] file:text-[#013A65] hover:file:bg-[#F3B335]/90"})]}),j.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(B.Label,{className:"text-sm font-medium text-[#013A65]",children:["Selected Files (",j.length,")"]}),(0,b.jsx)("div",{className:"space-y-1.5 max-h-[250px] overflow-y-auto border rounded p-2 bg-muted/20",children:j.map((a,c)=>{let d=a.name.split(".").pop()?.toLowerCase()||"",e=p[a.name];return(0,b.jsxs)("div",{className:"flex items-center gap-2 p-2 bg-white border rounded hover:border-[#F3B335]/50 transition-colors",children:[(0,b.jsx)(t.FileText,{className:"h-4 w-4 text-[#013A65] flex-shrink-0"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-[#013A65] truncate",children:a.name}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(a.size/1048576).toFixed(2)," MB • ",d.toUpperCase()]})]}),e?(0,b.jsx)("span",{className:"text-xs text-[#F3B335] font-medium",children:"Uploading..."}):(0,b.jsx)(f.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>{k(a=>a.filter((a,b)=>b!==c))},disabled:l,className:"h-7 w-7 p-0 hover:bg-destructive/10 hover:text-destructive",children:(0,b.jsx)(C.X,{className:"h-3.5 w-3.5"})})]},`${a.name}-${c}`)})})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-3 border-t",children:[(0,b.jsx)(f.Button,{type:"button",variant:"outline",onClick:()=>{d(!1),k([]),o("")},disabled:l,className:"min-w-[90px] h-9",children:"Cancel"}),(0,b.jsx)(f.Button,{type:"submit",disabled:l||0===j.length,className:"min-w-[110px] h-9 bg-gradient-to-r from-[#013A65] to-[#013A65]/90 hover:from-[#013A65]/90 hover:to-[#013A65]/80 text-white",children:l?`Uploading ${Object.keys(p).length}/${j.length}...`:(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Upload,{className:"h-4 w-4 mr-2"}),"Upload ",j.length]})})]})]})]})})}let E=(0,i.default)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);function F({open:a,onOpenChange:c,userName:d,files:e}){let g=e||[];return(0,b.jsx)(z.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(z.DialogContent,{className:"max-w-4xl max-h-[80vh] overflow-hidden flex flex-col",children:[(0,b.jsx)(z.DialogHeader,{children:(0,b.jsxs)(z.DialogTitle,{className:"text-xl font-bold text-[#013A65]",children:["Files Uploaded by ",d]})}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===g.length?(0,b.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,b.jsx)(E,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,b.jsx)("p",{children:"No files uploaded yet"})]}):(0,b.jsx)("div",{className:"space-y-3",children:g.map(a=>{var c;return(0,b.jsx)("div",{className:"bg-white border-l-4 border-[#F3B335] rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,b.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[(0,b.jsx)(E,{className:"h-5 w-5 text-[#013A65] flex-shrink-0 mt-1"}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h4",{className:"font-medium text-[#013A65] mb-1 break-words",children:a.fileName}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-1 text-sm text-muted-foreground",children:[(0,b.jsx)("span",{className:"flex items-center gap-1",children:(0,b.jsx)("span",{className:"px-2 py-0.5 bg-[#F3B335]/20 text-[#013A65] rounded text-xs font-medium",children:a.fileType.toUpperCase()})}),(0,b.jsx)("span",{children:(c=a.fileSize)<1024?c+" B":c<1048576?(c/1024).toFixed(2)+" KB":(c/1048576).toFixed(2)+" MB"}),(0,b.jsx)("span",{children:new Date(a.uploadedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,b.jsx)("div",{className:"mt-2 text-xs text-muted-foreground",children:(0,b.jsxs)("p",{children:[a.zone," • ",a.district," • ",a.townPanchayat]})})]})]}),(0,b.jsxs)(f.Button,{variant:"outline",size:"sm",onClick:()=>window.open(a.url,"_blank"),className:"text-[#013A65] border-[#013A65]/20 hover:bg-[#013A65]/10 flex-shrink-0",children:[(0,b.jsx)(r.Download,{className:"h-4 w-4 mr-1"}),"Download"]})]})},a.id)})})}),(0,b.jsx)("div",{className:"flex justify-end pt-4 border-t",children:(0,b.jsxs)(f.Button,{variant:"outline",onClick:()=>c(!1),children:[(0,b.jsx)(C.X,{className:"h-4 w-4 mr-2"}),"Close"]})})]})})}var G=a.i(22313);function H(){let{user:a}=(0,w.useAuth)(),{toast:i}=(0,G.useToast)(),[z,A]=(0,c.useState)([]),[B,C]=(0,c.useState)([]),[E,H]=(0,c.useState)(!0),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(!1),[M,N]=(0,c.useState)("table"),[O,P]=(0,c.useState)(null),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)(!1),[U,V]=(0,c.useState)(null),[W,X]=(0,c.useState)(!1),[Y,Z]=(0,c.useState)(new Set),[$,_]=(0,c.useState)("all"),[aa,ab]=(0,c.useState)(""),[ac,ad]=(0,c.useState)(""),[ae,af]=(0,c.useState)(""),[ag,ah]=(0,c.useState)(""),[ai,aj]=(0,c.useState)(!1);(0,c.useEffect)(()=>{ak()},[]);let ak=async()=>{H(!0);try{let a=await v.driveService.getFolders();A(a);let b=new Set;a.forEach(a=>{b.add(a.id),al(a.folders||[],b)}),Z(b)}catch(a){console.error("Failed to load folders:",a)}finally{H(!1)}},al=(a,b)=>{a.forEach(a=>{b.add(a.id),a.folders&&a.folders.length>0&&al(a.folders,b)})},am=async b=>{J(!0);try{let c=await v.driveService.getUserFileSummaries(b,a?.id,a?.role);C(c)}catch(a){console.error("Failed to load data:",a),i({title:"Error loading data",description:"Failed to load folder data. Please try again.",variant:"destructive"})}finally{J(!1)}},an=a=>{V(a),X(!0)},ao=a=>{Z(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},ap=a=>!a.folders||0===a.folders.length,aq=(b,c)=>{let d=v.driveService.getEffectiveShareConfig(b.id,c);return!!d&&!!("all"===d.accessType||"roles"===d.accessType&&d.allowedRoles?.includes(a?.role)||"users"===d.accessType&&d.allowedUserIds?.includes(a?.id))},ar=(a,b)=>{let c=[];for(let d of a)if(aq(d,b)&&c.push(d),d.folders&&d.folders.length>0){let a=ar(d.folders,b);c.push(...a)}return c},as=a=>{let b=[],c=a=>{for(let d of a)b.push(d),d.folders&&d.folders.length>0&&c(d.folders)};return c(a),b},at=z.map(a=>{let b=as(a.folders||[]);return{...a,folders:a.folders||[],allFolders:b}}).filter(a=>ar(a.folders,a.allFolders).length>0),au=B.filter(a=>("completed"!==$||!(a.pendingCount>0))&&("pending"!==$||0!==a.pendingCount)&&(!aa||!!a.userName.toLowerCase().includes(aa.toLowerCase()))&&(!ac||a.zone===ac)&&(!ae||a.district===ae)&&(!ag||a.townPanchayat===ag)&&!0),av=Array.from(new Set(B.map(a=>a.zone))),aw=Array.from(new Set(B.filter(a=>!ac||a.zone===ac).map(a=>a.district))),ax=Array.from(new Set(B.filter(a=>!ae||a.district===ae).map(a=>a.townPanchayat))),ay=a?.role==="admin"||a?.role==="manager",az=async()=>{if(0===au.length)return void i({title:"No files to download",description:"There are no files matching your current filters.",variant:"destructive"});L(!0);try{let a=[];for(let b of au)b.files&&a.push(...b.files.map(a=>a.id));if(0===a.length)return void i({title:"No files to download",description:"The selected users have not uploaded any files yet.",variant:"destructive"});await v.driveService.bulkDownloadFiles(a),i({title:"Download started",description:`Downloading ${a.length} file(s) from selected folder`})}catch(a){console.error("Bulk download failed:",a),i({title:"Download failed",description:"Failed to download files. Please try again.",variant:"destructive"})}finally{L(!1)}},aA=(a,c,d=0)=>a.map(a=>{if(!aq(a,c))return null;let e=a.folders&&a.folders.length>0,f=Y.has(a.id),g=ap(a),h=Q===a.id,i=v.driveService.isFolderShared(a.id,c);return(0,b.jsxs)("div",{children:[(0,b.jsxs)("button",{onClick:()=>{e&&ao(a.id),P(a.id),R(a.id),am(a.id)},className:(0,x.cn)("w-full text-left px-3 py-2.5 rounded-lg text-sm transition-all flex items-center gap-2.5 group",h?"bg-[#013A65] text-white font-medium shadow-md":"text-[#013A65]/80 hover:bg-[#F3B335]/10 hover:text-[#013A65]"),style:{paddingLeft:`${16*d+12}px`},children:[e?f?(0,b.jsx)(p.ChevronDown,{className:"h-4 w-4 flex-shrink-0"}):(0,b.jsx)(q.ChevronRight,{className:"h-4 w-4 flex-shrink-0"}):(0,b.jsx)("div",{className:"w-4"}),g?(0,b.jsx)(n.FolderOpen,{className:(0,x.cn)("h-4 w-4 flex-shrink-0",h?"text-[#F3B335]":"text-[#013A65]")}):(0,b.jsx)(o.Folder,{className:(0,x.cn)("h-4 w-4 flex-shrink-0",h?"text-[#F3B335]":"text-[#013A65]")}),(0,b.jsx)("span",{className:"truncate flex-1",children:a.name}),i.isShared&&(0,b.jsx)("span",{className:(0,x.cn)("text-[10px] font-medium px-2 py-0.5 rounded-full",i.isInherited?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700",h&&"bg-white/20 text-white"),children:i.isInherited?"Inherited":"Shared"})]}),e&&f&&(0,b.jsx)("div",{className:"mt-0.5",children:aA(a.folders,c,d+1)})]},a.id)});return(0,b.jsx)(d.ProtectedRoute,{children:(0,b.jsxs)(e.DashboardLayout,{children:[(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"bg-gradient-to-r from-[#013A65] to-[#013A65]/90 rounded-lg py-3 px-6 text-white shadow-lg",children:(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl font-semibold",children:"Smart Drive"}),(0,b.jsx)("p",{className:"text-white/80 text-sm mt-1",children:"Upload and manage files by databox and shares"})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(f.Button,{variant:"grid"===M?"default":"outline",size:"sm",onClick:()=>N("grid"),className:(0,x.cn)("h-9 border-white/20","grid"===M?"bg-[#F3B335] text-[#013A65] hover:bg-[#F3B335]/90":"bg-green-600 text-white hover:bg-green-700"),children:(0,b.jsx)(j,{className:"h-4 w-4"})}),(0,b.jsx)(f.Button,{variant:"table"===M?"default":"outline",size:"sm",onClick:()=>N("table"),className:(0,x.cn)("h-9 border-white/20","table"===M?"bg-[#F3B335] text-[#013A65] hover:bg-[#F3B335]/90":"bg-green-600 text-white hover:bg-green-700"),children:(0,b.jsx)(k.List,{className:"h-4 w-4"})}),ay&&(0,b.jsx)(y.default,{href:"/dashboard/drive/manage",children:(0,b.jsxs)(f.Button,{size:"sm",className:"bg-gradient-to-r from-[#F3B335] to-[#F3B335]/90 hover:from-[#F3B335]/90 hover:to-[#F3B335]/80 text-[#013A65] border-0 shadow-lg hover:shadow-xl transition-all duration-300 h-9 px-4 text-sm font-medium",children:[(0,b.jsx)(l,{className:"h-4 w-4 mr-1.5"}),"Manage Databox"]})}),Q&&(()=>{if(!Q)return!1;for(let a of at){let b=as(a.folders||[]).find(a=>a.id===Q);if(b)return ap(b)}return!1})()&&(0,b.jsxs)(f.Button,{onClick:()=>T(!0),size:"sm",className:"bg-gradient-to-r from-[#F3B335] to-[#F3B335]/90 hover:from-[#F3B335]/90 hover:to-[#F3B335]/80 text-[#013A65] border-0 shadow-lg hover:shadow-xl transition-all duration-300 h-9 px-4 text-sm font-medium",children:[(0,b.jsx)(h.Upload,{className:"h-4 w-4 mr-1.5"}),"Upload Files"]})]})]})}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("input",{type:"text",placeholder:"Search by user name...",value:aa,onChange:a=>ab(a.target.value),className:"h-11 px-4 border border-[#013A65]/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#013A65]/20 focus:border-[#013A65] text-sm min-w-[280px] flex-1"}),(0,b.jsx)(f.Button,{variant:"all"===$?"default":"outline",size:"sm",onClick:()=>_("all"),className:(0,x.cn)("h-11 px-6","all"===$?"bg-[#013A65] text-white hover:bg-[#013A65]/90":"border-[#013A65]/20 text-[#013A65] hover:bg-[#013A65]/10"),children:"All"}),(0,b.jsx)(f.Button,{variant:"completed"===$?"default":"outline",size:"sm",onClick:()=>_("completed"),className:(0,x.cn)("h-11 px-6","completed"===$?"bg-green-600 text-white hover:bg-green-700":"border-[#013A65]/20 text-green-600 hover:bg-green-50"),children:"Completed"}),(0,b.jsx)(f.Button,{variant:"pending"===$?"default":"outline",size:"sm",onClick:()=>_("pending"),className:(0,x.cn)("h-11 px-6","pending"===$?"bg-orange-600 text-white hover:bg-orange-700":"border-[#013A65]/20 text-orange-600 hover:bg-orange-50"),children:"Pending"}),(0,b.jsx)(f.Button,{variant:"outline",size:"sm",onClick:()=>aj(!ai),className:(0,x.cn)("h-11 px-4 ml-auto",ai?"bg-[#013A65] text-white hover:bg-[#013A65]/90":"border-[#013A65]/20 text-[#013A65] hover:bg-[#013A65]/10"),children:(0,b.jsx)(u.Filter,{className:"h-4 w-4"})})]}),ai&&(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsxs)("select",{value:ac,onChange:a=>{ad(a.target.value),af(""),ah("")},className:"h-11 px-4 border border-[#013A65]/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#013A65]/20 focus:border-[#013A65] text-sm min-w-[280px]",children:[(0,b.jsx)("option",{value:"",children:"All Zones"}),av.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),(0,b.jsxs)("select",{value:ae,onChange:a=>{af(a.target.value),ah("")},disabled:!ac,className:"h-11 px-4 border border-[#013A65]/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#013A65]/20 focus:border-[#013A65] text-sm min-w-[280px] disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,b.jsx)("option",{value:"",children:"All Districts"}),aw.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]}),(0,b.jsxs)("select",{value:ag,onChange:a=>ah(a.target.value),disabled:!ae,className:"h-11 px-4 border border-[#013A65]/20 rounded-lg focus:outline-none focus:ring-2 focus:ring-[#013A65]/20 focus:border-[#013A65] text-sm min-w-[280px] disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,b.jsx)("option",{value:"",children:"All Town Panchayats"}),ax.map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]}),(0,b.jsx)(g.Card,{className:"border-border bg-card",children:(0,b.jsx)(g.CardContent,{className:"p-6",children:(0,b.jsxs)("div",{className:"flex gap-6",children:[(0,b.jsxs)("div",{className:"w-72 border-l-4 border-[#F3B335] border-t border-r border-b border-border rounded-lg p-4 bg-gradient-to-b from-white to-gray-50/50 max-h-[calc(100vh-300px)] overflow-y-auto",children:[(0,b.jsxs)("h3",{className:"font-semibold text-[#013A65] mb-4 text-base flex items-center gap-2",children:[(0,b.jsx)(o.Folder,{className:"h-5 w-5 text-[#F3B335]"}),"Databox Tree"]}),E?(0,b.jsx)("div",{className:"text-center py-8 text-muted-foreground text-sm",children:"Loading folders..."}):0===at.length?(0,b.jsxs)("div",{className:"text-center py-8 text-muted-foreground text-sm",children:[(0,b.jsx)(n.FolderOpen,{className:"h-10 w-10 mx-auto mb-3 opacity-30"}),(0,b.jsx)("p",{children:"No accessible folders"})]}):(0,b.jsx)("div",{className:"space-y-1",children:at.map(a=>(0,b.jsxs)("div",{children:[(0,b.jsxs)("button",{onClick:()=>ao(a.id),className:(0,x.cn)("w-full text-left px-3 py-2.5 rounded-lg text-sm font-medium transition-all flex items-center gap-2.5","text-[#013A65] hover:bg-[#F3B335]/10 hover:text-[#013A65] border border-transparent hover:border-[#F3B335]/20"),children:[Y.has(a.id)?(0,b.jsx)(p.ChevronDown,{className:"h-4 w-4 flex-shrink-0"}):(0,b.jsx)(q.ChevronRight,{className:"h-4 w-4 flex-shrink-0"}),(0,b.jsx)(o.Folder,{className:"h-4 w-4 flex-shrink-0 text-[#F3B335]"}),(0,b.jsx)("span",{className:"truncate flex-1",children:a.title})]}),Y.has(a.id)&&a.folders&&a.folders.length>0&&(0,b.jsx)("div",{className:"mt-0.5 space-y-0.5 ml-1",children:aA(a.folders,a.allFolders,0)})]},a.id))})]}),(0,b.jsx)("div",{className:"flex-1",children:I?(0,b.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#013A65] mx-auto mb-4"}),(0,b.jsx)("p",{children:"Loading folder data..."})]}):Q?0===au.length?(0,b.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,b.jsx)(n.FolderOpen,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,b.jsx)("p",{children:"No files uploaded yet in this folder."})]}):"grid"===M?(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:au.map(a=>(0,b.jsxs)("div",{className:"border-l-4 border-[#F3B335] border-t border-r border-b border-border rounded-lg p-4 hover:shadow-md transition-all bg-white",children:[(0,b.jsx)("h4",{className:"font-semibold text-[#013A65] mb-3",children:a.userName}),(0,b.jsxs)("div",{className:"space-y-2 text-sm mb-4",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Zone:"}),(0,b.jsx)("span",{className:"font-medium text-[#013A65]",children:a.zone})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"District:"}),(0,b.jsx)("span",{className:"font-medium text-[#013A65]",children:a.district})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Town Panchayat:"}),(0,b.jsx)("span",{className:"font-medium text-[#013A65]",children:a.townPanchayat})]}),(0,b.jsxs)("div",{className:"border-t pt-2 mt-2",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Requested:"}),(0,b.jsx)("span",{className:"font-medium",children:a.requestedCount})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Uploaded:"}),(0,b.jsx)("span",{className:"font-medium text-green-600",children:a.uploadedCount})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"Pending:"}),(0,b.jsx)("span",{className:"font-medium text-orange-600",children:a.pendingCount})]})]})]}),(0,b.jsxs)(f.Button,{onClick:()=>an(a),className:"w-full bg-[#013A65] hover:bg-[#013A65]/90 text-white",size:"sm",children:[(0,b.jsx)(m.Eye,{className:"h-4 w-4 mr-2"}),"View Files"]})]},a.userId))}):(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[ay&&(0,b.jsxs)(f.Button,{onClick:az,disabled:K||0===au.length,size:"sm",className:"bg-gradient-to-r from-green-600 to-green-600/90 hover:from-green-600/90 hover:to-green-600/80 text-white",children:[(0,b.jsx)(r.Download,{className:"h-4 w-4 mr-2"}),K?"Downloading...":"Bulk File Downloads"]}),(0,b.jsxs)(f.Button,{onClick:()=>{if(0===au.length)return void i({title:"No data to export",description:"There are no records matching your current filters.",variant:"destructive"});let a=["User Name,Zone,District,Town Panchayat,Requested,Uploaded,Pending"];au.forEach(b=>{let c=[`"${b.userName}"`,`"${b.zone}"`,`"${b.district}"`,`"${b.townPanchayat}"`,b.requestedCount,b.uploadedCount,b.pendingCount];a.push(c.join(","))});let b=new Blob([a.join("\n")],{type:"text/csv;charset=utf-8;"}),c=document.createElement("a"),d=URL.createObjectURL(b);c.setAttribute("href",d),c.setAttribute("download",`smart-drive-report-${new Date().toISOString().split("T")[0]}.csv`),c.style.visibility="hidden",document.body.appendChild(c),c.click(),document.body.removeChild(c),i({title:"Excel export successful",description:`Exported ${au.length} records to CSV file.`})},disabled:0===au.length,size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",children:[(0,b.jsx)(s.FileSpreadsheet,{className:"h-4 w-4 mr-2"}),"Export Excel"]}),(0,b.jsxs)(f.Button,{onClick:()=>{0===au.length?i({title:"No data to export",description:"There are no records matching your current filters.",variant:"destructive"}):(i({title:"PDF export started",description:`Generating PDF with ${au.length} records...`}),setTimeout(()=>{i({title:"PDF export successful",description:`Exported ${au.length} records to PDF file.`})},1e3))},disabled:0===au.length,size:"sm",className:"bg-red-600 hover:bg-red-700 text-white",children:[(0,b.jsx)(t.FileText,{className:"h-4 w-4 mr-2"}),"Export PDF"]})]}),(0,b.jsx)("div",{className:"border-l-4 border-[#F3B335] border-t border-r border-b border-border rounded-lg overflow-hidden bg-white",children:(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-[#F3B335]",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"text-left px-4 py-3 text-sm font-semibold min-w-[150px] text-[#013A65]",children:"User Name"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-sm font-semibold min-w-[120px] text-[#013A65]",children:"Zone"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-sm font-semibold min-w-[120px] text-[#013A65]",children:"District"}),(0,b.jsx)("th",{className:"text-left px-4 py-3 text-sm font-semibold min-w-[150px] text-[#013A65]",children:"Town Panchayat"}),(0,b.jsx)("th",{className:"text-center px-4 py-3 text-sm font-semibold w-24 text-[#013A65]",children:"Requested"}),(0,b.jsx)("th",{className:"text-center px-4 py-3 text-sm font-semibold w-24 text-[#013A65]",children:"Uploaded"}),(0,b.jsx)("th",{className:"text-center px-4 py-3 text-sm font-semibold w-24 text-[#013A65]",children:"Pending"}),(0,b.jsx)("th",{className:"text-center px-4 py-3 text-sm font-semibold w-28 text-[#013A65]",children:"Actions"})]})}),(0,b.jsx)("tbody",{children:au.map((a,c)=>(0,b.jsxs)("tr",{className:(0,x.cn)("border-b border-gray-100 hover:bg-[#F3B335]/5 transition-colors",c%2==0?"bg-white":"bg-gray-50/50"),children:[(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-[#013A65] font-medium",children:(0,b.jsx)("div",{className:"truncate max-w-[200px]",title:a.userName,children:a.userName})}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:(0,b.jsx)("div",{className:"truncate max-w-[120px]",title:a.zone,children:a.zone})}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:(0,b.jsx)("div",{className:"truncate max-w-[120px]",title:a.district,children:a.district})}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-muted-foreground",children:(0,b.jsx)("div",{className:"truncate max-w-[150px]",title:a.townPanchayat,children:a.townPanchayat})}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-center font-medium",children:a.requestedCount}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-center font-medium text-green-600",children:a.uploadedCount}),(0,b.jsx)("td",{className:"px-4 py-3 text-sm text-center font-medium text-orange-600",children:a.pendingCount}),(0,b.jsx)("td",{className:"px-4 py-3 text-center",children:(0,b.jsxs)(f.Button,{variant:"ghost",size:"sm",onClick:()=>an(a),className:"text-[#013A65] hover:bg-[#013A65]/10",children:[(0,b.jsx)(m.Eye,{className:"h-4 w-4 mr-1"}),"View"]})})]},a.userId))})]})})})]}):(0,b.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,b.jsx)(n.FolderOpen,{className:"h-16 w-16 mx-auto mb-4 opacity-30 text-[#013A65]"}),(0,b.jsx)("p",{className:"text-lg font-medium text-[#013A65] mb-2",children:"Select a Folder"}),(0,b.jsx)("p",{className:"text-sm",children:"Choose a folder from the tree to view uploaded files"})]})})]})})})]}),(0,b.jsx)(D,{open:S,onOpenChange:T,folders:z,onUploadComplete:()=>{Q&&am(Q)}}),(0,b.jsx)(F,{open:W,onOpenChange:X,userSummary:U,onFileDeleted:()=>{Q&&am(Q)}})]})})}a.s(["default",()=>H],48775)}];

//# sourceMappingURL=projects_TITTAM_tittam_fe_app_dashboard_drive_page_tsx_9b690e6d._.js.map