(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59377,e=>{"use strict";let t=(0,e.i(80329).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],59377)},43870,e=>{"use strict";let t=(0,e.i(80329).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],43870)},20648,e=>{"use strict";var t=e.i(50038);e.s(["X",()=>t.default])},86541,e=>{"use strict";var t=e.i(45042),s=e.i(97817),r=e.i(49572),a=s.forwardRef((e,s)=>(0,t.jsx)(r.Primitive.label,{...e,ref:s,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));a.displayName="Label";var i=e.i(18846);function n({className:e,...s}){return(0,t.jsx)(a,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}e.s(["Label",()=>n],86541)},1508,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},95876,e=>{"use strict";var t=e.i(45042),s=e.i(18846);function r({className:e,type:r,...a}){return(0,t.jsx)("input",{type:r,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...a})}e.s(["Input",()=>r])},31737,e=>{"use strict";var t=e.i(45042),s=e.i(47937),r=e.i(48592),a=e.i(18846);function i({...e}){return(0,t.jsx)(s.Root,{"data-slot":"dialog",...e})}function n({...e}){return(0,t.jsx)(s.Portal,{"data-slot":"dialog-portal",...e})}function d({className:e,...r}){return(0,t.jsx)(s.Overlay,{"data-slot":"dialog-overlay",className:(0,a.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...r})}function l({className:e,children:i,showCloseButton:l=!0,...o}){return(0,t.jsxs)(n,{"data-slot":"dialog-portal",children:[(0,t.jsx)(d,{}),(0,t.jsxs)(s.Content,{"data-slot":"dialog-content",className:(0,a.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...o,children:[i,l&&(0,t.jsxs)(s.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(r.XIcon,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function o({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,a.cn)("flex flex-col gap-2 text-center sm:text-left",e),...s})}function c({className:e,...s}){return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,a.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...s})}function h({className:e,...r}){return(0,t.jsx)(s.Title,{"data-slot":"dialog-title",className:(0,a.cn)("text-lg leading-none font-semibold",e),...r})}function m({className:e,...r}){return(0,t.jsx)(s.Description,{"data-slot":"dialog-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...r})}e.s(["Dialog",()=>i,"DialogContent",()=>l,"DialogDescription",()=>m,"DialogFooter",()=>c,"DialogHeader",()=>o,"DialogTitle",()=>h])},53183,e=>{"use strict";let t=(0,e.i(80329).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],53183)},44073,e=>{"use strict";var t=e.i(45042),s=e.i(18846);function r({className:e,...r}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,s.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...r})}e.s(["Textarea",()=>r])},65218,e=>{"use strict";var t=e.i(97817);let s=0,r=new Map,a=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},i=[],n={toasts:[]};function d(e){n=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?a(s):e.toasts.forEach(e=>{a(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(n,e),i.forEach(e=>{e(n)})}function l({...e}){let t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function o(){let[e,s]=t.useState(n);return t.useEffect(()=>(i.push(s),()=>{let e=i.indexOf(s);e>-1&&i.splice(e,1)}),[e]),{...e,toast:l,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}e.s(["toast",()=>l,"useToast",()=>o])},55010,e=>{"use strict";let t=(0,e.i(80329).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>t],55010)},76196,e=>{"use strict";let t=[{id:"work_1",name:"Work Name",dataType:"text",source:"work",required:!0,order:1},{id:"work_2",name:"Work Code",dataType:"text",source:"work",required:!0,order:2},{id:"work_3",name:"Estimate Amount",dataType:"number",source:"work",required:!0,order:3},{id:"work_4",name:"Contractor Name",dataType:"text",source:"work",required:!1,order:4},{id:"work_5",name:"Start Date",dataType:"date",source:"work",required:!1,order:5},{id:"work_6",name:"Completion Date",dataType:"date",source:"work",required:!1,order:6},{id:"work_7",name:"Status",dataType:"dropdown",source:"work",options:["Not Started","In Progress","Completed"],required:!0,order:7}],s=[{id:"info_1",name:"Zone",dataType:"text",source:"infohub",required:!0,order:1},{id:"info_2",name:"District",dataType:"text",source:"infohub",required:!0,order:2},{id:"info_3",name:"Town Panchayat",dataType:"text",source:"infohub",required:!0,order:3},{id:"info_4",name:"Total Population",dataType:"number",source:"infohub",required:!1,order:4},{id:"info_5",name:"Total Area (Sq mt)",dataType:"number",source:"infohub",required:!1,order:5},{id:"info_6",name:"No of Wards",dataType:"number",source:"infohub",required:!1,order:6},{id:"info_7",name:"Assembly",dataType:"text",source:"infohub",required:!1,order:7}],r=[{id:"1",name:"Road Construction Progress",description:"Track progress of road construction works",type:"scheme",scheme:"Road Development",component:"Rural Roads",year:"2024",schemeName:"Road Development",componentName:"Rural Roads",fields:[t[0],t[2],t[6],s[0],s[1]],isShared:!0,isFrozen:!1,createdBy:"admin",createdAt:"2024-01-15",sharedWith:["user1","user2","user3"],order:1,sectionName:"Infrastructure Projects"},{id:"2",name:"Water Supply Survey",description:"General survey for water supply projects",type:"general",fields:[{id:"custom_1",name:"Survey Location",dataType:"text",source:"custom",required:!0,order:1},{id:"custom_2",name:"Water Source Available",dataType:"boolean",source:"custom",required:!0,order:2},{id:"custom_3",name:"Distance from Main Line (m)",dataType:"number",source:"custom",required:!1,order:3}],isShared:!0,isFrozen:!0,createdBy:"admin",createdAt:"2024-01-10",sharedWith:["user1","user2"],order:2,sectionName:"Survey Forms"}],a=[{id:"1",name:"Road Project Template",description:"Standard template for road construction projects",type:"scheme",sheets:[{name:"Project Overview",fields:[t[0],t[1],t[2]],scheme:"Road Development",component:"Rural Roads",year:"2024"},{name:"Location Details",fields:[s[0],s[1],s[2]],scheme:"Road Development",component:"Rural Roads",year:"2024"}],createdBy:"admin",createdAt:"2024-01-01"}],i=[{id:"1",sheetId:"1",data:{work_1:"NH Road Construction",work_2:"Completed",info_1:"North Chennai",info_2:"Tiruvallur"},submittedBy:"user1",submittedAt:"2024-01-20",status:"submitted"}],n=new class{async getSmartSheets(){return[...r].sort((e,t)=>e.order-t.order)}async getSharedSheets(e){return r.filter(t=>t.isShared&&(t.sharedWith.includes(e)||t.createdBy===e))}async getWorkFields(e,s,r){return[...t]}async getInfoHubFields(){return[...s]}async createSmartSheet(e){let t={...e,id:Date.now().toString(),createdAt:new Date().toISOString().split("T")[0],order:r.length+1};return r.push(t),t}async updateSmartSheet(e,t){let s=r.findIndex(t=>t.id===e);if(-1===s)throw Error("Sheet not found");return r[s]={...r[s],...t},r[s]}async deleteSmartSheet(e){r=r.filter(t=>t.id!==e)}async reorderSheets(e){r=e.map((e,t)=>{let s=r.find(t=>t.id===e);return s?{...s,order:t+1}:null}).filter(Boolean)}async shareSheet(e,t){return this.updateSmartSheet(e,{isShared:!0,sharedWith:t})}async freezeSheet(e){return this.updateSmartSheet(e,{isFrozen:!0})}async unfreezeSheet(e){return this.updateSmartSheet(e,{isFrozen:!1})}async submitSheetData(e){let t={...e,id:Date.now().toString(),submittedAt:new Date().toISOString()};return i.push(t),t}async getSheetDataEntries(e){return i.filter(t=>t.sheetId===e)}async getUpdateTracking(e){let t=r.find(t=>t.id===e);if(!t)throw Error("Sheet not found");let s=i.filter(t=>t.sheetId===e&&"submitted"===t.status),a=new Set(s.map(e=>e.submittedBy)),n=Array.from(a).map(e=>({userId:e,userName:`User ${e}`,updatedAt:s.find(t=>t.submittedBy===e)?.submittedAt||""})),d=t.sharedWith.filter(e=>!a.has(e)).map(e=>({userId:e,userName:`User ${e}`}));return{sheetId:t.id,sheetName:t.name,totalShared:t.sharedWith.length,updated:n,notUpdated:d}}async getSchemes(){return["Road Development","Water Supply","Sanitation","Housing"]}async getComponents(e){return({"Road Development":["Rural Roads","Urban Roads","Highways"],"Water Supply":["Pipeline","Storage Tank","Treatment Plant"],Sanitation:["Drainage","Sewage Treatment","Solid Waste"],Housing:["Individual Housing","Apartment Complex","Slum Rehabilitation"]})[e]||[]}async getYears(){let e=new Date().getFullYear();return Array.from({length:5},(t,s)=>(e-s).toString())}async getSections(){return Array.from(new Set(r.filter(e=>e.sectionName).map(e=>e.sectionName)))}async getSheetsBySection(e){return r.filter(t=>t.sectionName===e).sort((e,t)=>e.order-t.order)}async getTemplates(){return[...a]}async createTemplate(e){let t={...e,id:Date.now().toString(),createdAt:new Date().toISOString().split("T")[0]};return a.push(t),t}async loadTemplate(e){let t=a.find(t=>t.id===e);if(!t)throw Error("Template not found");return t}async deleteTemplate(e){a=a.filter(t=>t.id!==e)}};e.s(["smartSheetService",0,n])},71137,e=>{"use strict";let t=(0,e.i(80329).default)("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);e.s(["GripVertical",()=>t],71137)},89577,e=>{"use strict";let t=(0,e.i(80329).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],89577)},71891,e=>{"use strict";var t=e.i(45042),s=e.i(97817),r=e.i(71429),a=e.i(53790),i=e.i(53183),n=e.i(71137),d=e.i(43870),l=e.i(59377),o=e.i(80329);let c=(0,o.default)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),h=(0,o.default)("LockOpen",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]);var m=e.i(55010);let u=(0,o.default)("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),x=(0,o.default)("Sheet",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"9",y2:"21",key:"1ib60c"}],["line",{x1:"15",x2:"15",y1:"9",y2:"21",key:"1n26ft"}]]);var p=e.i(76196),g=e.i(31737),f=e.i(95876),y=e.i(86541),v=e.i(44073),b=e.i(75987),j=e.i(65218),S=e.i(20648);function N({open:e,onOpenChange:r,sheet:d,onSuccess:l}){let[o,c]=(0,s.useState)(""),[h,m]=(0,s.useState)(""),[u,x]=(0,s.useState)("scheme"),[N,w]=(0,s.useState)(""),[k,E]=(0,s.useState)(""),[T,F]=(0,s.useState)(""),[A,C]=(0,s.useState)(""),[D,I]=(0,s.useState)([]),[z,B]=(0,s.useState)([]),[_,P]=(0,s.useState)([]),[O,R]=(0,s.useState)([]),[M,V]=(0,s.useState)([]),[q,L]=(0,s.useState)([]),[W,U]=(0,s.useState)(!1),[H,G]=(0,s.useState)(""),[$,X]=(0,s.useState)("text"),[Y,K]=(0,s.useState)([]),{toast:Z}=(0,j.useToast)();(0,s.useEffect)(()=>{e&&(J(),d?(c(d.name),m(d.description),x(d.type),w(d.scheme||""),E(d.component||""),F(d.year||""),C(d.sectionName||""),I(d.fields),K(d.sharedWith)):et())},[e,d]),(0,s.useEffect)(()=>{"scheme"===u&&N&&k&&T&&ee()},[u,N,k,T]),(0,s.useEffect)(()=>{N&&Q()},[N]);let J=async()=>{let[e,t,s]=await Promise.all([p.smartSheetService.getSchemes(),p.smartSheetService.getYears(),p.smartSheetService.getInfoHubFields()]);R(e),L(t),P(s)},Q=async()=>{V(await p.smartSheetService.getComponents(N))},ee=async()=>{B(await p.smartSheetService.getWorkFields(N,k,T))},et=()=>{c(""),m(""),x("scheme"),w(""),E(""),F(""),C(""),I([]),K([]),U(!1),G(""),X("text")},es=e=>{D.find(t=>t.id===e.id)?Z({title:"Info",description:"Field already added"}):I([...D,{...e,order:D.length+1}])},er=async()=>{if(!o.trim())return void Z({title:"Error",description:"Please enter sheet name",variant:"destructive"});if("scheme"===u&&(!N||!k||!T))return void Z({title:"Error",description:"Please select scheme, component, and year",variant:"destructive"});if(0===D.length)return void Z({title:"Error",description:"Please add at least one field",variant:"destructive"});if(!A.trim())return void Z({title:"Error",description:"Please enter section name",variant:"destructive"});try{let e={name:o,description:h,type:u,scheme:"scheme"===u?N:void 0,component:"scheme"===u?k:void 0,year:"scheme"===u?T:void 0,schemeName:"scheme"===u?N:void 0,componentName:"scheme"===u?k:void 0,fields:D,isShared:!1,isFrozen:!1,createdBy:"admin",sharedWith:Y,sectionName:A};d?(await p.smartSheetService.updateSmartSheet(d.id,e),Z({title:"Success",description:"Sheet updated successfully"})):(await p.smartSheetService.createSmartSheet(e),Z({title:"Success",description:"Sheet created successfully"})),l(),r(!1)}catch(e){Z({title:"Error",description:"Failed to save sheet",variant:"destructive"})}};return(0,t.jsx)(g.Dialog,{open:e,onOpenChange:r,children:(0,t.jsxs)(g.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(g.DialogHeader,{children:(0,t.jsx)(g.DialogTitle,{className:"text-[#013A65]",children:d?"Edit Sheet":"Create New Sheet"})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(y.Label,{children:"Sheet Name *"}),(0,t.jsx)(f.Input,{value:o,onChange:e=>c(e.target.value),placeholder:"Enter sheet name"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(y.Label,{children:"Type *"}),(0,t.jsxs)(b.Select,{value:u,onValueChange:e=>x(e),children:[(0,t.jsx)(b.SelectTrigger,{children:(0,t.jsx)(b.SelectValue,{})}),(0,t.jsxs)(b.SelectContent,{children:[(0,t.jsx)(b.SelectItem,{value:"scheme",children:"Scheme"}),(0,t.jsx)(b.SelectItem,{value:"general",children:"General"})]})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(y.Label,{children:"Description"}),(0,t.jsx)(v.Textarea,{value:h,onChange:e=>m(e.target.value),placeholder:"Enter sheet description",rows:2})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(y.Label,{children:"Section Name *"}),(0,t.jsx)(f.Input,{value:A,onChange:e=>C(e.target.value),placeholder:"Enter section name (e.g., Infrastructure Projects, Survey Forms)"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Sheets with the same section name will be grouped together"})]}),"scheme"===u&&(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(y.Label,{children:"Scheme *"}),(0,t.jsxs)(b.Select,{value:N,onValueChange:w,children:[(0,t.jsx)(b.SelectTrigger,{children:(0,t.jsx)(b.SelectValue,{placeholder:"Select scheme"})}),(0,t.jsx)(b.SelectContent,{children:O.map(e=>(0,t.jsx)(b.SelectItem,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(y.Label,{children:"Component *"}),(0,t.jsxs)(b.Select,{value:k,onValueChange:E,disabled:!N,children:[(0,t.jsx)(b.SelectTrigger,{children:(0,t.jsx)(b.SelectValue,{placeholder:"Select component"})}),(0,t.jsx)(b.SelectContent,{children:M.map(e=>(0,t.jsx)(b.SelectItem,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(y.Label,{children:"Year *"}),(0,t.jsxs)(b.Select,{value:T,onValueChange:F,children:[(0,t.jsx)(b.SelectTrigger,{children:(0,t.jsx)(b.SelectValue,{placeholder:"Select year"})}),(0,t.jsx)(b.SelectContent,{children:q.map(e=>(0,t.jsx)(b.SelectItem,{value:e,children:e},e))})]})]})]}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-[#013A65] mb-3",children:"Add Fields"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:["scheme"===u&&z.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsx)(y.Label,{className:"mb-2 block",children:"Work Fields"}),(0,t.jsx)("div",{className:"border rounded-lg p-3 max-h-40 overflow-y-auto space-y-2",children:z.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded cursor-pointer",onClick:()=>es(e),children:[(0,t.jsx)("span",{className:"text-sm",children:e.name}),(0,t.jsx)(i.Plus,{className:"h-4 w-4 text-[#F3B335]"})]},e.id))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(y.Label,{className:"mb-2 block",children:"Info Hub Fields"}),(0,t.jsx)("div",{className:"border rounded-lg p-3 max-h-40 overflow-y-auto space-y-2",children:_.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded cursor-pointer",onClick:()=>es(e),children:[(0,t.jsx)("span",{className:"text-sm",children:e.name}),(0,t.jsx)(i.Plus,{className:"h-4 w-4 text-[#F3B335]"})]},e.id))})]})]}),W?(0,t.jsxs)("div",{className:"border rounded-lg p-3 space-y-3",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)(f.Input,{placeholder:"Field name",value:H,onChange:e=>G(e.target.value)}),(0,t.jsxs)(b.Select,{value:$,onValueChange:e=>X(e),children:[(0,t.jsx)(b.SelectTrigger,{children:(0,t.jsx)(b.SelectValue,{})}),(0,t.jsxs)(b.SelectContent,{children:[(0,t.jsx)(b.SelectItem,{value:"text",children:"Text"}),(0,t.jsx)(b.SelectItem,{value:"number",children:"Number"}),(0,t.jsx)(b.SelectItem,{value:"date",children:"Date"}),(0,t.jsx)(b.SelectItem,{value:"dropdown",children:"Dropdown"}),(0,t.jsx)(b.SelectItem,{value:"boolean",children:"Yes/No"})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(a.Button,{onClick:()=>{if(!H.trim())return void Z({title:"Error",description:"Please enter field name",variant:"destructive"});let e={id:`custom_${Date.now()}`,name:H,dataType:$,source:"custom",required:!1,order:D.length+1};I([...D,e]),G(""),X("text"),U(!1)},size:"sm",className:"bg-[#F3B335] hover:bg-[#F3B335]/90 text-[#013A65]",children:"Add Field"}),(0,t.jsx)(a.Button,{onClick:()=>U(!1),size:"sm",variant:"outline",children:"Cancel"})]})]}):(0,t.jsxs)(a.Button,{variant:"outline",onClick:()=>U(!0),className:"w-full border-dashed",children:[(0,t.jsx)(i.Plus,{className:"h-4 w-4 mr-2"}),"Add Custom Field"]})]}),D.length>0&&(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsxs)("h3",{className:"font-semibold text-[#013A65] mb-3",children:["Selected Fields (",D.length,")"]}),(0,t.jsx)("div",{className:"space-y-2",children:D.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)(n.GripVertical,{className:"h-4 w-4 text-gray-400"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:e.name}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:[e.dataType," â€¢ ",e.source]})]}),(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",onClick:()=>{var t;return t=e.id,void I(D.filter(e=>e.id!==t))},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,t.jsx)(S.X,{className:"h-4 w-4"})})]},e.id))})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4 border-t",children:[(0,t.jsx)(a.Button,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),(0,t.jsx)(a.Button,{onClick:er,className:"bg-gradient-to-r from-[#013A65] to-[#013A65]/90 hover:from-[#013A65]/90 hover:to-[#013A65]/80",children:d?"Update Sheet":"Add Sheet"})]})]})]})})}var w=e.i(89577);let k=(0,o.default)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function E({open:e,onOpenChange:r,sheetId:a}){let[i,n]=(0,s.useState)(null),[d,l]=(0,s.useState)(!1);(0,s.useEffect)(()=>{e&&a&&o()},[e,a]);let o=async()=>{try{l(!0);let e=await p.smartSheetService.getUpdateTracking(a);n(e)}catch(e){console.error("Failed to load tracking data:",e)}finally{l(!1)}};return(0,t.jsx)(g.Dialog,{open:e,onOpenChange:r,children:(0,t.jsxs)(g.DialogContent,{className:"max-w-2xl",children:[(0,t.jsx)(g.DialogHeader,{children:(0,t.jsx)(g.DialogTitle,{className:"text-[#013A65]",children:"Update Tracking"})}),d?(0,t.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading tracking data..."}):i?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-semibold text-[#013A65] mb-2",children:i.sheetName}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Total Shared: ",i.totalShared," users"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(w.CheckCircle2,{className:"h-5 w-5 text-green-600"}),(0,t.jsxs)("h4",{className:"font-semibold text-green-600",children:["Updated (",i.updated.length,")"]})]}),0===i.updated.length?(0,t.jsx)("p",{className:"text-sm text-gray-500 ml-7",children:"No users have updated yet"}):(0,t.jsx)("div",{className:"space-y-2 ml-7",children:i.updated.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-2 bg-green-50 rounded",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:e.userName}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.updatedAt).toLocaleString()})]},e.userId))})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)(k,{className:"h-5 w-5 text-red-600"}),(0,t.jsxs)("h4",{className:"font-semibold text-red-600",children:["Not Updated (",i.notUpdated.length,")"]})]}),0===i.notUpdated.length?(0,t.jsx)("p",{className:"text-sm text-gray-500 ml-7",children:"All users have updated"}):(0,t.jsx)("div",{className:"space-y-2 ml-7",children:i.notUpdated.map(e=>(0,t.jsx)("div",{className:"flex items-center p-2 bg-red-50 rounded",children:(0,t.jsx)("span",{className:"text-sm font-medium",children:e.userName})},e.userId))})]})]}):null]})})}function T(){let e,o,[g,f]=(0,s.useState)([]),[y,v]=(0,s.useState)(!0),[S,w]=(0,s.useState)(!1),[k,T]=(0,s.useState)(null),[F,A]=(0,s.useState)(!1),[C,D]=(0,s.useState)(""),[I,z]=(0,s.useState)(null),[B,_]=(0,s.useState)("table"),[P,O]=(0,s.useState)(""),[R,M]=(0,s.useState)([]),[V,q]=(0,s.useState)(""),{toast:L}=(0,j.useToast)();(0,s.useEffect)(()=>{W(),U()},[]);let W=async()=>{try{var e;v(!0);let t=await p.smartSheetService.getSmartSheets();f(t),t.length>0&&!V&&(e=t[0].id,q(e))}catch(e){L({title:"Error",description:"Failed to load smart sheets",variant:"destructive"})}finally{v(!1)}},U=async()=>{try{let e=await p.smartSheetService.getSections();M(e),e.length>0&&!P&&O(e[0])}catch(e){console.error("Failed to load sections",e)}},H=async e=>{if(confirm("Are you sure you want to delete this sheet?"))try{await p.smartSheetService.deleteSmartSheet(e),L({title:"Success",description:"Sheet deleted successfully"}),W(),U()}catch(e){L({title:"Error",description:"Failed to delete sheet",variant:"destructive"})}},G=async(e,t)=>{try{t?(await p.smartSheetService.unfreezeSheet(e),L({title:"Success",description:"Sheet unfrozen successfully"})):(await p.smartSheetService.freezeSheet(e),L({title:"Success",description:"Sheet frozen successfully"})),W()}catch(e){L({title:"Error",description:"Failed to update sheet",variant:"destructive"})}},$=async()=>{if(null!==I)try{let e=g.map(e=>e.id);await p.smartSheetService.reorderSheets(e),L({title:"Success",description:"Sheet order updated"})}catch(e){L({title:"Error",description:"Failed to reorder sheets",variant:"destructive"}),W()}finally{z(null)}};return g.find(e=>e.id===V),(0,t.jsxs)(r.DashboardLayout,{children:[(0,t.jsxs)("div",{className:"flex-1 overflow-auto bg-[#F8F8F8]",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-[#013A65] to-[#013A65]/90 text-white p-6 rounded-lg shadow-md mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Smart Sheet Management"}),(0,t.jsx)("p",{className:"text-white/80 mt-1",children:"Create and manage smart sheets for data collection"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-white/10 rounded-lg p-1",children:[(0,t.jsxs)(a.Button,{variant:"table"===B?"default":"ghost",size:"sm",onClick:()=>_("table"),className:"table"===B?"bg-white text-[#013A65] hover:bg-white/90":"text-white hover:bg-white/10",children:[(0,t.jsx)(u,{className:"h-4 w-4 mr-2"}),"Table View"]}),(0,t.jsxs)(a.Button,{variant:"sheet"===B?"default":"ghost",size:"sm",onClick:()=>_("sheet"),className:"sheet"===B?"bg-white text-[#013A65] hover:bg-white/90":"text-white hover:bg-white/10",children:[(0,t.jsx)(x,{className:"h-4 w-4 mr-2"}),"Sheet View"]})]}),(0,t.jsxs)(a.Button,{onClick:()=>{T(null),w(!0)},className:"bg-gradient-to-r from-[#F3B335] to-[#F3B335]/90 hover:from-[#F3B335]/90 hover:to-[#F3B335]/80 text-[#013A65] font-semibold",children:[(0,t.jsx)(i.Plus,{className:"h-4 w-4 mr-2"}),"Create Sheet"]})]})]}),"sheet"===B&&R.length>0&&(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-3",children:[(0,t.jsx)("label",{className:"text-white font-medium",children:"Select Section:"}),(0,t.jsxs)(b.Select,{value:P,onValueChange:O,children:[(0,t.jsx)(b.SelectTrigger,{className:"w-[300px] bg-white text-[#013A65]",children:(0,t.jsx)(b.SelectValue,{placeholder:"Select a section"})}),(0,t.jsx)(b.SelectContent,{children:R.map(e=>(0,t.jsx)(b.SelectItem,{value:e,children:e},e))})]})]})]}),"table"===B?(0,t.jsx)("div",{className:"bg-white rounded-lg border border-[#EDEEF0] shadow-sm",children:y?(0,t.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Loading sheets..."}):0===g.length?(0,t.jsx)("div",{className:"p-8 text-center text-gray-500",children:'No sheets created yet. Click "Create Sheet" to get started.'}):(0,t.jsx)("div",{className:"divide-y divide-[#EDEEF0]",children:g.map((e,s)=>(0,t.jsx)("div",{draggable:!0,onDragStart:()=>{z(s)},onDragOver:e=>((e,t)=>{if(e.preventDefault(),null===I||I===t)return;let s=[...g],r=s[I];s.splice(I,1),s.splice(t,0,r),f(s),z(t)})(e,s),onDragEnd:$,className:"p-4 hover:bg-[#F8F8F8]/50 transition-colors cursor-move",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsx)(n.GripVertical,{className:"h-5 w-5 text-gray-400 mt-1 flex-shrink-0"}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-[#013A65] mb-1",children:e.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 text-sm",children:[(0,t.jsx)("span",{className:"px-2 py-1 bg-[#013A65]/10 text-[#013A65] rounded",children:"scheme"===e.type?"Scheme":"General"}),"scheme"===e.type&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded",children:e.scheme}),(0,t.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded",children:e.component}),(0,t.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded",children:e.year})]}),(0,t.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 rounded",children:[e.fields.length," fields"]}),e.isShared&&(0,t.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded",children:"Shared"}),e.isFrozen&&(0,t.jsx)("span",{className:"px-2 py-1 bg-red-100 text-red-700 rounded",children:"Frozen"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.isShared&&(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",onClick:()=>{D(e.id),A(!0)},className:"text-[#013A65] hover:text-[#013A65] hover:bg-[#013A65]/10",children:(0,t.jsx)(m.Eye,{className:"h-4 w-4"})}),(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",onClick:()=>G(e.id,e.isFrozen),className:"text-[#013A65] hover:text-[#013A65] hover:bg-[#013A65]/10",children:e.isFrozen?(0,t.jsx)(h,{className:"h-4 w-4"}):(0,t.jsx)(c,{className:"h-4 w-4"})}),(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",onClick:()=>{T(e),w(!0)},disabled:e.isFrozen,className:"text-[#013A65] hover:text-[#013A65] hover:bg-[#013A65]/10",children:(0,t.jsx)(d.Edit,{className:"h-4 w-4"})}),(0,t.jsx)(a.Button,{variant:"ghost",size:"sm",onClick:()=>H(e.id),className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,t.jsx)(l.Trash2,{className:"h-4 w-4"})})]})]})})]})},e.id))})}):(o=(e=g.filter(e=>e.sectionName===P)).find(e=>e.id===V)||e[0],P&&0!==R.length?o?(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-[#EDEEF0] shadow-sm overflow-hidden",children:[(0,t.jsx)("div",{className:"border-b border-[#EDEEF0] bg-[#F8F8F8] px-4 py-2 flex items-center gap-2 overflow-x-auto",children:e.map(e=>(0,t.jsx)("button",{onClick:()=>q(e.id),className:`px-4 py-2 rounded-t-lg font-medium text-sm whitespace-nowrap transition-colors ${V===e.id?"bg-white text-[#013A65] border-t-2 border-[#F3B335]":"text-gray-600 hover:bg-white/50"}`,children:e.name},e.id))}),(0,t.jsxs)("div",{className:"p-4 border-b border-[#EDEEF0] bg-gradient-to-r from-[#F8F8F8] to-[#EDEEF0]",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-[#013A65]",children:o.name}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:o.description}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-2 text-sm",children:"scheme"===o.type&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{className:"px-2 py-1 bg-white text-gray-700 rounded border border-[#EDEEF0]",children:o.schemeName}),(0,t.jsx)("span",{className:"px-2 py-1 bg-white text-gray-700 rounded border border-[#EDEEF0]",children:o.componentName}),(0,t.jsx)("span",{className:"px-2 py-1 bg-white text-gray-700 rounded border border-[#EDEEF0]",children:o.year})]})})]}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"bg-[#F3B335]",children:[(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-[#013A65] border-r border-[#F3B335]/20 w-16",children:"#"}),o.fields.map(e=>(0,t.jsx)("th",{className:"px-4 py-3 text-left text-sm font-semibold text-[#013A65] border-r border-[#F3B335]/20 min-w-[150px]",children:(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{children:e.name}),(0,t.jsx)("div",{className:"text-xs font-normal text-[#013A65]/70 mt-0.5",children:"work"===e.source?"Work Field":"infohub"===e.source?"Info Hub":`Custom (${e.dataType})`})]})},e.id))]})}),(0,t.jsx)("tbody",{children:[1,2,3,4,5].map(e=>(0,t.jsxs)("tr",{className:"border-b border-[#EDEEF0] hover:bg-[#F8F8F8]/50",children:[(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-600 border-r border-[#EDEEF0] font-medium",children:e}),o.fields.map(e=>(0,t.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700 border-r border-[#EDEEF0]",children:(0,t.jsx)("input",{type:"number"===e.dataType?"number":"date"===e.dataType?"date":"text",className:"w-full px-2 py-1 border border-transparent hover:border-[#EDEEF0] focus:border-[#013A65] focus:outline-none rounded",placeholder:`Enter ${e.name.toLowerCase()}`})},e.id))]},e))})]})}),(0,t.jsx)("div",{className:"p-4 border-t border-[#EDEEF0] bg-[#F8F8F8]",children:(0,t.jsxs)(a.Button,{variant:"outline",size:"sm",className:"text-[#013A65] border-[#013A65] hover:bg-[#013A65] hover:text-white bg-transparent",children:[(0,t.jsx)(i.Plus,{className:"h-4 w-4 mr-2"}),"Add Row"]})})]}):(0,t.jsx)("div",{className:"bg-white rounded-lg border border-[#EDEEF0] shadow-sm p-8 text-center text-gray-500",children:"No sheets in this section. Create sheets for this section to view them here."}):(0,t.jsx)("div",{className:"bg-white rounded-lg border border-[#EDEEF0] shadow-sm p-8 text-center text-gray-500",children:"No sections available. Create sheets with section names to view them here."}))]}),(0,t.jsx)(N,{open:S,onOpenChange:w,sheet:k,onSuccess:()=>{W(),U()}}),(0,t.jsx)(E,{open:F,onOpenChange:A,sheetId:C})]})}e.s(["default",()=>T],71891)}]);