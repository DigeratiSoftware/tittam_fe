(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59377,e=>{"use strict";let t=(0,e.i(80329).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],59377)},45634,e=>{"use strict";var t=e.i(45042),a=e.i(97817),s=e.i(69194),r=e.i(74536),i=e.i(47206),l=e.i(73261),n=e.i(36640),d=e.i(93474),o=e.i(48298),c=e.i(49572),u="Checkbox",[h,m]=(0,r.createContextScope)(u),[f,x]=h(u),p=a.forwardRef((e,r)=>{let{__scopeCheckbox:n,name:d,checked:o,defaultChecked:u,required:h,disabled:m,value:x="on",onCheckedChange:p,form:g,...v}=e,[S,N]=a.useState(null),w=(0,s.useComposedRefs)(r,e=>N(e)),F=a.useRef(!1),C=!S||g||!!S.closest("form"),[A=!1,D]=(0,l.useControllableState)({prop:o,defaultProp:u,onChange:p}),T=a.useRef(A);return a.useEffect(()=>{let e=S?.form;if(e){let t=()=>D(T.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[S,D]),(0,t.jsxs)(f,{scope:n,state:A,disabled:m,children:[(0,t.jsx)(c.Primitive.button,{type:"button",role:"checkbox","aria-checked":y(A)?"mixed":A,"aria-required":h,"data-state":j(A),"data-disabled":m?"":void 0,disabled:m,value:x,...v,ref:w,onKeyDown:(0,i.composeEventHandlers)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.composeEventHandlers)(e.onClick,e=>{D(e=>!!y(e)||!e),C&&(F.current=e.isPropagationStopped(),F.current||e.stopPropagation())})}),C&&(0,t.jsx)(b,{control:S,bubbles:!F.current,name:d,value:x,checked:A,required:h,disabled:m,form:g,style:{transform:"translateX(-100%)"},defaultChecked:!y(u)&&u})]})});p.displayName=u;var g="CheckboxIndicator",v=a.forwardRef((e,a)=>{let{__scopeCheckbox:s,forceMount:r,...i}=e,l=x(g,s);return(0,t.jsx)(o.Presence,{present:r||y(l.state)||!0===l.state,children:(0,t.jsx)(c.Primitive.span,{"data-state":j(l.state),"data-disabled":l.disabled?"":void 0,...i,ref:a,style:{pointerEvents:"none",...e.style}})})});v.displayName=g;var b=e=>{let{control:s,checked:r,bubbles:i=!0,defaultChecked:l,...o}=e,c=a.useRef(null),u=(0,n.usePrevious)(r),h=(0,d.useSize)(s);a.useEffect(()=>{let e=c.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(u!==r&&t){let a=new Event("click",{bubbles:i});e.indeterminate=y(r),t.call(e,!y(r)&&r),e.dispatchEvent(a)}},[u,r,i]);let m=a.useRef(!y(r)&&r);return(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:l??m.current,...o,tabIndex:-1,ref:c,style:{...e.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function y(e){return"indeterminate"===e}function j(e){return y(e)?"indeterminate":e?"checked":"unchecked"}var S=e.i(48583),N=e.i(18846);function w({className:e,...a}){return(0,t.jsx)(p,{"data-slot":"checkbox",className:(0,N.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...a,children:(0,t.jsx)(v,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,t.jsx)(S.CheckIcon,{className:"size-3.5"})})})}e.s(["Checkbox",()=>w],45634)},43870,e=>{"use strict";let t=(0,e.i(80329).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],43870)},86541,e=>{"use strict";var t=e.i(45042),a=e.i(97817),s=e.i(49572),r=a.forwardRef((e,a)=>(0,t.jsx)(s.Primitive.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));r.displayName="Label";var i=e.i(18846);function l({className:e,...a}){return(0,t.jsx)(r,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}e.s(["Label",()=>l],86541)},1508,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return s}});let s=e=>{}},95876,e=>{"use strict";var t=e.i(45042),a=e.i(18846);function s({className:e,type:s,...r}){return(0,t.jsx)("input",{type:s,"data-slot":"input",className:(0,a.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...r})}e.s(["Input",()=>s])},31737,e=>{"use strict";var t=e.i(45042),a=e.i(47937),s=e.i(48592),r=e.i(18846);function i({...e}){return(0,t.jsx)(a.Root,{"data-slot":"dialog",...e})}function l({...e}){return(0,t.jsx)(a.Portal,{"data-slot":"dialog-portal",...e})}function n({className:e,...s}){return(0,t.jsx)(a.Overlay,{"data-slot":"dialog-overlay",className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...s})}function d({className:e,children:i,showCloseButton:d=!0,...o}){return(0,t.jsxs)(l,{"data-slot":"dialog-portal",children:[(0,t.jsx)(n,{}),(0,t.jsxs)(a.Content,{"data-slot":"dialog-content",className:(0,r.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...o,children:[i,d&&(0,t.jsxs)(a.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(s.XIcon,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function o({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,r.cn)("flex flex-col gap-2 text-center sm:text-left",e),...a})}function c({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,r.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...a})}function u({className:e,...s}){return(0,t.jsx)(a.Title,{"data-slot":"dialog-title",className:(0,r.cn)("text-lg leading-none font-semibold",e),...s})}function h({className:e,...s}){return(0,t.jsx)(a.Description,{"data-slot":"dialog-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...s})}e.s(["Dialog",()=>i,"DialogContent",()=>d,"DialogDescription",()=>h,"DialogFooter",()=>c,"DialogHeader",()=>o,"DialogTitle",()=>u])},53183,e=>{"use strict";let t=(0,e.i(80329).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],53183)},44073,e=>{"use strict";var t=e.i(45042),a=e.i(18846);function s({className:e,...s}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,a.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...s})}e.s(["Textarea",()=>s])},65218,e=>{"use strict";var t=e.i(97817);let a=0,s=new Map,r=e=>{if(s.has(e))return;let t=setTimeout(()=>{s.delete(e),n({type:"REMOVE_TOAST",toastId:e})},1e6);s.set(e,t)},i=[],l={toasts:[]};function n(e){l=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?r(a):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(l,e),i.forEach(e=>{e(l)})}function d({...e}){let t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>n({type:"DISMISS_TOAST",toastId:t});return n({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>n({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function o(){let[e,a]=t.useState(l);return t.useEffect(()=>(i.push(a),()=>{let e=i.indexOf(a);e>-1&&i.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>n({type:"DISMISS_TOAST",toastId:e})}}e.s(["toast",()=>d,"useToast",()=>o])},38706,e=>{"use strict";let t=(0,e.i(80329).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],38706)},41408,e=>{"use strict";var t=e.i(45042),a=e.i(61808),s=e.i(7479),r=e.i(97817),i=e.i(38706);function l({children:e}){let{isAuthenticated:l,isLoading:n}=(0,a.useAuth)(),d=(0,s.useRouter)();return((0,r.useEffect)(()=>{n||l||d.push("/")},[l,n,d]),n)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(i.Loader2,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading..."})]})}):l?(0,t.jsx)(t.Fragment,{children:e}):null}e.s(["ProtectedRoute",()=>l,"default",()=>l])},32063,e=>{"use strict";let t=(0,e.i(80329).default)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);e.s(["ChevronRight",()=>t],32063)},13659,82209,e=>{"use strict";let t=(0,e.i(80329).default)("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);e.s(["Folder",()=>t],13659);let a=[{id:"1",title:"Project Documents",description:"All project-related documents",createdBy:"admin",createdAt:"2024-01-15T10:00:00Z",folders:[]},{id:"2",title:"Media Assets",description:"Images, videos, and design files",createdBy:"admin",createdAt:"2024-01-20T09:00:00Z",folders:[]}],s=[{id:"f1",folderId:"1",nestedFolderId:"nf1",fileName:"Service_Agreement_2024.pdf",fileType:"pdf",fileSize:2457600,uploadedBy:"admin",uploadedByName:"Admin User",uploadedAt:"2024-01-16T14:30:00Z",url:"/placeholder.pdf",zone:"North Zone",district:"Chennai",townPanchayat:"Ambattur"},{id:"f2",folderId:"1",nestedFolderId:"nf2",fileName:"Q1_Report_2024.pdf",fileType:"pdf",fileSize:1843200,uploadedBy:"user1",uploadedByName:"John Doe",uploadedAt:"2024-02-01T09:15:00Z",url:"/placeholder.pdf",zone:"West Zone",district:"Coimbatore",townPanchayat:"Singanallur"}],r=[{id:"nf1",name:"Reports",folderId:"1",createdBy:"admin",createdAt:"2024-01-15T10:00:00Z",shareConfig:{allowedFileTypes:["pdf","docx"],minFileSize:1,maxFileSize:10,accessType:"roles",allowedRoles:["admin","manager"]}},{id:"nf2",name:"Q1",folderId:"1",parentFolderId:"nf1",createdBy:"admin",createdAt:"2024-01-15T10:30:00Z"}];e.s(["driveService",0,{getFolders:async()=>a.map(e=>{var t;let a,s,i=(a=(t=r.filter(t=>t.folderId===e.id)).filter(e=>!e.parentFolderId),s=e=>{let a=t.filter(t=>t.parentFolderId===e.id);return{...e,folders:a.map(s)}},a.map(s));return{...e,folders:i}}),async createFolder(e){let t={...e,id:`folder_${Date.now()}`,createdAt:new Date().toISOString(),folders:[]};return a.push(t),t},async updateFolder(e,t){let s=a.findIndex(t=>t.id===e);if(-1!==s)return a[s]={...a[s],...t},a[s];throw Error("Folder not found")},async deleteFolder(e){a=a.filter(t=>t.id!==e),s=s.filter(t=>t.folderId!==e)},async getFiles(e,t,a){let r=s;return e&&(r=r.filter(t=>t.nestedFolderId===e)),t&&"admin"!==a&&"manager"!==a&&(r=r.filter(e=>e.uploadedBy===t)),r},async getAllFilesWithFilters(e){let t=s;return e.folderId&&(t=t.filter(t=>t.folderId===e.folderId)),e.nestedFolderId&&(t=t.filter(t=>t.nestedFolderId===e.nestedFolderId)),e.zone&&(t=t.filter(t=>t.zone===e.zone)),e.district&&(t=t.filter(t=>t.district===e.district)),e.townPanchayat&&(t=t.filter(t=>t.townPanchayat===e.townPanchayat)),t},async uploadFile(e){let t={...e,id:`file_${Date.now()}`,uploadedAt:new Date().toISOString()};return s.push(t),t},async deleteFile(e){s=s.filter(t=>t.id!==e)},getUserFileCount:async(e,t)=>s.filter(a=>a.nestedFolderId===e&&a.uploadedBy===t).length,async canUserUpload(e,t,s,i){let l=this.getEffectiveShareConfig(e,r,a);if(!l)return{canUpload:!1,reason:"Folder not found or not shared"};if("roles"===l.accessType){if(!l.allowedRoles?.includes(s))return{canUpload:!1,reason:"No access to this folder"}}else if("users"===l.accessType&&!l.allowedUserIds?.includes(t))return{canUpload:!1,reason:"No access to this folder"};let n=i.fileSize/1048576;return n<l.minFileSize||n>l.maxFileSize?{canUpload:!1,reason:`File size must be between ${l.minFileSize}MB and ${l.maxFileSize}MB`}:{canUpload:!0}},async getUserFileSummaries(e,t,a){let i=s;e&&(i=i.filter(t=>t.nestedFolderId===e)),t&&"admin"!==a&&"manager"!==a&&(i=i.filter(e=>e.uploadedBy===t));let l=new Map;i.forEach(e=>{let t=l.get(e.uploadedBy)||[];l.set(e.uploadedBy,[...t,e])});let n=[];for(let[e,t]of l.entries()){let a=t[0],s=r.find(e=>e.id===a.nestedFolderId),i=s?.shareConfig?.maxFileSize||0,l=t.length;n.push({userId:e,userName:a.uploadedByName,zone:a.zone,district:a.district,townPanchayat:a.townPanchayat,requestedCount:i,uploadedCount:l,pendingCount:Math.max(0,i-l),files:t,folderId:a.nestedFolderId||"",folderTitle:s?.name||""})}return n},async bulkDownloadFiles(e){let t=s.filter(t=>e.includes(t.id));console.log(`[v0] Downloading ${t.length} files as ZIP`);let a=`smart_drive_files_${new Date().toISOString().split("T")[0]}.zip`;return{success:!0,message:`Downloaded ${t.length} file(s) as ${a}`}},downloadAllFiles:async()=>(console.log("[v0] Downloading all files as ZIP"),{success:!0,message:`Downloaded ${s.length} files as all_files.zip`}),async downloadByFolder(e){let t=s.filter(t=>t.folderId===e),r=a.find(t=>t.id===e);return console.log(`[v0] Downloading ${t.length} files from folder ${r?.title}`),{success:!0,message:`Downloaded ${t.length} files from ${r?.title} as ${r?.title.replace(/\s+/g,"_")}.zip`}},async downloadByZone(e){let t=s.filter(t=>t.zone===e);return console.log(`[v0] Downloading ${t.length} files from zone ${e}`),{success:!0,message:`Downloaded ${t.length} files from ${e} as ${e.replace(/\s+/g,"_")}.zip`}},async downloadByDistrict(e){let t=s.filter(t=>t.district===e);return console.log(`[v0] Downloading ${t.length} files from district ${e}`),{success:!0,message:`Downloaded ${t.length} files from ${e} as ${e.replace(/\s+/g,"_")}.zip`}},async downloadByTownPanchayat(e){let t=s.filter(t=>t.townPanchayat===e);return console.log(`[v0] Downloading ${t.length} files from town panchayat ${e}`),{success:!0,message:`Downloaded ${t.length} files from ${e} as ${e.replace(/\s+/g,"_")}.zip`}},async createNestedFolder(e){let t={...e,id:`nfolder_${Date.now()}`,createdAt:new Date().toISOString(),folders:[]};return r.push(t),t},async updateNestedFolder(e,t){let a=r.findIndex(t=>t.id===e);if(-1!==a)return r[a]={...r[a],...t},r[a];throw Error("Nested folder not found")},async deleteNestedFolder(e){r=r.filter(t=>t.id!==e),s=s.filter(t=>t.nestedFolderId!==e)},getEffectiveShareConfig(e,t,a){let s=t.find(t=>t.id===e);if(!s)return null;if(s.shareConfig)return s.shareConfig;if(s.parentFolderId)return this.getEffectiveShareConfig(s.parentFolderId,t,a);if(a){let e=a.find(e=>e.id===s.folderId);if(e?.shareConfig)return e.shareConfig}return null},isFolderShared(e,t,a){let s=t.find(t=>t.id===e);if(!s)return{isShared:!1,isInherited:!1};if(s.shareConfig)return{isShared:!0,isInherited:!1};if(s.parentFolderId&&this.isFolderShared(s.parentFolderId,t,a).isShared)return{isShared:!0,isInherited:!0,inheritedFrom:"parent"};if(a){let e=a.find(e=>e.id===s.folderId);if(e?.shareConfig)return{isShared:!0,isInherited:!0,inheritedFrom:"databox"}}return{isShared:!1,isInherited:!1}}}],82209)},1488,e=>{"use strict";var t=e.i(45042),a=e.i(97817),s=e.i(41408),r=e.i(71429),i=e.i(53790),l=e.i(53183);let n=(0,e.i(80329).default)("FolderPlus",[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);var d=e.i(43870),o=e.i(59377),c=e.i(1002),u=e.i(32063),h=e.i(13659),m=e.i(82209),f=e.i(31737),x=e.i(95876),p=e.i(86541),g=e.i(44073),v=e.i(61808);function b({open:e,onOpenChange:s,onSuccess:r,editingFolder:l}){let{user:n}=(0,v.useAuth)(),[d,o]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[h,b]=(0,a.useState)(!1);(0,a.useEffect)(()=>{l?(o(l.title),u(l.description||"")):(o(""),u(""))},[l,e]);let y=async e=>{if(e.preventDefault(),d.trim()&&n){b(!0);try{l?await m.driveService.updateFolder(l.id,{title:d,description:c}):await m.driveService.createFolder({title:d,description:c,createdBy:n.id}),r(),s(!1),o(""),u("")}catch(e){console.error("Failed to save folder:",e)}finally{b(!1)}}};return(0,t.jsx)(f.Dialog,{open:e,onOpenChange:s,children:(0,t.jsxs)(f.DialogContent,{className:"sm:max-w-[550px]",children:[(0,t.jsx)(f.DialogHeader,{children:(0,t.jsx)(f.DialogTitle,{className:"text-[#013A65] text-xl",children:l?"Edit Databox":"Create New Databox"})}),(0,t.jsxs)("form",{onSubmit:y,className:"space-y-5 pt-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(p.Label,{htmlFor:"title",className:"text-sm font-medium",children:["Databox Title ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(x.Input,{id:"title",value:d,onChange:e=>o(e.target.value),placeholder:"e.g., Project Documents",required:!0,className:"h-11"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"description",className:"text-sm font-medium",children:"Description"}),(0,t.jsx)(g.Textarea,{id:"description",value:c,onChange:e=>u(e.target.value),placeholder:"Brief description of this databox",rows:4,className:"resize-none"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"Provide a clear description to help users understand the databox's purpose"})]}),(0,t.jsxs)(f.DialogFooter,{className:"gap-2 pt-4",children:[(0,t.jsx)(i.Button,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:h,className:"h-10",children:"Cancel"}),(0,t.jsx)(i.Button,{type:"submit",disabled:h||!d.trim(),className:"bg-gradient-to-r from-[#013A65] to-[#013A65]/90 hover:from-[#013A65]/90 hover:to-[#013A65] text-white h-10 px-6",children:h?"Saving...":l?"Update Databox":"Create Databox"})]})]})]})})}var y=e.i(65218);function j({open:e,onOpenChange:s,onSuccess:r,databox:l,parentFolder:n,editingFolder:d}){let{user:o}=(0,v.useAuth)(),{toast:c}=(0,y.useToast)(),[u,h]=(0,a.useState)(!1),[g,b]=(0,a.useState)("");(0,a.useEffect)(()=>{d?b(d.name):b("")},[d,e]);let j=async e=>{if(e.preventDefault(),l&&o){h(!0);try{d?(await m.driveService.updateNestedFolder(d.id,{name:g}),c({title:"Success",description:"Folder updated successfully"})):(await m.driveService.createNestedFolder({name:g,folderId:l.id,parentFolderId:n?.id,createdBy:o.id}),c({title:"Success",description:"Folder created successfully"})),r(),s(!1),b("")}catch(e){c({title:"Error",description:"Failed to save folder",variant:"destructive"})}finally{h(!1)}}};return(0,t.jsx)(f.Dialog,{open:e,onOpenChange:s,children:(0,t.jsxs)(f.DialogContent,{className:"max-w-md",children:[(0,t.jsx)(f.DialogHeader,{children:(0,t.jsx)(f.DialogTitle,{className:"text-[#013A65] text-xl",children:d?"Edit Folder":"Create New Folder"})}),(0,t.jsxs)("form",{onSubmit:j,className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(p.Label,{htmlFor:"name",className:"text-[#013A65] font-medium",children:["Folder Name ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(x.Input,{id:"name",value:g,onChange:e=>b(e.target.value),placeholder:"Enter folder name",required:!0,className:"mt-1.5 h-11 border-[#013A65]/20 focus:border-[#013A65]"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,t.jsx)(i.Button,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:u,children:"Cancel"}),(0,t.jsx)(i.Button,{type:"submit",disabled:u,className:"bg-gradient-to-r from-[#013A65] to-[#013A65]/90 hover:from-[#013A65]/90 hover:to-[#013A65]/80 text-white",children:u?"Saving...":d?"Update Folder":"Create Folder"})]})]})]})})}var S=e.i(75987),N=e.i(45634);let w=[{value:"pdf",label:"PDF (.pdf)"},{value:"doc",label:"Word (.doc, .docx)"},{value:"xls",label:"Excel (.xls, .xlsx)"},{value:"ppt",label:"PowerPoint (.ppt, .pptx)"},{value:"txt",label:"Text (.txt)"},{value:"jpg",label:"JPEG (.jpg, .jpeg)"},{value:"png",label:"PNG (.png)"},{value:"gif",label:"GIF (.gif)"},{value:"mp4",label:"Video (.mp4, .avi, .mov)"},{value:"mp3",label:"Audio (.mp3, .wav)"},{value:"zip",label:"Archive (.zip, .rar)"}],F=["Zone 1","Zone 2","Zone 3","Zone 4"],C={"Zone 1":["District 1A","District 1B","District 1C"],"Zone 2":["District 2A","District 2B"],"Zone 3":["District 3A","District 3B","District 3C"],"Zone 4":["District 4A","District 4B"]},A={"District 1A":["TP 1A1","TP 1A2","TP 1A3"],"District 1B":["TP 1B1","TP 1B2"],"District 1C":["TP 1C1","TP 1C2","TP 1C3"],"District 2A":["TP 2A1","TP 2A2"],"District 2B":["TP 2B1","TP 2B2","TP 2B3"],"District 3A":["TP 3A1","TP 3A2"],"District 3B":["TP 3B1","TP 3B2"],"District 3C":["TP 3C1","TP 3C2","TP 3C3"],"District 4A":["TP 4A1","TP 4A2"],"District 4B":["TP 4B1","TP 4B2","TP 4B3"]};function D({open:e,onOpenChange:s,onSuccess:r,folder:l,parentFolder:n,parentShare:d,editingSubfolder:o}){let{user:u}=(0,v.useAuth)(),[h,g]=(0,a.useState)([]),[b,y]=(0,a.useState)("1"),[j,D]=(0,a.useState)("10"),[T,I]=(0,a.useState)("all"),[k,B]=(0,a.useState)("zone"),[P,z]=(0,a.useState)(""),[E,$]=(0,a.useState)(""),[M,O]=(0,a.useState)(""),[_,L]=(0,a.useState)(!1),[R,Z]=(0,a.useState)(!1);(0,a.useEffect)(()=>{l?.shareConfig&&!n?(g(l.shareConfig.allowedFileTypes),y(l.shareConfig.minFileSize?.toString()||"1"),D(l.shareConfig.maxFileSize.toString()),I("all"===l.shareConfig.accessType?"all":"location")):n?.shareConfig?(g(n.shareConfig.allowedFileTypes),y(n.shareConfig.minFileSize?.toString()||"1"),D(n.shareConfig.maxFileSize.toString()),I("all"===n.shareConfig.accessType?"all":"location")):o?(g(o.allowedFileTypes),y(o.minFileSize?.toString()||"1"),D(o.maxFileSize.toString()),I("all"===o.accessType?"all":"location")):(g([]),y("1"),D("10"),I("all"),B("zone"),z(""),$(""),O(""))},[o,n,l,e]);let U=e=>{g(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},V=async e=>{if(e.preventDefault(),l&&u&&0!==h.length){Z(!0);try{let e={allowedFileTypes:h,minFileSize:Number.parseInt(b),maxFileSize:Number.parseInt(j),accessType:T,..."location"===T&&{locationLevel:k,zone:P||void 0,district:E||void 0,townPanchayat:M||void 0}};if(!n&&l)await m.driveService.updateFolder(l.id,{shareConfig:e});else if(n&&!n.shareConfig)await m.driveService.updateNestedFolder(n.id,{shareConfig:e});else{let t={folderId:l.id,parentSubfolderId:d?.id,...e,createdBy:u.id};o?await m.driveService.updateSubfolder(o.id,t):await m.driveService.createSubfolder(t)}r(),s(!1)}catch(e){console.error("Failed to save share:",e)}finally{Z(!1)}}},H=P&&C[P]||[],q=E&&A[E]||[];return(0,t.jsx)(f.Dialog,{open:e,onOpenChange:s,children:(0,t.jsxs)(f.DialogContent,{className:"sm:max-w-[700px] max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(f.DialogHeader,{children:[(0,t.jsx)(f.DialogTitle,{className:"text-[#013A65] text-xl",children:!n&&l?`Share Databox: ${l.title}`:n&&!n.shareConfig?`Share Folder: ${n.name}`:o?"Edit Share":"Create New Share"}),l&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:!n&&l?"Configure sharing settings for this databox. All folders and subfolders will inherit these settings.":n&&!n.shareConfig?"Configure sharing settings for this folder. All subfolders will inherit these settings.":(0,t.jsxs)(t.Fragment,{children:["Creating share in: ",(0,t.jsx)("span",{className:"font-medium text-foreground",children:l?.title}),d&&(0,t.jsx)("span",{className:"text-[#F3B335]",children:" → Nested under Share"})]})})]}),(0,t.jsxs)("form",{onSubmit:V,className:"space-y-6 pt-2",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(p.Label,{className:"text-sm font-medium",children:["Allowed File Types ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("button",{type:"button",onClick:()=>L(!_),className:"w-full h-11 px-3 py-2 text-left border rounded-md bg-background hover:bg-muted/50 transition-colors flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm",children:0===h.length?"Select file types...":`${h.length} file type(s) selected`}),(0,t.jsx)(c.ChevronDown,{className:"h-4 w-4 opacity-50"})]}),_&&(0,t.jsx)("div",{className:"absolute z-50 w-full mt-1 bg-background border rounded-md shadow-lg max-h-64 overflow-y-auto",children:(0,t.jsx)("div",{className:"p-2 space-y-1",children:w.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2 p-2 hover:bg-muted rounded cursor-pointer",onClick:()=>U(e.value),children:[(0,t.jsx)(N.Checkbox,{checked:h.includes(e.value)}),(0,t.jsx)("label",{className:"text-sm cursor-pointer flex-1",children:e.label})]},e.value))})})]}),h.length>0&&(0,t.jsx)("div",{className:"flex flex-wrap gap-2 mt-2",children:h.map(e=>{let a=w.find(t=>t.value===e);return(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-[#F3B335]/10 text-[#013A65] rounded text-xs font-medium",children:[a?.label,(0,t.jsx)("button",{type:"button",onClick:()=>U(e),className:"hover:text-red-600 ml-1",children:"×"})]},e)})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(p.Label,{htmlFor:"minFileSize",className:"text-sm font-medium",children:["Min File Size (MB) ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(x.Input,{id:"minFileSize",type:"number",min:"0.1",max:"1000",step:"0.1",value:b,onChange:e=>y(e.target.value),required:!0,className:"h-11"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(p.Label,{htmlFor:"maxFileSize",className:"text-sm font-medium",children:["Max File Size (MB) ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(x.Input,{id:"maxFileSize",type:"number",min:"1",max:"1000",value:j,onChange:e=>D(e.target.value),required:!0,className:"h-11"})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-[#013A65]",children:"Access Permissions"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(p.Label,{htmlFor:"accessType",className:"text-sm font-medium",children:["Who Can Access ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)(S.Select,{value:T,onValueChange:e=>I(e),children:[(0,t.jsx)(S.SelectTrigger,{className:"h-11",children:(0,t.jsx)(S.SelectValue,{})}),(0,t.jsxs)(S.SelectContent,{children:[(0,t.jsx)(S.SelectItem,{value:"all",children:"All Users"}),(0,t.jsx)(S.SelectItem,{value:"location",children:"Specific Users (by Location)"})]})]})]}),"location"===T&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(p.Label,{htmlFor:"locationLevel",className:"text-sm font-medium",children:["Filter By ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)(S.Select,{value:k,onValueChange:e=>B(e),children:[(0,t.jsx)(S.SelectTrigger,{className:"h-11",children:(0,t.jsx)(S.SelectValue,{})}),(0,t.jsxs)(S.SelectContent,{children:[(0,t.jsx)(S.SelectItem,{value:"zone",children:"Zone"}),(0,t.jsx)(S.SelectItem,{value:"district",children:"District"}),(0,t.jsx)(S.SelectItem,{value:"townpanchayat",children:"Town Panchayat"})]})]})]})]}),"location"===T&&(0,t.jsxs)("div",{className:"space-y-4 p-4 bg-muted/30 rounded-lg border",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(p.Label,{htmlFor:"zone",className:"text-sm font-medium",children:["Zone ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)(S.Select,{value:P,onValueChange:e=>{z(e),$(""),O("")},children:[(0,t.jsx)(S.SelectTrigger,{className:"h-11",children:(0,t.jsx)(S.SelectValue,{placeholder:"Select..."})}),(0,t.jsx)(S.SelectContent,{children:F.map(e=>(0,t.jsx)(S.SelectItem,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(p.Label,{htmlFor:"district",className:"text-sm font-medium",children:["District"," ",("district"===k||"townpanchayat"===k)&&(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)(S.Select,{value:E,onValueChange:e=>{$(e),O("")},disabled:!P||"zone"===k,children:[(0,t.jsx)(S.SelectTrigger,{className:"h-11",children:(0,t.jsx)(S.SelectValue,{placeholder:P?"Select...":"Zone first"})}),(0,t.jsx)(S.SelectContent,{children:H.map(e=>(0,t.jsx)(S.SelectItem,{value:e,children:e},e))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(p.Label,{htmlFor:"townpanchayat",className:"text-sm font-medium",children:["Town Panchayat ","townpanchayat"===k&&(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)(S.Select,{value:M,onValueChange:O,disabled:!E||"townpanchayat"!==k,children:[(0,t.jsx)(S.SelectTrigger,{className:"h-11",children:(0,t.jsx)(S.SelectValue,{placeholder:E?"Select...":"District first"})}),(0,t.jsx)(S.SelectContent,{children:q.map(e=>(0,t.jsx)(S.SelectItem,{value:e,children:e},e))})]})]})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground bg-blue-50 dark:bg-blue-950/20 p-3 rounded border border-blue-200 dark:border-blue-800",children:[(0,t.jsx)("p",{className:"font-medium text-blue-900 dark:text-blue-100 mb-1",children:"Access will be granted to:"}),(0,t.jsxs)("p",{className:"text-blue-800 dark:text-blue-200",children:["zone"===k&&P&&`All users in ${P}`,"district"===k&&P&&E&&`All users in ${E}, ${P}`,"townpanchayat"===k&&P&&E&&M&&`All users in ${M}, ${E}, ${P}`,!P&&"Please select location filters"]})]})]})]}),(0,t.jsxs)(f.DialogFooter,{className:"gap-2 pt-4",children:[(0,t.jsx)(i.Button,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:R,className:"h-10",children:"Cancel"}),(0,t.jsx)(i.Button,{type:"submit",disabled:R||0===h.length||"location"===T&&!P||"location"===T&&("district"===k||"townpanchayat"===k)&&!E||"location"===T&&"townpanchayat"===k&&!M,className:"bg-gradient-to-r from-[#013A65] to-[#013A65]/90 hover:from-[#013A65]/90 hover:to-[#013A65] text-white h-10 px-6",children:R?"Saving...":!n&&l?"Share Databox":n&&!n.shareConfig?"Share Folder":o?"Update Share":"Create Share"})]})]})]})})}var T=e.i(18846);function I(){let{user:e}=(0,v.useAuth)(),[f,x]=(0,a.useState)([]),[p,g]=(0,a.useState)(!0),[y,S]=(0,a.useState)(new Set),[N,w]=(0,a.useState)(new Set),[F,C]=(0,a.useState)(!1),[A,I]=(0,a.useState)(!1),[k,B]=(0,a.useState)(!1),[P,z]=(0,a.useState)(null),[E,$]=(0,a.useState)(null),[M,O]=(0,a.useState)(null),[_,L]=(0,a.useState)(null);(0,a.useEffect)(()=>{R()},[]);let R=async()=>{g(!0);try{let e=await m.driveService.getFolders();x(e)}catch(e){console.error("Failed to load folders:",e)}finally{g(!1)}},Z=async e=>{if(confirm("Are you sure you want to delete this folder and all its contents?"))try{await m.driveService.deleteFolder(e),await R()}catch(e){console.error("Failed to delete folder:",e)}},U=async e=>{if(confirm("Are you sure you want to delete this folder and all its contents?"))try{await m.driveService.deleteNestedFolder(e),await R()}catch(e){console.error("Failed to delete folder:",e)}},V=(e,t)=>{z(e),$(t||null),L(null),I(!0)},H=async(e,t)=>{if(t.shareConfig){if(confirm("Are you sure you want to unshare this folder? This will remove all sharing permissions."))try{await m.driveService.updateNestedFolder(t.id,{shareConfig:void 0}),await R()}catch(e){console.error("Failed to unshare folder:",e)}}else q(e,t)},q=(e,t)=>{z(e),L(t),B(!0)},G=async e=>{if(e.shareConfig){if(confirm("Are you sure you want to unshare this databox? This will remove sharing from all folders and subfolders within it."))try{await m.driveService.updateFolder(e.id,{shareConfig:void 0}),await R()}catch(e){console.error("Failed to unshare databox:",e)}}else K(e)},K=e=>{z(e),L(null),B(!0)},W=(e,a,s=0)=>{let r=a.folders&&a.folders.length>0,l=N.has(a.id),f=X(e.folders),x=m.driveService.isFolderShared(a.id,f,[e]),p=x.isShared,g=x.isInherited,v=x.inheritedFrom;return(0,t.jsxs)("div",{style:{marginLeft:`${24*s}px`},children:[(0,t.jsx)("div",{className:"bg-white border border-gray-200 rounded-lg p-3 hover:shadow-md transition-shadow mb-2",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[r&&(0,t.jsx)("button",{onClick:()=>{var e;let t;return e=a.id,void((t=new Set(N)).has(e)?t.delete(e):t.add(e),w(t))},className:"text-[#013A65] hover:bg-[#013A65]/10 p-1 rounded",children:l?(0,t.jsx)(c.ChevronDown,{className:"h-4 w-4"}):(0,t.jsx)(u.ChevronRight,{className:"h-4 w-4"})}),(0,t.jsx)(h.Folder,{className:"h-4 w-4 text-[#013A65]"}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-semibold text-[#013A65]",children:a.name}),p&&(0,t.jsxs)("span",{className:(0,T.cn)("text-xs font-medium",g?"text-blue-600":"text-green-600"),children:["●"," ",g?`Shared (Inherited from ${"databox"===v?"Databox":"Parent"})`:"Shared"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>V(e,a),className:"text-green-600 border-green-600/20 hover:bg-green-600/10",children:[(0,t.jsx)(n,{className:"h-3 w-3 mr-1"}),"Folder"]}),!g&&(0,t.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>H(e,a),className:p?"text-red-600 border-red-600/20 hover:bg-red-600/10":"text-[#F3B335] border-[#F3B335]/20 hover:bg-[#F3B335]/10",children:p?"Unshare":"Share"}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>{z(e),L(a),I(!0)},children:(0,t.jsx)(d.Edit,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>U(a.id),children:(0,t.jsx)(o.Trash2,{className:"h-4 w-4 text-destructive"})})]})]})}),l&&r&&(0,t.jsx)("div",{className:"ml-6 space-y-2",children:a.folders?.map(t=>W(e,t,s+1))})]},a.id)},X=e=>{let t=[],a=e=>{for(let s of e)t.push(s),s.folders&&s.folders.length>0&&a(s.folders)};return a(e),t};return(0,t.jsx)(s.ProtectedRoute,{allowedRoles:["admin","manager"],children:(0,t.jsxs)(r.DashboardLayout,{children:[(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-[#013A65] to-[#013A65]/90 text-white p-6 rounded-lg mb-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Databox Management"}),(0,t.jsx)("p",{className:"text-white/80",children:"Create and manage databox, shares, and access permissions"})]}),(0,t.jsxs)(i.Button,{onClick:()=>{O(null),C(!0)},className:"bg-gradient-to-r from-[#F3B335] to-[#F3B335]/90 hover:from-[#F3B335]/90 hover:to-[#F3B335]/80 text-[#013A65] font-semibold shadow-lg hover:shadow-xl transition-all",children:[(0,t.jsx)(l.Plus,{className:"h-4 w-4 mr-2"}),"Create Databox"]})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-auto",children:p?(0,t.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"Loading databox..."}):0===f.length?(0,t.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,t.jsx)(n,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),(0,t.jsx)("p",{children:"No databox yet. Create your first databox to get started."})]}):(0,t.jsx)("div",{className:"space-y-4",children:f.map(e=>(0,t.jsxs)("div",{className:"bg-white border-l-4 border-[#F3B335] rounded-lg shadow-sm",children:[(0,t.jsxs)("div",{className:"p-4 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,t.jsx)("button",{onClick:()=>{var t;let a;return t=e.id,void((a=new Set(y)).has(t)?a.delete(t):a.add(t),S(a))},className:"text-[#013A65] hover:bg-[#013A65]/10 p-1 rounded",children:y.has(e.id)?(0,t.jsx)(c.ChevronDown,{className:"h-5 w-5"}):(0,t.jsx)(u.ChevronRight,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"font-semibold text-[#013A65] text-lg",children:e.title}),e.description&&(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:e.description}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.folders?.length||0," folder",e.folders?.length!==1?"s":""]}),e.shareConfig&&(0,t.jsx)("span",{className:"text-xs font-medium text-green-600",children:"● Shared"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(i.Button,{variant:"outline",size:"sm",onClick:()=>V(e),className:"text-green-600 border-green-600/20 hover:bg-green-600/10",children:[(0,t.jsx)(n,{className:"h-4 w-4 mr-1"}),"Add Folder"]}),(0,t.jsx)(i.Button,{variant:"outline",size:"sm",onClick:()=>G(e),className:e.shareConfig?"text-red-600 border-red-600/20 hover:bg-red-600/10":"text-[#F3B335] border-[#F3B335]/20 hover:bg-[#F3B335]/10",children:e.shareConfig?"Unshare":"Share"}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>{O(e),C(!0)},children:(0,t.jsx)(d.Edit,{className:"h-4 w-4"})}),(0,t.jsx)(i.Button,{variant:"ghost",size:"sm",onClick:()=>Z(e.id),children:(0,t.jsx)(o.Trash2,{className:"h-4 w-4 text-destructive"})})]})]}),y.has(e.id)&&e.folders?.length>0&&(0,t.jsx)("div",{className:"border-t bg-gray-50 p-4",children:(0,t.jsx)("div",{className:"space-y-3",children:e.folders?.map(t=>W(e,t,0))})})]},e.id))})})]}),(0,t.jsx)(b,{open:F,onOpenChange:C,onSuccess:R,editingFolder:M}),(0,t.jsx)(j,{open:A,onOpenChange:I,onSuccess:R,databox:P,parentFolder:E,editingFolder:_}),(0,t.jsx)(D,{open:k,onOpenChange:B,onSuccess:R,folder:P,parentFolder:_})]})})}e.s(["default",()=>I],1488)}]);