(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1508,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return l}});let l=e=>{}},98786,e=>{"use strict";var t=e.i(45042),a=e.i(18846);function l({className:e,...l}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...l})}function s({className:e,...l}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...l})}function r({className:e,...l}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...l})}function n({className:e,...l}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...l})}function o({className:e,...l}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...l})}e.s(["Card",()=>l,"CardContent",()=>o,"CardDescription",()=>n,"CardHeader",()=>s,"CardTitle",()=>r])},86541,e=>{"use strict";var t=e.i(45042),a=e.i(97817),l=e.i(49572),s=a.forwardRef((e,a)=>(0,t.jsx)(l.Primitive.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var r=e.i(18846);function n({className:e,...a}){return(0,t.jsx)(s,{"data-slot":"label",className:(0,r.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...a})}e.s(["Label",()=>n],86541)},65218,e=>{"use strict";var t=e.i(97817);let a=0,l=new Map,s=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},r=[],n={toasts:[]};function o(e){n=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?s(a):e.toasts.forEach(e=>{s(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(n,e),r.forEach(e=>{e(n)})}function i({...e}){let t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),l=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||l()}}}),{id:t,dismiss:l,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function c(){let[e,a]=t.useState(n);return t.useEffect(()=>(r.push(a),()=>{let e=r.indexOf(a);e>-1&&r.splice(e,1)}),[e]),{...e,toast:i,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}e.s(["toast",()=>i,"useToast",()=>c])},30014,e=>{"use strict";var t=e.i(45042),a=e.i(18846);function l({className:e,...l}){return(0,t.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,t.jsx)("table",{"data-slot":"table",className:(0,a.cn)("w-full caption-bottom text-sm",e),...l})})}function s({className:e,...l}){return(0,t.jsx)("thead",{"data-slot":"table-header",className:(0,a.cn)("[&_tr]:border-b",e),...l})}function r({className:e,...l}){return(0,t.jsx)("tbody",{"data-slot":"table-body",className:(0,a.cn)("[&_tr:last-child]:border-0",e),...l})}function n({className:e,...l}){return(0,t.jsx)("tr",{"data-slot":"table-row",className:(0,a.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...l})}function o({className:e,...l}){return(0,t.jsx)("th",{"data-slot":"table-head",className:(0,a.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...l})}function i({className:e,...l}){return(0,t.jsx)("td",{"data-slot":"table-cell",className:(0,a.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...l})}e.s(["Table",()=>l,"TableBody",()=>r,"TableCell",()=>i,"TableHead",()=>o,"TableHeader",()=>s,"TableRow",()=>n])},73504,e=>{"use strict";var t=e.i(45042),a=e.i(9630),l=e.i(2059),s=e.i(18846);let r=(0,l.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function n({className:e,variant:l,asChild:n=!1,...o}){let i=n?a.Slot:"span";return(0,t.jsx)(i,{"data-slot":"badge",className:(0,s.cn)(r({variant:l}),e),...o})}e.s(["Badge",()=>n])},1308,e=>{"use strict";let t=(0,e.i(80329).default)("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);e.s(["PlayCircle",()=>t],1308)},64831,e=>{"use strict";let t=(0,e.i(80329).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],64831)},26339,e=>{"use strict";let t=(0,e.i(80329).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],26339)},48777,e=>{"use strict";let t=(0,e.i(80329).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],48777)},89577,e=>{"use strict";let t=(0,e.i(80329).default)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["CheckCircle2",()=>t],89577)},19475,e=>{"use strict";var t=e.i(45042),a=e.i(97817),l=e.i(71429),s=e.i(86541),r=e.i(75987),n=e.i(53790),o=e.i(64831),i=e.i(20578),c=e.i(80329);let d=(0,c.default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),m=new class{mockLocations=[{id:"loc1",name:"Tiruvallur - Zone 1",type:"zone",coordinates:{lat:13.1167,lng:79.9167},zone:"North Chennai",district:"Tiruvallur",townPanchayat:"Tiruvallur",totalWorks:52,tenderStage:6,notStarted:9,physicallyCompleted:24,fullyCompleted:13,completedPercentage:71.2,estimate:185e5,expenditure:132e5,balance:53e5,expenditurePercentage:71.4,workDetails:[{id:"w1",name:"Road Construction - Tiruvallur Main Road",scheme:"PMGSY",component:"Roads",stage:"Physically Completed",estimate:32e5,expenditure:29e5},{id:"w2",name:"Water Supply - Tiruvallur Phase 1",scheme:"Jal Jeevan Mission",component:"Water Supply",stage:"In Progress",estimate:25e5,expenditure:18e5}]},{id:"loc2",name:"Poonamallee - Zone 2",type:"district",coordinates:{lat:13.0475,lng:80.0953},zone:"North Chennai",district:"Tiruvallur",townPanchayat:"Poonamallee",totalWorks:45,tenderStage:5,notStarted:7,physicallyCompleted:21,fullyCompleted:12,completedPercentage:73.3,estimate:16e6,expenditure:118e5,balance:42e5,expenditurePercentage:73.8,workDetails:[{id:"w3",name:"School Building - Poonamallee",scheme:"Samagra Shiksha",component:"Education",stage:"Fully Completed",estimate:35e5,expenditure:345e4}]},{id:"loc3",name:"Avadi - Zone 3",type:"townpanchayat",coordinates:{lat:13.1147,lng:80.1018},zone:"North Chennai",district:"Tiruvallur",townPanchayat:"Avadi",totalWorks:38,tenderStage:4,notStarted:6,physicallyCompleted:18,fullyCompleted:10,completedPercentage:73.7,estimate:14e6,expenditure:103e5,balance:37e5,expenditurePercentage:73.6,workDetails:[]},{id:"loc4",name:"Vellore - Zone 4",type:"zone",coordinates:{lat:12.9165,lng:79.1325},zone:"Vellore",district:"Vellore",townPanchayat:"Vellore City",totalWorks:58,tenderStage:7,notStarted:11,physicallyCompleted:26,fullyCompleted:14,completedPercentage:69,estimate:21e6,expenditure:145e5,balance:65e5,expenditurePercentage:69,workDetails:[{id:"w4",name:"Highway Development - Vellore",scheme:"PMGSY",component:"Roads",stage:"In Progress",estimate:5e6,expenditure:35e5}]},{id:"loc5",name:"Katpadi - Zone 5",type:"district",coordinates:{lat:12.9698,lng:79.1452},zone:"Vellore",district:"Vellore",townPanchayat:"Katpadi",totalWorks:42,tenderStage:5,notStarted:8,physicallyCompleted:19,fullyCompleted:10,completedPercentage:69,estimate:155e5,expenditure:107e5,balance:48e5,expenditurePercentage:69,workDetails:[]},{id:"loc6",name:"Arcot - Zone 6",type:"townpanchayat",coordinates:{lat:12.9059,lng:79.3191},zone:"Vellore",district:"Vellore",townPanchayat:"Arcot",totalWorks:35,tenderStage:3,notStarted:5,physicallyCompleted:17,fullyCompleted:10,completedPercentage:77.1,estimate:12e6,expenditure:93e5,balance:27e5,expenditurePercentage:77.5,workDetails:[]},{id:"loc7",name:"Ponneri - Zone 7",type:"townpanchayat",coordinates:{lat:13.3333,lng:80.1833},zone:"North Chennai",district:"Tiruvallur",townPanchayat:"Ponneri",totalWorks:31,tenderStage:3,notStarted:5,physicallyCompleted:15,fullyCompleted:8,completedPercentage:74.2,estimate:11e6,expenditure:82e5,balance:28e5,expenditurePercentage:74.5,workDetails:[]},{id:"loc8",name:"Ranipet - Zone 8",type:"townpanchayat",coordinates:{lat:12.9249,lng:79.3331},zone:"Vellore",district:"Vellore",townPanchayat:"Ranipet",totalWorks:40,tenderStage:4,notStarted:7,physicallyCompleted:19,fullyCompleted:10,completedPercentage:72.5,estimate:145e5,expenditure:105e5,balance:4e6,expenditurePercentage:72.4,workDetails:[]}];mockUsers=[{id:"u1",name:"Rajesh Kumar",role:"Field Engineer",zone:"North Chennai",district:"Tiruvallur",townPanchayat:"Tiruvallur",coordinates:{lat:13.1167,lng:79.9167},lastActive:"2025-01-10 14:30",status:"active"},{id:"u2",name:"Priya Sharma",role:"Site Supervisor",zone:"North Chennai",district:"Tiruvallur",townPanchayat:"Poonamallee",coordinates:{lat:13.0475,lng:80.0953},lastActive:"2025-01-10 14:25",status:"active"},{id:"u3",name:"Amit Patel",role:"Project Manager",zone:"Vellore",district:"Vellore",townPanchayat:"Vellore City",coordinates:{lat:12.9165,lng:79.1325},lastActive:"2025-01-10 13:45",status:"inactive"},{id:"u4",name:"Sneha Reddy",role:"Quality Inspector",zone:"Vellore",district:"Vellore",townPanchayat:"Katpadi",coordinates:{lat:12.9698,lng:79.1452},lastActive:"2025-01-10 14:28",status:"active"},{id:"u5",name:"Karthik Murugan",role:"Civil Engineer",zone:"North Chennai",district:"Tiruvallur",townPanchayat:"Avadi",coordinates:{lat:13.1147,lng:80.1018},lastActive:"2025-01-10 14:32",status:"active"},{id:"u6",name:"Lakshmi Devi",role:"Site Inspector",zone:"Vellore",district:"Vellore",townPanchayat:"Arcot",coordinates:{lat:12.9059,lng:79.3191},lastActive:"2025-01-10 14:15",status:"active"}];async getMapLocations(e){console.log("[v0] Fetching map locations with filters:",e);let t=[...this.mockLocations];return e.zone&&"all"!==e.zone&&(t=t.filter(t=>t.zone===e.zone)),e.district&&"all"!==e.district&&(t=t.filter(t=>t.district===e.district)),e.townPanchayat&&"all"!==e.townPanchayat&&(t=t.filter(t=>t.townPanchayat===e.townPanchayat)),t}async getUserLocations(e){console.log("[v0] Fetching user locations with filters:",e);let t=[...this.mockUsers];return e.zone&&"all"!==e.zone&&(t=t.filter(t=>t.zone===e.zone)),e.district&&"all"!==e.district&&(t=t.filter(t=>t.district===e.district)),e.townPanchayat&&"all"!==e.townPanchayat&&(t=t.filter(t=>t.townPanchayat===e.townPanchayat)),t}async getNearestTownPanchayats(e){return console.log("[v0] Fetching nearest town panchayats for:",e),this.mockLocations.filter(e=>"townpanchayat"===e.type).slice(0,3)}getZones(){return["all","North Chennai","Vellore"]}getDistricts(e){return e&&"all"!==e?["all",...Array.from(new Set(this.mockLocations.filter(t=>t.zone===e).map(e=>e.district)))]:["all","Tiruvallur","Vellore"]}getTownPanchayats(e){return e&&"all"!==e?["all",...Array.from(new Set(this.mockLocations.filter(t=>t.district===e).map(e=>e.townPanchayat)))]:["all","Tiruvallur","Poonamallee","Avadi","Ponneri","Vellore City","Katpadi","Arcot","Ranipet"]}getSchemes(){return["all","PMGSY","Jal Jeevan Mission","Samagra Shiksha","MGNREGA","Smart Cities"]}getComponents(){return["all","Roads","Water Supply","Education","Health","Sanitation"]}getYears(){return["all","2024-25","2023-24","2022-23","2021-22"]}getStages(){return["all","Tender Stage","Not Started","In Progress","Physically Completed","Fully Completed"]}async getAggregatedStatistics(e){console.log("[v0] Calculating aggregated statistics with filters:",e);let t=await this.getMapLocations(e);if(0===t.length)return{zone:"all"===e.zone?"All Zones":e.zone,district:"all"===e.district?"All Districts":e.district,townPanchayat:"all"===e.townPanchayat?"All Town Panchayats":e.townPanchayat,totalWorks:0,tenderStage:0,notStarted:0,physicallyCompleted:0,fullyCompleted:0,completedPercentage:0,estimate:0,expenditure:0,balance:0,expenditurePercentage:0};let a=t.reduce((e,t)=>({totalWorks:e.totalWorks+t.totalWorks,tenderStage:e.tenderStage+t.tenderStage,notStarted:e.notStarted+t.notStarted,physicallyCompleted:e.physicallyCompleted+t.physicallyCompleted,fullyCompleted:e.fullyCompleted+t.fullyCompleted,estimate:e.estimate+t.estimate,expenditure:e.expenditure+t.expenditure}),{totalWorks:0,tenderStage:0,notStarted:0,physicallyCompleted:0,fullyCompleted:0,estimate:0,expenditure:0}),l=a.estimate-a.expenditure,s=a.totalWorks>0?Math.round(a.fullyCompleted/a.totalWorks*1e3/10):0,r=a.estimate>0?Math.round(a.expenditure/a.estimate*1e3/10):0;return{zone:"all"===e.zone?"All Zones":e.zone,district:"all"===e.district?"All Districts":e.district,townPanchayat:"all"===e.townPanchayat?"All Town Panchayats":e.townPanchayat,totalWorks:a.totalWorks,tenderStage:a.tenderStage,notStarted:a.notStarted,physicallyCompleted:a.physicallyCompleted,fullyCompleted:a.fullyCompleted,completedPercentage:s,estimate:a.estimate,expenditure:a.expenditure,balance:l,expenditurePercentage:r}}};function u({locations:e,users:l,nearestLocations:s,onLocationClick:r,selectedLocation:n}){let o=(0,a.useRef)(null),i=(0,a.useRef)(null),c=(0,a.useRef)([]),[d,m]=(0,a.useState)(null),[u,h]=(0,a.useState)(null),[x,g]=(0,a.useState)(!1),[p,b]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{if(window.L){g(!0),b(!1);return}let e=document.querySelector('script[src*="leaflet"]');if(e)return void e.addEventListener("load",()=>{g(!0),b(!1)});let t=document.createElement("link");t.rel="stylesheet",t.href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",document.head.appendChild(t);let a=document.createElement("script");return a.src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",a.async=!0,a.onload=()=>{console.log("[v0] Leaflet loaded successfully"),g(!0),b(!1)},a.onerror=()=>{console.error("[v0] Failed to load Leaflet"),b(!1)},document.head.appendChild(a),()=>{}},[]),(0,a.useEffect)(()=>{if(!x||!o.current||i.current)return;let e=window.L;if(!e)return void console.error("[v0] Leaflet not available");try{console.log("[v0] Initializing map");let t=e.map(o.current).setView([15.3173,75.7139],7);e.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:19}).addTo(t),i.current=t,setTimeout(()=>{i.current&&(i.current.invalidateSize(),console.log("[v0] Map initialized and sized"))},100)}catch(e){console.error("[v0] Error initializing map:",e)}return()=>{i.current&&(console.log("[v0] Cleaning up map instance"),i.current.remove(),i.current=null)}},[x]),(0,a.useEffect)(()=>{if(!i.current||!x)return;let t=window.L;if(t)try{console.log("[v0] Adding markers to map"),c.current.forEach(e=>e.remove()),c.current=[];let a=(e,t=25)=>{let a=window.L;return a?a.divIcon({className:"custom-marker",html:`
            <div style="
              width: ${t}px;
              height: ${t}px;
              background-color: ${e};
              border: 3px solid white;
              border-radius: 50%;
              box-shadow: 0 2px 8px rgba(0,0,0,0.3);
              display: flex;
              align-items: center;
              justify-content: center;
              position: relative;
            ">
              ${"#F3B335"===e?`<div style="
                  width: ${t+10}px;
                  height: ${t+10}px;
                  border: 2px solid #F3B335;
                  border-radius: 50%;
                  position: absolute;
                  animation: pulse 1.5s infinite;
                "></div>`:""}
            </div>
            <style>
              @keyframes pulse {
                0% { transform: scale(1); opacity: 0.5; }
                100% { transform: scale(1.5); opacity: 0; }
              }
            </style>
          `,iconSize:[t,t],iconAnchor:[t/2,t/2]}):null};if(e.forEach(e=>{let l=n?.id===e.id,s=a(l?"#F3B335":"#013A65",l?30:25),o=t.marker([e.coordinates.lat,e.coordinates.lng],{icon:s}).addTo(i.current).on("click",()=>r(e)).on("mouseover",()=>m(e)).on("mouseout",()=>m(null)),d=`
          <div style="min-width: 200px;">
            <h4 style="font-weight: 600; color: #013A65; margin-bottom: 8px;">${e.name}</h4>
            <div style="font-size: 13px; color: #666;">
              <p><strong>Zone:</strong> ${e.zone}</p>
              <p><strong>District:</strong> ${e.district}</p>
              <p><strong>Town Panchayat:</strong> ${e.townPanchayat}</p>
              <p><strong>Total Works:</strong> ${e.totalWorks}</p>
              <p><strong>Completed:</strong> ${e.completedPercentage}%</p>
            </div>
          </div>
        `;o.bindPopup(d),c.current.push(o)}),s.forEach(e=>{let l=a("#10B981",20),s=t.marker([e.coordinates.lat,e.coordinates.lng],{icon:l}).addTo(i.current),r=`
          <div style="min-width: 180px;">
            <h4 style="font-weight: 600; color: #10B981; margin-bottom: 8px;">Nearest: ${e.name}</h4>
            <div style="font-size: 13px; color: #666;">
              <p><strong>Town Panchayat:</strong> ${e.townPanchayat}</p>
              <p><strong>Total Works:</strong> ${e.totalWorks}</p>
            </div>
          </div>
        `;s.bindPopup(r),c.current.push(s)}),l.forEach(e=>{let l=a("active"===e.status?"#10B981":"#6B7280",18),s=t.marker([e.coordinates.lat,e.coordinates.lng],{icon:l}).addTo(i.current).on("mouseover",()=>h(e)).on("mouseout",()=>h(null)),r=`
          <div style="min-width: 180px;">
            <h4 style="font-weight: 600; color: #013A65; margin-bottom: 8px;">${e.name}</h4>
            <div style="font-size: 13px; color: #666;">
              <p><strong>Role:</strong> ${e.role}</p>
              <p><strong>Location:</strong> ${e.townPanchayat}</p>
              <p><strong>Last Active:</strong> ${e.lastActive}</p>
              <p><strong>Status:</strong> <span style="
                display: inline-block;
                padding: 2px 8px;
                border-radius: 4px;
                font-size: 11px;
                background-color: ${"active"===e.status?"#D1FAE5":"#F3F4F6"};
                color: ${"active"===e.status?"#065F46":"#374151"};
              ">${e.status}</span></p>
            </div>
          </div>
        `;s.bindPopup(r),c.current.push(s)}),c.current.length>0){let e=t.featureGroup(c.current);i.current.fitBounds(e.getBounds().pad(.1))}console.log("[v0] Markers added successfully")}catch(e){console.error("[v0] Error adding markers:",e)}},[e,l,s,n,r,x]),p)?(0,t.jsx)("div",{className:"relative h-[600px] w-full",children:(0,t.jsx)("div",{className:"w-full h-full rounded-lg bg-gray-100 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-[#013A65] border-r-transparent mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading map..."})]})})}):(0,t.jsxs)("div",{className:"relative h-[600px] w-full",children:[x&&(0,t.jsx)("div",{ref:o,className:"w-full h-full rounded-lg"}),d&&(0,t.jsxs)("div",{className:"absolute top-16 right-4 bg-white p-4 rounded-lg shadow-lg border border-[#EDEEF0] max-w-xs z-[1000]",children:[(0,t.jsx)("h4",{className:"font-semibold text-[#013A65] mb-2",children:d.name}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("p",{className:"text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium",children:"Zone:"})," ",d.zone]}),(0,t.jsxs)("p",{className:"text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium",children:"District:"})," ",d.district]}),(0,t.jsxs)("p",{className:"text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium",children:"Total Works:"})," ",d.totalWorks]}),(0,t.jsxs)("p",{className:"text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium",children:"Completed:"})," ",d.completedPercentage,"%"]}),d.workDetails.length>0&&(0,t.jsxs)("div",{className:"mt-2 pt-2 border-t border-gray-200",children:[(0,t.jsx)("p",{className:"font-medium text-[#013A65] mb-1",children:"Recent Works:"}),d.workDetails.slice(0,2).map(e=>(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:["• ",e.name]},e.id))]})]})]}),u&&(0,t.jsxs)("div",{className:"absolute top-16 left-4 bg-white p-4 rounded-lg shadow-lg border border-[#EDEEF0] max-w-xs z-[1000]",children:[(0,t.jsx)("h4",{className:"font-semibold text-[#013A65] mb-2",children:u.name}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("p",{className:"text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium",children:"Role:"})," ",u.role]}),(0,t.jsxs)("p",{className:"text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium",children:"Location:"})," ",u.townPanchayat]}),(0,t.jsxs)("p",{className:"text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium",children:"Last Active:"})," ",u.lastActive]}),(0,t.jsxs)("p",{className:"text-gray-600",children:[(0,t.jsx)("span",{className:"font-medium",children:"Status:"})," ",(0,t.jsx)("span",{className:`inline-block px-2 py-0.5 rounded text-xs ${"active"===u.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:u.status})]})]})]}),(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-6 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded-full bg-[#013A65] border-2 border-white shadow"}),(0,t.jsx)("span",{className:"text-gray-600",children:"Locations"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded-full bg-[#F3B335] border-2 border-white shadow"}),(0,t.jsx)("span",{className:"text-gray-600",children:"Selected"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded-full bg-[#10B981] border-2 border-white shadow"}),(0,t.jsx)("span",{className:"text-gray-600",children:"Nearest TP / Active Users"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-4 h-4 rounded-full bg-[#6B7280] border-2 border-white shadow"}),(0,t.jsx)("span",{className:"text-gray-600",children:"Inactive Users"})]})]})]})}var h=e.i(10259),x=e.i(26339),g=e.i(1308),p=e.i(48777),b=e.i(89577);let y=(0,c.default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),f=(0,c.default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),v=(0,c.default)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);function w({statistics:e}){let a=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e),l=[{label:"Zone",value:e.zone,icon:o.MapPin,color:"text-[#013A65]",bgColor:"bg-[#013A65]/10"},{label:"District",value:e.district,icon:o.MapPin,color:"text-[#013A65]",bgColor:"bg-[#013A65]/10"},{label:"Town Panchayat",value:e.townPanchayat,icon:o.MapPin,color:"text-[#013A65]",bgColor:"bg-[#013A65]/10"},{label:"Total Works",value:e.totalWorks.toString(),icon:h.Briefcase,color:"text-[#F3B335]",bgColor:"bg-[#F3B335]/10"},{label:"Tender Stage",value:e.tenderStage.toString(),icon:x.Clock,color:"text-orange-600",bgColor:"bg-orange-50"},{label:"Not Started",value:e.notStarted.toString(),icon:g.PlayCircle,color:"text-red-600",bgColor:"bg-red-50"},{label:"Physically Completed",value:e.physicallyCompleted.toString(),icon:p.CheckCircle,color:"text-yellow-600",bgColor:"bg-yellow-50"},{label:"Fully Completed",value:e.fullyCompleted.toString(),icon:b.CheckCircle2,color:"text-green-600",bgColor:"bg-green-50"},{label:"Completed %",value:`${e.completedPercentage}%`,icon:y,color:"text-green-600",bgColor:"bg-green-50"},{label:"Estimate",value:a(e.estimate),icon:f,color:"text-blue-600",bgColor:"bg-blue-50"},{label:"Expenditure",value:a(e.expenditure),icon:f,color:"text-indigo-600",bgColor:"bg-indigo-50"},{label:"Balance",value:a(e.balance),icon:f,color:"text-gray-600",bgColor:"bg-gray-50"},{label:"Expenditure %",value:`${e.expenditurePercentage}%`,icon:v,color:"text-indigo-600",bgColor:"bg-indigo-50"}];return(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-13 gap-3",children:l.map((e,a)=>{let l=e.icon;return(0,t.jsxs)("div",{className:"bg-white border border-[#EDEEF0] rounded-lg p-3 hover:shadow-md transition-shadow",children:[(0,t.jsx)("div",{className:"flex items-start justify-between mb-2",children:(0,t.jsx)("div",{className:`p-2 rounded-lg ${e.bgColor}`,children:(0,t.jsx)(l,{className:`w-4 h-4 ${e.color}`})})}),(0,t.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:e.label}),(0,t.jsx)("p",{className:"text-base font-bold text-[#013A65] truncate",title:e.value,children:e.value})]},a)})})}var j=e.i(98786),N=e.i(30014);function S({locations:e}){let a=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e);return(0,t.jsxs)(j.Card,{className:"border-[#EDEEF0] shadow-sm",children:[(0,t.jsx)(j.CardHeader,{className:"bg-gradient-to-r from-[#013A65] to-[#013A65]/90 text-white",children:(0,t.jsx)(j.CardTitle,{className:"text-lg",children:"Nearest Town Panchayat Details"})}),(0,t.jsx)(j.CardContent,{className:"p-0",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(N.Table,{children:[(0,t.jsx)(N.TableHeader,{children:(0,t.jsxs)(N.TableRow,{className:"bg-[#F3B335] hover:bg-[#F3B335]",children:[(0,t.jsx)(N.TableHead,{className:"text-[#013A65] font-semibold",children:"Town Panchayat"}),(0,t.jsx)(N.TableHead,{className:"text-[#013A65] font-semibold",children:"District"}),(0,t.jsx)(N.TableHead,{className:"text-[#013A65] font-semibold",children:"Total Works"}),(0,t.jsx)(N.TableHead,{className:"text-[#013A65] font-semibold",children:"Completed"}),(0,t.jsx)(N.TableHead,{className:"text-[#013A65] font-semibold",children:"Estimate"}),(0,t.jsx)(N.TableHead,{className:"text-[#013A65] font-semibold",children:"Expenditure"}),(0,t.jsx)(N.TableHead,{className:"text-[#013A65] font-semibold",children:"Balance"})]})}),(0,t.jsx)(N.TableBody,{children:e.map(e=>(0,t.jsxs)(N.TableRow,{className:"hover:bg-[#F8F8F8]/50",children:[(0,t.jsx)(N.TableCell,{className:"font-medium",children:e.townPanchayat}),(0,t.jsx)(N.TableCell,{children:e.district}),(0,t.jsx)(N.TableCell,{children:e.totalWorks}),(0,t.jsx)(N.TableCell,{children:(0,t.jsxs)("span",{className:"inline-block px-2 py-1 rounded bg-green-100 text-green-800 text-xs font-medium",children:[e.completedPercentage,"%"]})}),(0,t.jsx)(N.TableCell,{children:a(e.estimate)}),(0,t.jsx)(N.TableCell,{children:a(e.expenditure)}),(0,t.jsx)(N.TableCell,{children:a(e.balance)})]},e.id))})]})})})]})}var C=e.i(73504);function T({users:e}){return(0,t.jsxs)(j.Card,{className:"border-[#EDEEF0] shadow-sm",children:[(0,t.jsx)(j.CardHeader,{className:"bg-gradient-to-r from-[#013A65] to-[#013A65]/90 text-white",children:(0,t.jsx)(j.CardTitle,{className:"text-lg",children:"User Location Tracking"})}),(0,t.jsx)(j.CardContent,{className:"p-0",children:(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)(N.Table,{children:[(0,t.jsx)(N.TableHeader,{children:(0,t.jsxs)(N.TableRow,{className:"bg-[#F3B335] hover:bg-[#F3B335]",children:[(0,t.jsx)(N.TableHead,{className:"text-[#013A65] font-semibold",children:"Name"}),(0,t.jsx)(N.TableHead,{className:"text-[#013A65] font-semibold",children:"Role"}),(0,t.jsx)(N.TableHead,{className:"text-[#013A65] font-semibold",children:"Zone"}),(0,t.jsx)(N.TableHead,{className:"text-[#013A65] font-semibold",children:"District"}),(0,t.jsx)(N.TableHead,{className:"text-[#013A65] font-semibold",children:"Town Panchayat"}),(0,t.jsx)(N.TableHead,{className:"text-[#013A65] font-semibold",children:"Last Active"}),(0,t.jsx)(N.TableHead,{className:"text-[#013A65] font-semibold",children:"Status"})]})}),(0,t.jsx)(N.TableBody,{children:e.map(e=>(0,t.jsxs)(N.TableRow,{className:"hover:bg-[#F8F8F8]/50",children:[(0,t.jsx)(N.TableCell,{className:"font-medium",children:e.name}),(0,t.jsx)(N.TableCell,{children:e.role}),(0,t.jsx)(N.TableCell,{children:e.zone}),(0,t.jsx)(N.TableCell,{children:e.district}),(0,t.jsx)(N.TableCell,{children:e.townPanchayat}),(0,t.jsx)(N.TableCell,{className:"text-sm text-gray-600",children:e.lastActive}),(0,t.jsx)(N.TableCell,{children:(0,t.jsx)(C.Badge,{variant:"active"===e.status?"default":"secondary",className:"active"===e.status?"bg-green-100 text-green-800 hover:bg-green-100":"bg-gray-100 text-gray-800 hover:bg-gray-100",children:e.status})})]},e.id))})]})})})]})}var P=e.i(65218);function k(){let[e,c]=(0,a.useState)({zone:"all",district:"all",townPanchayat:"all",scheme:"all",component:"all",year:"all",stage:"all"}),[h,x]=(0,a.useState)([]),[g,p]=(0,a.useState)([]),[b,y]=(0,a.useState)(null),[f,v]=(0,a.useState)(!1),[j,N]=(0,a.useState)([]),[C,k]=(0,a.useState)(!1),[A,E]=(0,a.useState)(!1),[F,z]=(0,a.useState)([]),[D,L]=(0,a.useState)([]),[B,M]=(0,a.useState)([]),[V,I]=(0,a.useState)(null);(0,a.useEffect)(()=>{z(m.getZones()),L(m.getDistricts(e.zone)),M(m.getTownPanchayats(e.district))},[e.zone,e.district]),(0,a.useEffect)(()=>{R()},[e]);let R=async()=>{E(!0);try{let[t,a,l]=await Promise.all([m.getMapLocations(e),m.getUserLocations(e),m.getAggregatedStatistics(e)]);x(t),p(a),I(l)}catch(e){(0,P.toast)({title:"Error",description:"Failed to load smart view data",variant:"destructive"})}finally{E(!1)}},W=async e=>{y(e),f&&N(await m.getNearestTownPanchayats(e.id))},H=async()=>{v(!f),!f&&b&&N(await m.getNearestTownPanchayats(b.id))};return(0,t.jsx)(l.DashboardLayout,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-[#013A65] to-[#013A65]/90 rounded-lg py-3 px-6 text-white shadow-lg",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-semibold",children:"Smart View"}),(0,t.jsx)("p",{className:"text-white/80 text-sm mt-1",children:"Interactive map view with location tracking and analytics"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(n.Button,{onClick:()=>k(!C),size:"sm",className:"bg-gradient-to-r from-[#F3B335] to-[#F3B335]/90 hover:from-[#F3B335]/90 hover:to-[#F3B335]/80 text-[#013A65] border-0 shadow-lg hover:shadow-xl transition-all duration-300 h-9 px-4 text-sm font-medium",children:[(0,t.jsx)(i.Users,{className:"h-4 w-4 mr-1.5"}),C?"Hide":"Show"," User Tracking"]}),(0,t.jsxs)(n.Button,{onClick:H,size:"sm",className:"bg-gradient-to-r from-[#F3B335] to-[#F3B335]/90 hover:from-[#F3B335]/90 hover:to-[#F3B335]/80 text-[#013A65] border-0 shadow-lg hover:shadow-xl transition-all duration-300 h-9 px-4 text-sm font-medium",children:[(0,t.jsx)(o.MapPin,{className:"h-4 w-4 mr-1.5"}),f?"Hide":"Show"," Nearest TP"]}),(0,t.jsxs)(n.Button,{onClick:R,disabled:A,size:"sm",className:"bg-white/10 hover:bg-white/20 text-white border border-white/20 h-9 px-4 text-sm font-medium",children:[(0,t.jsx)(d,{className:`h-4 w-4 mr-1.5 ${A?"animate-spin":""}`}),"Refresh"]})]})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-[#EDEEF0] shadow-sm overflow-hidden",children:[(0,t.jsx)("div",{className:"relative z-10 p-4 border-b border-[#EDEEF0] bg-gradient-to-r from-[#F8F8F8] to-[#EDEEF0]",children:(0,t.jsxs)("div",{className:"grid grid-cols-7 gap-3",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(s.Label,{className:"text-sm font-medium text-[#013A65] mb-1.5 block",children:"Zone"}),(0,t.jsxs)(r.Select,{value:e.zone,onValueChange:t=>{c({...e,zone:t,district:"all",townPanchayat:"all"})},children:[(0,t.jsx)(r.SelectTrigger,{className:"h-9 w-full bg-white border-[#EDEEF0] focus:border-[#013A65] focus:ring-[#013A65]/20",children:(0,t.jsx)(r.SelectValue,{})}),(0,t.jsx)(r.SelectContent,{children:F.map(e=>(0,t.jsx)(r.SelectItem,{value:e,children:"all"===e?"All Zones":e},e))})]})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(s.Label,{className:"text-sm font-medium text-[#013A65] mb-1.5 block",children:"District"}),(0,t.jsxs)(r.Select,{value:e.district,onValueChange:t=>{c({...e,district:t,townPanchayat:"all"})},children:[(0,t.jsx)(r.SelectTrigger,{className:"h-9 w-full bg-white border-[#EDEEF0] focus:border-[#013A65] focus:ring-[#013A65]/20",children:(0,t.jsx)(r.SelectValue,{})}),(0,t.jsx)(r.SelectContent,{children:D.map(e=>(0,t.jsx)(r.SelectItem,{value:e,children:"all"===e?"All Districts":e},e))})]})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(s.Label,{className:"text-sm font-medium text-[#013A65] mb-1.5 block",children:"Town Panchayat"}),(0,t.jsxs)(r.Select,{value:e.townPanchayat,onValueChange:t=>c({...e,townPanchayat:t}),children:[(0,t.jsx)(r.SelectTrigger,{className:"h-9 w-full bg-white border-[#EDEEF0] focus:border-[#013A65] focus:ring-[#013A65]/20",children:(0,t.jsx)(r.SelectValue,{})}),(0,t.jsx)(r.SelectContent,{children:B.map(e=>(0,t.jsx)(r.SelectItem,{value:e,children:"all"===e?"All Town Panchayats":e},e))})]})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(s.Label,{className:"text-sm font-medium text-[#013A65] mb-1.5 block",children:"Scheme"}),(0,t.jsxs)(r.Select,{value:e.scheme,onValueChange:t=>c({...e,scheme:t}),children:[(0,t.jsx)(r.SelectTrigger,{className:"h-9 w-full bg-white border-[#EDEEF0] focus:border-[#013A65] focus:ring-[#013A65]/20",children:(0,t.jsx)(r.SelectValue,{})}),(0,t.jsx)(r.SelectContent,{children:m.getSchemes().map(e=>(0,t.jsx)(r.SelectItem,{value:e,children:"all"===e?"All Schemes":e},e))})]})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(s.Label,{className:"text-sm font-medium text-[#013A65] mb-1.5 block",children:"Component"}),(0,t.jsxs)(r.Select,{value:e.component,onValueChange:t=>c({...e,component:t}),children:[(0,t.jsx)(r.SelectTrigger,{className:"h-9 w-full bg-white border-[#EDEEF0] focus:border-[#013A65] focus:ring-[#013A65]/20",children:(0,t.jsx)(r.SelectValue,{})}),(0,t.jsx)(r.SelectContent,{children:m.getComponents().map(e=>(0,t.jsx)(r.SelectItem,{value:e,children:"all"===e?"All Components":e},e))})]})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(s.Label,{className:"text-sm font-medium text-[#013A65] mb-1.5 block",children:"Year"}),(0,t.jsxs)(r.Select,{value:e.year,onValueChange:t=>c({...e,year:t}),children:[(0,t.jsx)(r.SelectTrigger,{className:"h-9 w-full bg-white border-[#EDEEF0] focus:border-[#013A65] focus:ring-[#013A65]/20",children:(0,t.jsx)(r.SelectValue,{})}),(0,t.jsx)(r.SelectContent,{children:m.getYears().map(e=>(0,t.jsx)(r.SelectItem,{value:e,children:"all"===e?"All Years":e},e))})]})]}),(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(s.Label,{className:"text-sm font-medium text-[#013A65] mb-1.5 block",children:"Stage"}),(0,t.jsxs)(r.Select,{value:e.stage,onValueChange:t=>c({...e,stage:t}),children:[(0,t.jsx)(r.SelectTrigger,{className:"h-9 w-full bg-white border-[#EDEEF0] focus:border-[#013A65] focus:ring-[#013A65]/20",children:(0,t.jsx)(r.SelectValue,{})}),(0,t.jsx)(r.SelectContent,{children:m.getStages().map(e=>(0,t.jsx)(r.SelectItem,{value:e,children:"all"===e?"All Stages":e},e))})]})]})]})}),(0,t.jsxs)("div",{className:"relative z-0 bg-[#F8F8F8]",children:[(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)(u,{locations:h,users:C?g:[],nearestLocations:f?j:[],onLocationClick:W,selectedLocation:b})}),V&&(0,t.jsx)("div",{className:"bg-white border-t border-[#EDEEF0] p-4",children:(0,t.jsx)(w,{statistics:V})}),b&&f&&j.length>0&&(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)(S,{locations:j})}),C&&g.length>0&&(0,t.jsx)("div",{className:"p-4",children:(0,t.jsx)(T,{users:g})})]})]})]})})}e.s(["default",()=>k],19475)}]);