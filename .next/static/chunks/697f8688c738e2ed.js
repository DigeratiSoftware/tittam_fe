(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,54970,e=>{"use strict";var a=e.i(45042),t=e.i(97817),i=e.i(53790),s=e.i(98786),l=e.i(75987),r=e.i(73504),n=e.i(53183),o=e.i(16020),d=e.i(70938),c=e.i(1002),m=e.i(32063),p=e.i(79230),u=e.i(490),g=e.i(17089);let h=new class{defaultFields=[{id:"zone",englishName:"Zone",tamilName:"மண்டலம்",englishDescription:"Administrative zone selection",tamilDescription:"நிர்வாக மண்டல தேர்வு",dataType:"dropdown",validation:"Dropdown from M1",isRequired:!0,groupHeading:"Scheme Details",displayOrder:1,category:"default",componentType:"Infrastructure"},{id:"districtName",englishName:"District Name",tamilName:"மாவட்ட பெயர்",englishDescription:"District selection",tamilDescription:"மாவட்ட தேர்வு",dataType:"dropdown",validation:"Dropdown from M2",isRequired:!0,groupHeading:"Scheme Details",displayOrder:2,category:"default",componentType:"Infrastructure"},{id:"townPanchayatName",englishName:"Town Panchayat Name",tamilName:"நகர பஞ்சாயத்து பெயர்",englishDescription:"Town panchayat selection",tamilDescription:"நகர பஞ்சாயத்து தேர்வு",dataType:"dropdown",validation:"Dropdown from M3",isRequired:!0,groupHeading:"Scheme Details",displayOrder:3,category:"default",componentType:"Infrastructure"},{id:"schemeName",englishName:"Scheme Name",tamilName:"திட்ட பெயர்",englishDescription:"Scheme selection",tamilDescription:"திட்ட தேர்வு",dataType:"dropdown",validation:"Dropdown from M4",isRequired:!0,groupHeading:"Scheme Details",displayOrder:4,category:"default",componentType:"Infrastructure"},{id:"schemeAbbreviation",englishName:"Scheme Abbreviation",tamilName:"திட்ட சுருக்கம்",englishDescription:"Auto-generated scheme code",tamilDescription:"தானாக உருவாக்கப்பட்ட திட்ட குறியீடு",dataType:"byCode",validation:"By Code",isRequired:!0,groupHeading:"Scheme Details",displayOrder:5,category:"default",componentType:"Infrastructure"},{id:"year",englishName:"Year",tamilName:"ஆண்டு",englishDescription:"Implementation year",tamilDescription:"செயல்படுத்தும் ஆண்டு",dataType:"dropdown",validation:"Dropdown from M9",isRequired:!0,groupHeading:"Scheme Details",displayOrder:6,category:"default",componentType:"Infrastructure"},{id:"component",englishName:"Component",tamilName:"கூறு",englishDescription:"Component selection",tamilDescription:"கூறு தேர்வு",dataType:"dropdown",validation:"Dropdown from M7",isRequired:!0,groupHeading:"Scheme Details",displayOrder:7,category:"default",componentType:"Infrastructure"},{id:"implementationAgency",englishName:"Implementation Agency",tamilName:"செயல்படுத்தும் நிறுவனம்",englishDescription:"Agency code generation",tamilDescription:"நிறுவன குறியீடு உருவாக்கம்",dataType:"byCode",validation:"By Code",isRequired:!0,groupHeading:"Scheme Details",displayOrder:8,category:"default",componentType:"Infrastructure"},{id:"schemeFundingTamil",englishName:"Scheme Funding Tamil",tamilName:"திட்ட நிதி தமிழ்",englishDescription:"Funding source in Tamil",tamilDescription:"தமிழில் நிதி ஆதாரம்",dataType:"dropdown",validation:"Dropdown from M7",isRequired:!0,groupHeading:"Scheme Details",displayOrder:9,category:"default",componentType:"Infrastructure"},{id:"announcementScheme",englishName:"Announcement Scheme",tamilName:"அறிவிப்பு திட்டம்",englishDescription:"Is this an announcement scheme?",tamilDescription:"இது அறிவிப்பு திட்டமா?",dataType:"optionButton",validation:"Yes/No",isRequired:!0,options:["Yes","No"],groupHeading:"Scheme Details",displayOrder:10,category:"default",componentType:"Infrastructure"},{id:"flagshipScheme",englishName:"Flagship Scheme",tamilName:"முக்கிய திட்டம்",englishDescription:"Is this a flagship scheme?",tamilDescription:"இது முக்கிய திட்டமா?",dataType:"optionButton",validation:"Yes/No",isRequired:!0,options:["Yes","No"],groupHeading:"Scheme Details",displayOrder:11,category:"default",componentType:"Infrastructure"},{id:"wardNo",englishName:"Ward No",tamilName:"வார்டு எண்",englishDescription:"Ward number selection",tamilDescription:"வார்டு எண் தேர்வு",dataType:"dropdown",validation:"Dropdown from M3",isRequired:!0,groupHeading:"Work Details",displayOrder:12,category:"default",componentType:"Infrastructure"},{id:"roadTypeEnglish",englishName:"Road Type English",tamilName:"சாலை வகை ஆங்கிலம்",englishDescription:"Type of road in English",tamilDescription:"ஆங்கிலத்தில் சாலை வகை",dataType:"dropdown",validation:"Dropdown",isRequired:!0,groupHeading:"Work Details",displayOrder:13,category:"default",componentType:"Infrastructure"},{id:"roadTypeTamil",englishName:"Road Type Tamil",tamilName:"சாலை வகை தமிழ்",englishDescription:"Type of road in Tamil",tamilDescription:"தமிழில் சாலை வகை",dataType:"dropdown",validation:"Dropdown",isRequired:!0,groupHeading:"Work Details",displayOrder:14,category:"default",componentType:"Infrastructure"},{id:"workNameEnglish",englishName:"Work Name English",tamilName:"வேலை பெயர் ஆங்கிலம்",englishDescription:"Name of the work in English",tamilDescription:"ஆங்கிலத்தில் வேலையின் பெயர்",dataType:"textbox",validation:"Minimum length 10, Maximum 700",isRequired:!0,groupHeading:"Work Details",displayOrder:15,category:"default",componentType:"Infrastructure"},{id:"workNameTamil",englishName:"Work Name Tamil",tamilName:"வேலை பெயர் தமிழ்",englishDescription:"Name of the work in Tamil",tamilDescription:"தமிழில் வேலையின் பெயர்",dataType:"textbox",validation:"Minimum length 10, Maximum 700",isRequired:!0,groupHeading:"Work Details",displayOrder:16,category:"default",componentType:"Infrastructure"},{id:"noOfRoadsPackage",englishName:"No of Roads Package",tamilName:"சாலைகள் தொகுப்பு எண்ணிக்கை",englishDescription:"Number of roads in package",tamilDescription:"தொகுப்பில் உள்ள சாலைகளின் எண்ணிக்கை",dataType:"numeric",validation:"1 to 100; if >1 then open subform (enter road names, length)",isRequired:!0,groupHeading:"Work Details",displayOrder:17,category:"default",componentType:"Infrastructure"},{id:"lengthKm",englishName:"Length KM",tamilName:"நீளம் கி.மீ",englishDescription:"Length in kilometers",tamilDescription:"கிலோமீட்டரில் நீளம்",dataType:"numeric",validation:"0 to 90, up to 3 decimal places; sum auto from subform",isRequired:!0,groupHeading:"Work Details",displayOrder:18,category:"default",componentType:"Infrastructure"},{id:"estimateRupees",englishName:"Estimate Rupees",tamilName:"மதிப்பீடு ரூபாய்",englishDescription:"Estimated cost in rupees",tamilDescription:"ரூபாயில் மதிப்பிடப்பட்ட செலவு",dataType:"numeric",validation:"Min 10000, no max limit",isRequired:!0,groupHeading:"Work Details",displayOrder:19,category:"default",componentType:"Infrastructure"},{id:"administrativeSanctionNo",englishName:"Administrative Sanction No",tamilName:"நிர்வாக அனுமதி எண்",englishDescription:"Administrative sanction number",tamilDescription:"நிர்வாக அனுமதி எண்",dataType:"textbox",validation:"Minimum length 6, Maximum 100",isRequired:!0,groupHeading:"A.S. Details",displayOrder:20,category:"default",componentType:"Infrastructure"},{id:"administrativeSanctionDate",englishName:"Administrative Sanction Date",tamilName:"நிர்வாக அனுமதி தேதி",englishDescription:"Administrative sanction date",tamilDescription:"நிர்வாக அனுமதி தேதி",dataType:"datePicker",validation:"Future dates not allowed",isRequired:!0,groupHeading:"A.S. Details",displayOrder:21,category:"default",componentType:"Infrastructure"},{id:"technicalSanctionNo",englishName:"Technical Sanction No",tamilName:"தொழில்நுட்ப அனுமதி எண்",englishDescription:"Technical sanction number",tamilDescription:"தொழில்நுட்ப அனுமதி எண்",dataType:"textbox",validation:"Minimum length 6, Maximum 100",isRequired:!0,groupHeading:"T.S. Details",displayOrder:22,category:"default",componentType:"Infrastructure"},{id:"technicalSanctionDate",englishName:"Technical Sanction Date",tamilName:"தொழில்நுட்ப அனுமதி தேதி",englishDescription:"Technical sanction date",tamilDescription:"தொழில்நுட்ப அனுமதி தேதி",dataType:"datePicker",validation:"Future dates not allowed",isRequired:!0,groupHeading:"T.S. Details",displayOrder:23,category:"default",componentType:"Infrastructure"},{id:"tenderDate",englishName:"Tender Date",tamilName:"டெண்டர் தேதி",englishDescription:"Tender submission date",tamilDescription:"டெண்டர் சமர்ப்பிப்பு தேதி",dataType:"datePicker",validation:"Future dates allowed",isRequired:!0,groupHeading:"Tender Details",displayOrder:24,category:"default",componentType:"Infrastructure"},{id:"contractorGstNo",englishName:"Contractor GST No",tamilName:"ஒப்பந்ததாரர் ஜிஎஸ்டி எண்",englishDescription:"Contractor GST number search",tamilDescription:"ஒப்பந்ததாரர் ஜிஎஸ்டி எண் தேடல்",dataType:"searchBox",validation:"Auto show from Contractor module",isRequired:!0,groupHeading:"Tender Details",displayOrder:25,category:"default",componentType:"Infrastructure"},{id:"contractorName",englishName:"Contractor Name",tamilName:"ஒப்பந்ததாரர் பெயர்",englishDescription:"Contractor name lookup",tamilDescription:"ஒப்பந்ததாரர் பெயர் தேடல்",dataType:"vlookup",validation:"Based on GST No",isRequired:!0,groupHeading:"Tender Details",displayOrder:26,category:"default",componentType:"Infrastructure"},{id:"agreementDate",englishName:"Agreement Date",tamilName:"ஒப்பந்த தேதி",englishDescription:"Agreement signing date",tamilDescription:"ஒப்பந்த கையெழுத்து தேதி",dataType:"datePicker",validation:"Future dates not allowed",isRequired:!0,groupHeading:"Tender Details",displayOrder:27,category:"default",componentType:"Infrastructure"},{id:"agreementDurationValue",englishName:"Agreement Duration Value",tamilName:"ஒப்பந்த கால அளவு மதிப்பு",englishDescription:"Duration value for agreement",tamilDescription:"ஒப்பந்தத்திற்கான கால அளவு மதிப்பு",dataType:"numeric",validation:"Min 1, Max 100",isRequired:!0,groupHeading:"Tender Details",displayOrder:28,category:"default",componentType:"Infrastructure"},{id:"agreementDurationUnit",englishName:"Agreement Duration Unit",tamilName:"ஒப்பந்த கால அளவு அலகு",englishDescription:"Duration unit for agreement",tamilDescription:"ஒப்பந்தத்திற்கான கால அளவு அலகு",dataType:"dropdown",validation:"Months, Days, Years",isRequired:!0,options:["Months","Days","Years"],groupHeading:"Tender Details",displayOrder:29,category:"default",componentType:"Infrastructure"},{id:"workOrderDate",englishName:"Work Order Date",tamilName:"வேலை ஆர்டர் தேதி",englishDescription:"Work order issue date",tamilDescription:"வேலை ஆர்டர் வழங்கிய தேதி",dataType:"datePicker",validation:"Future dates not allowed",isRequired:!0,groupHeading:"Tender Details",displayOrder:30,category:"default",componentType:"Infrastructure"},{id:"stage",englishName:"Stage",tamilName:"நிலை",englishDescription:"Current work stage",tamilDescription:"தற்போதைய வேலை நிலை",dataType:"dropdown",validation:"Dropdown from M8",isRequired:!0,groupHeading:"Work Progress",displayOrder:31,category:"default",componentType:"Infrastructure"},{id:"progressPercent",englishName:"Progress Percent",tamilName:"முன்னேற்ற சதவீதம்",englishDescription:"Work progress percentage",tamilDescription:"வேலை முன்னேற்ற சதவீதம்",dataType:"dropdown",validation:"Based on M8",isRequired:!0,groupHeading:"Work Progress",displayOrder:32,category:"default",componentType:"Infrastructure"},{id:"presentStatus",englishName:"Present Status",tamilName:"தற்போதைய நிலை",englishDescription:"Current status description",tamilDescription:"தற்போதைய நிலை விளக்கம்",dataType:"textbox",validation:"Min length 6, Max length 200",isRequired:!0,groupHeading:"Work Progress",displayOrder:33,category:"default",componentType:"Infrastructure"},{id:"probableCompletionDate",englishName:"Probable Completion Date",tamilName:"சாத்தியமான முடிவு தேதி",englishDescription:"Expected completion date",tamilDescription:"எதிர்பார்க்கப்படும் முடிவு தேதி",dataType:"datePicker",validation:"Only future dates allowed",isRequired:!0,groupHeading:"Work Progress",displayOrder:34,category:"default",componentType:"Infrastructure"},{id:"fundReleasedRupees",englishName:"Fund Released Rupees",tamilName:"வெளியிடப்பட்ட நிதி ரூபாய்",englishDescription:"Fund released amount",tamilDescription:"வெளியிடப்பட்ட நிதி தொகை",dataType:"subForm",validation:"Separate master",isRequired:!0,groupHeading:"Fund Details",displayOrder:35,category:"default",componentType:"Infrastructure"},{id:"expenditureRupees",englishName:"Expenditure Rupees",tamilName:"செலவு ரூபாய்",englishDescription:"Total expenditure amount",tamilDescription:"மொத்த செலவு தொகை",dataType:"subForm",validation:"Separate master",isRequired:!0,groupHeading:"Fund Details",displayOrder:36,category:"default",componentType:"Infrastructure"},{id:"balanceOnFundReleased",englishName:"Balance On Fund Released",tamilName:"வெளியிடப்பட்ட நிதியில் இருப்பு",englishDescription:"Balance from released funds",tamilDescription:"வெளியிடப்பட்ட நிதியிலிருந்து இருப்பு",dataType:"autoCalculation",validation:"Col 30 - Col 31",isRequired:!1,groupHeading:"Fund Details",displayOrder:37,category:"default",componentType:"Infrastructure"},{id:"balanceOnEstimate",englishName:"Balance On Estimate",tamilName:"மதிப்பீட்டில் இருப்பு",englishDescription:"Balance from estimate",tamilDescription:"மதிப்பீட்டிலிருந்து இருப்பு",dataType:"autoCalculation",validation:"Col 14 - Col 31",isRequired:!1,groupHeading:"Fund Details",displayOrder:38,category:"default",componentType:"Infrastructure"},{id:"expenditurePercent",englishName:"Expenditure Percent",tamilName:"செலவு சதவீதம்",englishDescription:"Expenditure percentage",tamilDescription:"செலவு சதவீதம்",dataType:"autoCalculation",validation:"Col 31 / Col 14 * 100",isRequired:!1,groupHeading:"Fund Details",displayOrder:39,category:"default",componentType:"Infrastructure"},{id:"completionReport",englishName:"Completion Report",tamilName:"முடிவு அறிக்கை",englishDescription:"Work completion report",tamilDescription:"வேலை முடிவு அறிக்கை",dataType:"subFormYesNo",validation:"Separate master",isRequired:!0,groupHeading:"Completion Details",displayOrder:40,category:"default",componentType:"Infrastructure"},{id:"uccrDetails",englishName:"UCCR Details",tamilName:"யுசிசிஆர் விவரங்கள்",englishDescription:"UCCR submission details",tamilDescription:"யுசிசிஆர் சமர்ப்பிப்பு விவரங்கள்",dataType:"subForm",validation:"Separate master",isRequired:!0,groupHeading:"Completion Details",displayOrder:41,category:"default",componentType:"Infrastructure"},{id:"workPhotosUrl",englishName:"Work Photos URL",tamilName:"வேலை புகைப்படங்கள் யூஆர்எல்",englishDescription:"Work progress photos",tamilDescription:"வேலை முன்னேற்ற புகைப்படங்கள்",dataType:"cameraWithGps",validation:"Up to 4 photos, 15MB each, GPS & date tag",isRequired:!0,groupHeading:"Completion Details",displayOrder:42,category:"default",componentType:"Infrastructure"},{id:"geoLocation",englishName:"Geo Location",tamilName:"புவியியல் இடம்",englishDescription:"Geographic location coordinates",tamilDescription:"புவியியல் இட ஆயத்தொலைவுகள்",dataType:"map",validation:"Select from map or paste",isRequired:!0,groupHeading:"Completion Details",displayOrder:43,category:"default",componentType:"Infrastructure"},{id:"pendingReason",englishName:"Pending Reason",tamilName:"நிலுவை காரணம்",englishDescription:"Reason for pending status",tamilDescription:"நிலுவை நிலைக்கான காரணம்",dataType:"textbox",validation:"Min length 6, Max 200",isRequired:!1,groupHeading:"Completion Details",displayOrder:44,category:"default",componentType:"Infrastructure"},{id:"workCreatedBy",englishName:"Work Created By",tamilName:"வேலையை உருவாக்கியவர்",englishDescription:"User who created the work",tamilDescription:"வேலையை உருவாக்கிய பயனர்",dataType:"textbox",validation:"Future reference",isRequired:!1,groupHeading:"Meta",displayOrder:45,category:"default",componentType:"Infrastructure"}];simpleFields=[{group:"Scheme Details",name:"zone",type:"dropdown",validation:"Dropdown from M1"},{group:"Scheme Details",name:"districtName",type:"dropdown",validation:"Dropdown from M2"},{group:"Scheme Details",name:"townPanchayatName",type:"dropdown",validation:"Dropdown from M3"},{group:"Scheme Details",name:"schemeName",type:"dropdown",validation:"Dropdown from M4"},{group:"Scheme Details",name:"schemeAbbreviation",type:"byCode",validation:"By Code"},{group:"Scheme Details",name:"year",type:"dropdown",validation:"Dropdown from M9"},{group:"Scheme Details",name:"component",type:"dropdown",validation:"Dropdown from M7"},{group:"Scheme Details",name:"implementationAgency",type:"byCode",validation:"By Code"},{group:"Scheme Details",name:"schemeFundingTamil",type:"dropdown",validation:"Dropdown from M7"},{group:"Scheme Details",name:"announcementScheme",type:"optionButton",validation:"Yes/No"},{group:"Scheme Details",name:"flagshipScheme",type:"optionButton",validation:"Yes/No"},{group:"Work Details",name:"wardNo",type:"dropdown",validation:"Dropdown from M3"},{group:"Work Details",name:"roadTypeEnglish",type:"dropdown",validation:"Dropdown"},{group:"Work Details",name:"roadTypeTamil",type:"dropdown",validation:"Dropdown"},{group:"Work Details",name:"workNameEnglish",type:"textbox",validation:"Minimum length 10, Maximum 700"},{group:"Work Details",name:"workNameTamil",type:"textbox",validation:"Minimum length 10, Maximum 700"},{group:"Work Details",name:"noOfRoadsPackage",type:"numeric",validation:"1 to 100; if >1 then open subform (enter road names, length)"},{group:"Work Details",name:"lengthKm",type:"numeric",validation:"0 to 90, up to 3 decimal places; sum auto from subform"},{group:"Work Details",name:"estimateRupees",type:"numeric",validation:"Min 10000, no max limit"},{group:"A.S. Details",name:"administrativeSanctionNo",type:"textbox",validation:"Minimum length 6, Maximum 100"},{group:"A.S. Details",name:"administrativeSanctionDate",type:"datePicker",validation:"Future dates not allowed"},{group:"T.S. Details",name:"technicalSanctionNo",type:"textbox",validation:"Minimum length 6, Maximum 100"},{group:"T.S. Details",name:"technicalSanctionDate",type:"datePicker",validation:"Future dates not allowed"},{group:"Tender Details",name:"tenderDate",type:"datePicker",validation:"Future dates allowed"},{group:"Tender Details",name:"contractorGstNo",type:"searchBox",validation:"Auto show from Contractor module"},{group:"Tender Details",name:"contractorName",type:"vlookup",validation:"Based on GST No"},{group:"Tender Details",name:"agreementDate",type:"datePicker",validation:"Future dates not allowed"},{group:"Tender Details",name:"agreementDurationValue",type:"numeric",validation:"Min 1, Max 100"},{group:"Tender Details",name:"agreementDurationUnit",type:"dropdown",validation:"Months, Days, Years"},{group:"Tender Details",name:"workOrderDate",type:"datePicker",validation:"Future dates not allowed"},{group:"Work Progress",name:"stage",type:"dropdown",validation:"Dropdown from M8"},{group:"Work Progress",name:"progressPercent",type:"dropdown",validation:"Based on M8"},{group:"Work Progress",name:"presentStatus",type:"textbox",validation:"Min length 6, Max length 200"},{group:"Work Progress",name:"probableCompletionDate",type:"datePicker",validation:"Only future dates allowed"},{group:"Fund Details",name:"fundReleasedRupees",type:"subForm",validation:"Separate master"},{group:"Fund Details",name:"expenditureRupees",type:"subForm",validation:"Separate master"},{group:"Fund Details",name:"balanceOnFundReleased",type:"autoCalculation",validation:"Col 30 - Col 31"},{group:"Fund Details",name:"balanceOnEstimate",type:"autoCalculation",validation:"Col 14 - Col 31"},{group:"Fund Details",name:"expenditurePercent",type:"autoCalculation",validation:"Col 31 / Col 14 * 100"},{group:"Completion Details",name:"completionReport",type:"subFormYesNo",validation:"Separate master"},{group:"Completion Details",name:"uccrDetails",type:"subForm",validation:"Separate master"},{group:"Completion Details",name:"workPhotosUrl",type:"cameraWithGps",validation:"Up to 4 photos, 15MB each, GPS & date tag"},{group:"Completion Details",name:"geoLocation",type:"map",validation:"Select from map or paste"},{group:"Completion Details",name:"pendingReason",type:"textbox",validation:"Min length 6, Max 200"},{group:"Meta",name:"workCreatedBy",type:"textbox",validation:"Future reference"}];async getDefaultFieldsByComponent(e,a="default"){return await new Promise(e=>setTimeout(e,500)),Object.entries(this.defaultFields.filter(t=>t.componentType===e&&t.category===a).reduce((e,a)=>(e[a.groupHeading]||(e[a.groupHeading]=[]),e[a.groupHeading].push(a),e),{})).map(([e,a])=>({heading:e,fields:a.sort((e,a)=>e.displayOrder-a.displayOrder)}))}async addCustomField(e){await new Promise(e=>setTimeout(e,300));let a={...e,id:`custom_${Date.now()}`,category:"custom"};return this.defaultFields.push(a),a}validateField(e,a){let t=[];if(e.isRequired&&(!a||""===a.toString().trim())&&t.push(`${e.englishName} is required`),e.validation&&a){for(let i of e.validation.split("|"))if("required"!==i){if(i.startsWith("min:")){let s=Number.parseInt(i.split(":")[1]);"string"===e.dataType&&a.toString().length<s?t.push(`${e.englishName} must be at least ${s} characters`):"number"===e.dataType&&Number.parseFloat(a)<s&&t.push(`${e.englishName} must be at least ${s}`)}if(i.startsWith("max:")){let s=Number.parseInt(i.split(":")[1]);"string"===e.dataType&&a.toString().length>s?t.push(`${e.englishName} must not exceed ${s} characters`):"number"===e.dataType&&Number.parseFloat(a)>s&&t.push(`${e.englishName} must not exceed ${s}`)}"email"!==i||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a)||t.push(`${e.englishName} must be a valid email address`),"numeric"===i&&isNaN(Number.parseFloat(a))&&t.push(`${e.englishName} must be a number`),"date"===i&&isNaN(Date.parse(a))&&t.push(`${e.englishName} must be a valid date`)}}return{isValid:0===t.length,errors:t}}async getSimpleFieldsByComponent(e){return(await new Promise(e=>setTimeout(e,500)),"Infrastructure"===e)?this.simpleFields:[]}};var x=e.i(31737),b=e.i(95876),y=e.i(86541),f=e.i(44073),N=e.i(45634),v=e.i(38706),D=e.i(39197),j=e.i(93456),T=e.i(92360),w=e.i(40478),k=e.i(20648),S=e.i(61808);let C=[{value:"string",label:"Text (String)",icon:T.Type},{value:"number",label:"Number",icon:D.Hash},{value:"email",label:"Email",icon:T.Type},{value:"phone",label:"Phone Number",icon:T.Type},{value:"date",label:"Date",icon:j.Calendar},{value:"boolean",label:"Boolean (Yes/No)",icon:T.Type},{value:"textarea",label:"Long Text (Textarea)",icon:o.FileText},{value:"attachment",label:"File Attachment",icon:w.Paperclip}],F=[{value:"pdf",label:"PDF Documents (.pdf)"},{value:"doc",label:"Word Documents (.doc, .docx)"},{value:"xls",label:"Excel Files (.xls, .xlsx)"},{value:"ppt",label:"PowerPoint (.ppt, .pptx)"},{value:"jpg",label:"JPEG Images (.jpg, .jpeg)"},{value:"png",label:"PNG Images (.png)"},{value:"gif",label:"GIF Images (.gif)"},{value:"txt",label:"Text Files (.txt)"},{value:"zip",label:"ZIP Archives (.zip)"},{value:"mp4",label:"MP4 Videos (.mp4)"},{value:"mp3",label:"MP3 Audio (.mp3)"},{value:"csv",label:"CSV Files (.csv)"}];function R({open:e,onOpenChange:s,onFieldCreated:r,componentId:n,componentName:o}){let{user:d}=(0,S.useAuth)(),[c,m]=(0,t.useState)(!1),[p,u]=(0,t.useState)({componentId:n,englishName:"",englishDescription:"",tamilName:"",tamilDescription:"",dataType:"",validation:"",isRequired:!1,createdBy:d?.name||"Super Admin"}),[h,D]=(0,t.useState)([]);t.default.useEffect(()=>{u(e=>({...e,componentId:n}))},[n]);let j=async e=>{e.preventDefault(),m(!0);try{let e="attachment"===p.dataType&&h.length>0?`allowedTypes:${h.join(",")}`:"",a={...p,validation:e||p.validation};await g.fieldService.createField(a),r(),u({componentId:n,englishName:"",englishDescription:"",tamilName:"",tamilDescription:"",dataType:"",validation:"",isRequired:!1,createdBy:d?.name||"Super Admin"}),D([])}catch(e){console.error("Failed to create field:",e)}finally{m(!1)}},T=(e,a)=>{u(t=>({...t,[e]:a}))};return(0,a.jsx)(x.Dialog,{open:e,onOpenChange:s,children:(0,a.jsxs)(x.DialogContent,{className:"sm:max-w-[900px] max-h-[95vh] overflow-y-auto bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 border-0 shadow-2xl backdrop-blur-sm",onPointerDownOutside:e=>e.preventDefault(),onEscapeKeyDown:e=>e.preventDefault(),children:[(0,a.jsxs)(x.DialogHeader,{className:"pb-4 border-b border-slate-200/50 dark:border-slate-700/50",children:[(0,a.jsx)(x.DialogTitle,{className:"text-xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 dark:from-slate-100 dark:to-slate-300 bg-clip-text text-transparent",children:"Create New Field"}),(0,a.jsxs)(x.DialogDescription,{className:"text-sm text-slate-600 dark:text-slate-400",children:["Add a new field to ",(0,a.jsx)("strong",{className:"text-slate-800 dark:text-slate-200",children:o})," with data type and validation rules"]})]}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-gradient-to-br from-white/80 to-slate-50/80 dark:from-slate-800/80 dark:to-slate-900/80 rounded-lg border border-slate-200/50 dark:border-slate-700/50 backdrop-blur-sm shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold flex items-center gap-2 text-slate-800 dark:text-slate-200",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),"English Details"]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(y.Label,{htmlFor:"englishName",className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"Field Name *"}),(0,a.jsx)(b.Input,{id:"englishName",value:p.englishName,onChange:e=>T("englishName",e.target.value),placeholder:"Enter English field name",className:"h-8 text-sm",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(y.Label,{htmlFor:"englishDescription",className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"Description *"}),(0,a.jsx)(f.Textarea,{id:"englishDescription",value:p.englishDescription,onChange:e=>T("englishDescription",e.target.value),placeholder:"Enter English description",rows:3,className:"resize-none text-sm",required:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-gradient-to-br from-white/80 to-slate-50/80 dark:from-slate-800/80 dark:to-slate-900/80 rounded-lg border border-slate-200/50 dark:border-slate-700/50 backdrop-blur-sm shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold flex items-center gap-2 text-slate-800 dark:text-slate-200",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Tamil Details"]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(y.Label,{htmlFor:"tamilName",className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"Field Name *"}),(0,a.jsx)(b.Input,{id:"tamilName",value:p.tamilName,onChange:e=>T("tamilName",e.target.value),placeholder:"Enter Tamil field name",className:"h-8 text-sm",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(y.Label,{htmlFor:"tamilDescription",className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"Description *"}),(0,a.jsx)(f.Textarea,{id:"tamilDescription",value:p.tamilDescription,onChange:e=>T("tamilDescription",e.target.value),placeholder:"Enter Tamil description",rows:3,className:"resize-none text-sm",required:!0})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-gradient-to-br from-white/80 to-slate-50/80 dark:from-slate-800/80 dark:to-slate-900/80 rounded-lg border border-slate-200/50 dark:border-slate-700/50 backdrop-blur-sm shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold flex items-center gap-2 text-slate-800 dark:text-slate-200",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full"}),"Field Configuration"]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(y.Label,{htmlFor:"dataType",className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"Data Type *"}),(0,a.jsxs)(l.Select,{value:p.dataType,onValueChange:e=>T("dataType",e),children:[(0,a.jsx)(l.SelectTrigger,{className:"h-8 text-sm",children:(0,a.jsx)(l.SelectValue,{placeholder:"Select data type"})}),(0,a.jsx)(l.SelectContent,{children:C.map(e=>{let t=e.icon;return(0,a.jsx)(l.SelectItem,{value:e.value,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(t,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"text-sm",children:e.label})]})},e.value)})})]})]}),"attachment"===p.dataType?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y.Label,{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"Allowed File Types *"}),(0,a.jsxs)(l.Select,{onValueChange:e=>{h.includes(e)||D([...h,e])},children:[(0,a.jsx)(l.SelectTrigger,{className:"h-8 text-sm",children:(0,a.jsx)(l.SelectValue,{placeholder:"Select allowed file types"})}),(0,a.jsx)(l.SelectContent,{children:F.filter(e=>!h.includes(e.value)).map(e=>(0,a.jsx)(l.SelectItem,{value:e.value,children:(0,a.jsx)("span",{className:"text-sm",children:e.label})},e.value))})]})]}),h.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y.Label,{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"Selected File Types"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:h.map(e=>{let t=F.find(a=>a.value===e);return(0,a.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded-md text-xs",children:[(0,a.jsx)("span",{children:t?.label}),(0,a.jsx)("button",{type:"button",onClick:()=>{D(h.filter(a=>a!==e))},className:"hover:bg-blue-200 dark:hover:bg-blue-800/50 rounded-full p-0.5",children:(0,a.jsx)(k.X,{className:"h-3 w-3"})})]},e)})})]})]}):null,(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-white/60 dark:bg-slate-800/60 rounded-md border border-slate-200/50 dark:border-slate-700/50",children:[(0,a.jsx)(N.Checkbox,{id:"isRequired",checked:p.isRequired,onCheckedChange:e=>T("isRequired",!!e)}),(0,a.jsx)(y.Label,{htmlFor:"isRequired",className:"text-xs font-medium cursor-pointer text-slate-700 dark:text-slate-300",children:"This field is required"})]})]}),(0,a.jsxs)(x.DialogFooter,{className:"pt-4 border-t border-slate-200/50 dark:border-slate-700/50",children:[(0,a.jsx)(i.Button,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:c,size:"sm",className:"text-sm",children:"Cancel"}),(0,a.jsx)(i.Button,{type:"submit",disabled:c,size:"sm",className:"text-sm",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Loader2,{className:"mr-1.5 h-3 w-3 animate-spin"}),"Creating..."]}):"Create Field"})]})]})]})})}var I=e.i(65218);let q=[{value:"string",label:"Text (String)",icon:T.Type},{value:"number",label:"Number",icon:D.Hash},{value:"email",label:"Email",icon:T.Type},{value:"phone",label:"Phone Number",icon:T.Type},{value:"date",label:"Date",icon:j.Calendar},{value:"boolean",label:"Boolean (Yes/No)",icon:T.Type},{value:"textarea",label:"Long Text (Textarea)",icon:o.FileText},{value:"attachment",label:"File Attachment",icon:w.Paperclip}],P=[{value:"pdf",label:"PDF Documents (.pdf)"},{value:"doc",label:"Word Documents (.doc, .docx)"},{value:"xls",label:"Excel Files (.xls, .xlsx)"},{value:"ppt",label:"PowerPoint (.ppt, .pptx)"},{value:"jpg",label:"JPEG Images (.jpg, .jpeg)"},{value:"png",label:"PNG Images (.png)"},{value:"gif",label:"GIF Images (.gif)"},{value:"txt",label:"Text Files (.txt)"},{value:"zip",label:"ZIP Archives (.zip)"},{value:"mp4",label:"MP4 Videos (.mp4)"},{value:"mp3",label:"MP3 Audio (.mp3)"},{value:"csv",label:"CSV Files (.csv)"}];function O({open:e,onOpenChange:s,onFieldUpdated:r,field:n}){let[o,d]=(0,t.useState)({englishName:"",tamilName:"",englishDescription:"",tamilDescription:"",dataType:"",validation:"",isRequired:!1}),[c,m]=(0,t.useState)(!1),[p,u]=(0,t.useState)([]),{toast:h}=(0,I.useToast)();(0,t.useEffect)(()=>{if(n&&(d({englishName:n.englishName,tamilName:n.tamilName,englishDescription:n.englishDescription,tamilDescription:n.tamilDescription,dataType:n.dataType,validation:n.validation||"",isRequired:n.isRequired}),"attachment"===n.dataType&&n.validation)){let e=n.validation.match(/allowedTypes:([^,]+)/);e&&u(e[1].split(","))}},[n]);let D=async e=>{if(e.preventDefault(),n){m(!0);try{let e="attachment"===o.dataType&&p.length>0?`allowedTypes:${p.join(",")}`:"";await g.fieldService.updateField(n.id,{...o,validation:e||o.validation||void 0}),r()}catch(e){h({title:"Error",description:"Failed to update field",variant:"destructive"})}finally{m(!1)}}},j=(e,a)=>{d(t=>({...t,[e]:a}))};return(0,a.jsx)(x.Dialog,{open:e,onOpenChange:s,children:(0,a.jsxs)(x.DialogContent,{className:"sm:max-w-[900px] max-h-[95vh] overflow-y-auto bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 border-0 shadow-2xl backdrop-blur-sm",children:[(0,a.jsxs)(x.DialogHeader,{className:"pb-4 border-b border-slate-200/50 dark:border-slate-700/50",children:[(0,a.jsx)(x.DialogTitle,{className:"text-xl font-bold bg-gradient-to-r from-slate-900 to-slate-700 dark:from-slate-100 dark:to-slate-300 bg-clip-text text-transparent",children:"Edit Field"}),(0,a.jsx)(x.DialogDescription,{className:"text-sm text-slate-600 dark:text-slate-400",children:"Update field information and validation rules"})]}),(0,a.jsxs)("form",{onSubmit:D,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-gradient-to-br from-white/80 to-slate-50/80 dark:from-slate-800/80 dark:to-slate-900/80 rounded-lg border border-slate-200/50 dark:border-slate-700/50 backdrop-blur-sm shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold flex items-center gap-2 text-slate-800 dark:text-slate-200",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"}),"English Details"]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(y.Label,{htmlFor:"englishName",className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"Field Name *"}),(0,a.jsx)(b.Input,{id:"englishName",value:o.englishName,onChange:e=>j("englishName",e.target.value),className:"h-8 text-sm",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(y.Label,{htmlFor:"englishDescription",className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"Description *"}),(0,a.jsx)(f.Textarea,{id:"englishDescription",value:o.englishDescription,onChange:e=>j("englishDescription",e.target.value),rows:3,className:"resize-none text-sm",required:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-gradient-to-br from-white/80 to-slate-50/80 dark:from-slate-800/80 dark:to-slate-900/80 rounded-lg border border-slate-200/50 dark:border-slate-700/50 backdrop-blur-sm shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold flex items-center gap-2 text-slate-800 dark:text-slate-200",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"}),"Tamil Details"]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(y.Label,{htmlFor:"tamilName",className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"Field Name *"}),(0,a.jsx)(b.Input,{id:"tamilName",value:o.tamilName,onChange:e=>j("tamilName",e.target.value),className:"h-8 text-sm",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(y.Label,{htmlFor:"tamilDescription",className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"Description *"}),(0,a.jsx)(f.Textarea,{id:"tamilDescription",value:o.tamilDescription,onChange:e=>j("tamilDescription",e.target.value),rows:3,className:"resize-none text-sm",required:!0})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-gradient-to-br from-white/80 to-slate-50/80 dark:from-slate-800/80 dark:to-slate-900/80 rounded-lg border border-slate-200/50 dark:border-slate-700/50 backdrop-blur-sm shadow-sm",children:[(0,a.jsxs)("h3",{className:"text-sm font-semibold flex items-center gap-2 text-slate-800 dark:text-slate-200",children:[(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full"}),"Field Configuration"]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsx)(y.Label,{htmlFor:"dataType",className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"Data Type *"}),(0,a.jsxs)(l.Select,{value:o.dataType,onValueChange:e=>{j("dataType",e),u([])},children:[(0,a.jsx)(l.SelectTrigger,{className:"h-8 text-sm",children:(0,a.jsx)(l.SelectValue,{placeholder:"Select data type"})}),(0,a.jsx)(l.SelectContent,{children:q.map(e=>{let t=e.icon;return(0,a.jsx)(l.SelectItem,{value:e.value,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(t,{className:"h-3 w-3"}),(0,a.jsx)("span",{className:"text-sm",children:e.label})]})},e.value)})})]})]}),"attachment"===o.dataType?(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y.Label,{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"Allowed File Types *"}),(0,a.jsxs)(l.Select,{onValueChange:e=>{p.includes(e)||u([...p,e])},children:[(0,a.jsx)(l.SelectTrigger,{className:"h-8 text-sm",children:(0,a.jsx)(l.SelectValue,{placeholder:"Select allowed file types"})}),(0,a.jsx)(l.SelectContent,{children:P.filter(e=>!p.includes(e.value)).map(e=>(0,a.jsx)(l.SelectItem,{value:e.value,children:(0,a.jsx)("span",{className:"text-sm",children:e.label})},e.value))})]})]}),p.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(y.Label,{className:"text-xs font-medium text-slate-700 dark:text-slate-300",children:"Selected File Types"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:p.map(e=>{let t=P.find(a=>a.value===e);return(0,a.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-200 rounded-md text-xs",children:[(0,a.jsx)("span",{children:t?.label}),(0,a.jsx)("button",{type:"button",onClick:()=>{u(p.filter(a=>a!==e))},className:"hover:bg-blue-200 dark:hover:bg-blue-800/50 rounded-full p-0.5",children:(0,a.jsx)(k.X,{className:"h-3 w-3"})})]},e)})})]})]}):null,(0,a.jsxs)("div",{className:"flex items-center space-x-2 p-3 bg-white/60 dark:bg-slate-800/60 rounded-md border border-slate-200/50 dark:border-slate-700/50",children:[(0,a.jsx)(N.Checkbox,{id:"isRequired",checked:o.isRequired,onCheckedChange:e=>j("isRequired",!!e)}),(0,a.jsx)(y.Label,{htmlFor:"isRequired",className:"text-xs font-medium cursor-pointer text-slate-700 dark:text-slate-300",children:"This field is required"})]})]}),(0,a.jsxs)(x.DialogFooter,{className:"pt-4 border-t border-slate-200/50 dark:border-slate-700/50",children:[(0,a.jsx)(i.Button,{type:"button",variant:"outline",onClick:()=>s(!1),disabled:c,size:"sm",className:"text-sm",children:"Cancel"}),(0,a.jsx)(i.Button,{type:"submit",disabled:c,size:"sm",className:"text-sm",children:c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(v.Loader2,{className:"mr-1.5 h-3 w-3 animate-spin"}),"Updating..."]}):"Update Field"})]})]})]})})}var A=e.i(7437),B=e.i(47206),M=e.i(74536),H=e.i(73261),E=e.i(6279),W=e.i(69194),L=e.i(49572),V=e.i(48298),$=e.i(2045),G="Collapsible",[z,U]=(0,M.createContextScope)(G),[Y,K]=z(G),Z=t.forwardRef((e,i)=>{let{__scopeCollapsible:s,open:l,defaultOpen:r,disabled:n,onOpenChange:o,...d}=e,[c=!1,m]=(0,H.useControllableState)({prop:l,defaultProp:r,onChange:o});return(0,a.jsx)(Y,{scope:s,disabled:n,contentId:(0,$.useId)(),open:c,onOpenToggle:t.useCallback(()=>m(e=>!e),[m]),children:(0,a.jsx)(L.Primitive.div,{"data-state":ea(c),"data-disabled":n?"":void 0,...d,ref:i})})});Z.displayName=G;var _="CollapsibleTrigger",J=t.forwardRef((e,t)=>{let{__scopeCollapsible:i,...s}=e,l=K(_,i);return(0,a.jsx)(L.Primitive.button,{type:"button","aria-controls":l.contentId,"aria-expanded":l.open||!1,"data-state":ea(l.open),"data-disabled":l.disabled?"":void 0,disabled:l.disabled,...s,ref:t,onClick:(0,B.composeEventHandlers)(e.onClick,l.onOpenToggle)})});J.displayName=_;var X="CollapsibleContent",Q=t.forwardRef((e,t)=>{let{forceMount:i,...s}=e,l=K(X,e.__scopeCollapsible);return(0,a.jsx)(V.Presence,{present:i||l.open,children:({present:e})=>(0,a.jsx)(ee,{...s,ref:t,present:e})})});Q.displayName=X;var ee=t.forwardRef((e,i)=>{let{__scopeCollapsible:s,present:l,children:r,...n}=e,o=K(X,s),[d,c]=t.useState(l),m=t.useRef(null),p=(0,W.useComposedRefs)(i,m),u=t.useRef(0),g=u.current,h=t.useRef(0),x=h.current,b=o.open||d,y=t.useRef(b),f=t.useRef(void 0);return t.useEffect(()=>{let e=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,E.useLayoutEffect)(()=>{let e=m.current;if(e){f.current=f.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let a=e.getBoundingClientRect();u.current=a.height,h.current=a.width,y.current||(e.style.transitionDuration=f.current.transitionDuration,e.style.animationName=f.current.animationName),c(l)}},[o.open,l]),(0,a.jsx)(L.Primitive.div,{"data-state":ea(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!b,...n,ref:p,style:{"--radix-collapsible-content-height":g?`${g}px`:void 0,"--radix-collapsible-content-width":x?`${x}px`:void 0,...e.style},children:b&&r})});function ea(e){return e?"open":"closed"}function et({...e}){return(0,a.jsx)(Z,{"data-slot":"collapsible",...e})}function ei({...e}){return(0,a.jsx)(J,{"data-slot":"collapsible-trigger",...e})}function es({...e}){return(0,a.jsx)(Q,{"data-slot":"collapsible-content",...e})}function el(){let[e,x]=(0,t.useState)([]),[b,y]=(0,t.useState)([]),[f,N]=(0,t.useState)([]),[v,D]=(0,t.useState)([]),[j,T]=(0,t.useState)([]),[w,k]=(0,t.useState)(""),[S,C]=(0,t.useState)(""),[F,q]=(0,t.useState)(!1),[P,B]=(0,t.useState)(!1),[M,H]=(0,t.useState)(!1),[E,W]=(0,t.useState)(!1),[L,V]=(0,t.useState)(null),[$,G]=(0,t.useState)(null),[z,U]=(0,t.useState)(new Set),{toast:Y}=(0,I.useToast)(),K=async()=>{try{let e=await p.schemeService.getAllSchemes();x(e)}catch(e){Y({title:"Error",description:"Failed to load schemes",variant:"destructive"})}},Z=async e=>{try{let a=await u.componentService.getComponentsByScheme(e);y(a),C(""),N([]),D([]),T([])}catch(e){Y({title:"Error",description:"Failed to load components",variant:"destructive"})}},_=async e=>{try{q(!0);let a=await g.fieldService.getFieldsByComponent(e);N(a)}catch(e){Y({title:"Error",description:"Failed to load fields",variant:"destructive"})}finally{q(!1)}},J=async e=>{try{B(!0);let a=await h.getDefaultFieldsByComponent(e,"default");D(a),U(new Set(a.map(e=>e.heading)));let t=await h.getSimpleFieldsByComponent(e);console.log("[v0] Loaded simple fields:",t),console.log("[v0] Simple fields count:",t.length),T(t)}catch(e){Y({title:"Error",description:"Failed to load default fields",variant:"destructive"})}finally{B(!1)}},X=async e=>{try{let a={englishName:e.englishName,tamilName:e.tamilName,englishDescription:e.englishDescription,tamilDescription:e.tamilDescription,dataType:e.dataType,validation:e.validation||"",isRequired:e.isRequired,componentId:S};await g.fieldService.createField(a),_(S),Y({title:"Success",description:`${e.englishName} added to template`})}catch(e){Y({title:"Error",description:"Failed to add field to template",variant:"destructive"})}},Q=async e=>{try{await g.fieldService.deleteField(e),_(S),Y({title:"Success",description:"Field deleted successfully"})}catch(e){Y({title:"Error",description:"Failed to delete field",variant:"destructive"})}G(null)};(0,t.useEffect)(()=>{K()},[]),(0,t.useEffect)(()=>{w?Z(w):(y([]),C(""),N([]),D([]),T([]))},[w]),(0,t.useEffect)(()=>{if(S){_(S);let e=b.find(e=>e.id===S);e?.componentType&&J(e.componentType)}else N([]),D([]),T([])},[S]);let ee=e.find(e=>e.id===w),ea=b.find(e=>e.id===S);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-[#013A65] to-[#F3B335] rounded-lg py-3 px-6 text-white shadow-lg",children:(0,a.jsx)("div",{className:"flex justify-between items-center",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Template Management"}),(0,a.jsx)("p",{className:"text-blue-100 text-sm mt-1",children:"Manage default fields and create custom templates based on component types"})]})})}),(0,a.jsxs)(s.Card,{className:"border-0 shadow-xl bg-white/80 backdrop-blur-sm",children:[(0,a.jsxs)(s.CardHeader,{className:"pb-4",children:[(0,a.jsxs)(s.CardTitle,{className:"flex items-center gap-2 text-base font-medium",children:[(0,a.jsx)("div",{className:"p-1.5 bg-gradient-to-br from-blue-100 to-purple-100 rounded-lg",children:(0,a.jsx)(d.Database,{className:"h-4 w-4 text-blue-600"})}),"Select Scheme & Component"]}),(0,a.jsx)(s.CardDescription,{className:"text-sm",children:"Choose a scheme and component to manage its fields"})]}),(0,a.jsxs)(s.CardContent,{className:"p-6 space-y-4",children:[(0,a.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Scheme"}),(0,a.jsxs)(l.Select,{value:w,onValueChange:k,children:[(0,a.jsx)(l.SelectTrigger,{className:"h-9 w-full min-w-0 bg-white",children:(0,a.jsx)(l.SelectValue,{placeholder:"Select a scheme"})}),(0,a.jsx)(l.SelectContent,{children:e.map(e=>(0,a.jsx)(l.SelectItem,{value:e.id,children:(0,a.jsxs)("div",{className:"flex flex-col py-1 min-w-0",children:[(0,a.jsx)("span",{className:"font-medium truncate text-sm",children:e.englishName}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground truncate",children:e.tamilName})]})},e.id))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium mb-2 block",children:"Component"}),(0,a.jsxs)(l.Select,{value:S,onValueChange:C,disabled:!w||0===b.length,children:[(0,a.jsx)(l.SelectTrigger,{className:"h-9 w-full min-w-0 bg-white",children:(0,a.jsx)(l.SelectValue,{placeholder:"Select a component"})}),(0,a.jsx)(l.SelectContent,{children:b.map(e=>(0,a.jsx)(l.SelectItem,{value:e.id,children:(0,a.jsxs)("div",{className:"flex flex-col py-1 min-w-0",children:[(0,a.jsx)("span",{className:"font-medium truncate text-sm",children:e.englishName}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground truncate",children:e.tamilName})]})},e.id))})]})]})]}),ee&&ea&&(0,a.jsx)("div",{className:"mt-4 p-4 bg-gradient-to-r from-blue-50/80 to-purple-50/80 rounded-xl border border-blue-200/50 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-medium text-base text-slate-800",children:ee.englishName}),(0,a.jsx)("p",{className:"text-purple-600 font-medium text-sm",children:ee.tamilName})]}),(0,a.jsx)(r.Badge,{className:"bg-gradient-to-r from-blue-100 to-purple-100 text-blue-700 border-0 font-medium text-xs",children:ee.englishAbbreviation})]}),(0,a.jsx)("div",{className:"border-t border-blue-200/50 pt-3",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-sm text-slate-800",children:ea.englishName}),(0,a.jsx)("p",{className:"text-xs text-purple-600 font-medium",children:ea.tamilName})]}),(0,a.jsxs)(r.Badge,{variant:"outline",className:"px-3 py-1 bg-white/80 backdrop-blur-sm border-blue-200 text-xs",children:[f.length," fields"]})]})})]})})]})]}),S&&(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-slate-800",children:"Default Fields"}),(0,a.jsxs)(r.Badge,{variant:"outline",className:"px-3 py-1 bg-white/80 backdrop-blur-sm border-[#F3B335] text-xs",children:[v.reduce((e,a)=>e+a.fields.length,0)," fields"]})]}),P?(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsx)(s.Card,{className:"animate-pulse border-0 shadow-lg bg-white/80 backdrop-blur-sm",children:(0,a.jsx)(s.CardHeader,{className:"pb-4",children:(0,a.jsx)("div",{className:"h-5 bg-gradient-to-r from-slate-200 to-slate-300 rounded-lg w-3/4"})})},e))}):0===v.length?(0,a.jsx)(s.Card,{className:"text-center py-8 border-0 shadow-xl bg-white/95 backdrop-blur-sm",children:(0,a.jsxs)(s.CardContent,{children:[(0,a.jsx)("div",{className:"mx-auto w-12 h-12 bg-gradient-to-br from-[#013A65]/10 to-[#F3B335]/10 rounded-xl flex items-center justify-center mb-4",children:(0,a.jsx)(d.Database,{className:"h-6 w-6 text-[#013A65]"})}),(0,a.jsx)("h3",{className:"text-lg font-bold mb-2 text-slate-800",children:"No default fields available"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm",children:"Select a component to view available default fields"})]})}):(0,a.jsx)("div",{className:"space-y-3",children:v.map(e=>(0,a.jsx)(et,{open:z.has(e.heading),onOpenChange:()=>{var a;let t;return a=e.heading,void((t=new Set(z)).has(a)?t.delete(a):t.add(a),U(t))},children:(0,a.jsxs)(s.Card,{className:"border-0 shadow-lg bg-white/80 backdrop-blur-sm overflow-hidden",children:[(0,a.jsx)(ei,{asChild:!0,children:(0,a.jsx)(s.CardHeader,{className:"pb-3 cursor-pointer hover:bg-[#F3B335]/5 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[z.has(e.heading)?(0,a.jsx)(c.ChevronDown,{className:"h-4 w-4 text-[#013A65]"}):(0,a.jsx)(m.ChevronRight,{className:"h-4 w-4 text-[#013A65]"}),(0,a.jsx)(s.CardTitle,{className:"text-base font-medium text-[#013A65]",children:e.heading})]}),(0,a.jsxs)(r.Badge,{className:"bg-[#F3B335]/20 text-[#013A65] border-[#F3B335]/30 text-xs",children:[e.fields.length," fields"]})]})})}),(0,a.jsx)(es,{children:(0,a.jsx)(s.CardContent,{className:"pt-0 space-y-2",children:e.fields.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-slate-50/80 rounded-lg border border-slate-200/50 hover:bg-slate-100/80 transition-colors",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("h4",{className:"font-medium text-sm text-slate-800 truncate",children:e.englishName}),(0,a.jsx)(r.Badge,{className:`${{string:"bg-blue-100 text-blue-800",number:"bg-green-100 text-green-800",email:"bg-purple-100 text-purple-800",phone:"bg-orange-100 text-orange-800",date:"bg-pink-100 text-pink-800",boolean:"bg-gray-100 text-gray-800",textarea:"bg-indigo-100 text-indigo-800",attachment:"bg-teal-100 text-teal-800",select:"bg-yellow-100 text-yellow-800"}[e.dataType]||"bg-gray-100 text-gray-800"} text-xs px-2 py-0.5`,children:e.dataType}),e.isRequired&&(0,a.jsx)(r.Badge,{className:"bg-red-100 text-red-700 text-xs px-2 py-0.5",children:"Required"})]}),(0,a.jsx)("p",{className:"text-xs text-slate-600 truncate",children:e.tamilName}),e.validation&&(0,a.jsx)("p",{className:"text-xs text-blue-600 font-mono mt-1",children:e.validation})]}),(0,a.jsxs)(i.Button,{size:"sm",variant:"outline",className:"ml-3 h-8 px-3 text-xs bg-[#013A65] text-white border-[#013A65] hover:bg-[#013A65]/90",onClick:()=>X(e),children:[(0,a.jsx)(n.Plus,{className:"h-3 w-3 mr-1"}),"Add"]})]},e.id))})})]})},e.heading))})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-slate-800",children:"Template Fields"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(r.Badge,{variant:"outline",className:"px-3 py-1 bg-white/80 backdrop-blur-sm border-[#F3B335] text-xs",children:[j.length," fields"]}),S&&(0,a.jsxs)(i.Button,{onClick:()=>H(!0),size:"sm",className:"bg-gradient-to-r from-[#013A65] to-[#F3B335] hover:from-[#013A65]/90 hover:to-[#F3B335]/90 text-white border-0 shadow-lg hover:shadow-xl transition-all duration-300 h-8 px-3 text-xs",children:[(0,a.jsx)(n.Plus,{className:"h-3 w-3 mr-1"}),"Custom Field"]})]})]}),F?(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsx)("div",{className:"animate-pulse bg-slate-200 h-16 rounded-lg"},e))}):(console.log("[v0] Rendering table with simpleFields:",j),console.log("[v0] Table will show",j.length,"rows"),0===j.length)?(0,a.jsx)(s.Card,{className:"text-center py-16 border-0 shadow-xl bg-white/95 backdrop-blur-sm",children:(0,a.jsxs)(s.CardContent,{children:[(0,a.jsx)("div",{className:"mx-auto w-16 h-16 bg-gradient-to-br from-blue-100 to-purple-100 rounded-xl flex items-center justify-center mb-6",children:(0,a.jsx)(o.FileText,{className:"h-8 w-8 text-blue-600"})}),(0,a.jsx)("h3",{className:"text-xl font-bold mb-3 text-slate-800",children:"No fields found"}),(0,a.jsx)("p",{className:"text-muted-foreground mb-6 max-w-md mx-auto",children:"Select a component to view available fields"})]})}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"bg-[#F3B335] text-[#013A65]",children:[(0,a.jsx)("th",{className:"text-left p-3 font-semibold text-sm border-b border-[#F3B335]/30",children:"Group"}),(0,a.jsx)("th",{className:"text-left p-3 font-semibold text-sm border-b border-[#F3B335]/30",children:"Field Name"}),(0,a.jsx)("th",{className:"text-left p-3 font-semibold text-sm border-b border-[#F3B335]/30",children:"Type"}),(0,a.jsx)("th",{className:"text-left p-3 font-semibold text-sm border-b border-[#F3B335]/30",children:"Validations"})]})}),(0,a.jsx)("tbody",{children:j.map((e,t)=>(console.log("[v0] Rendering field:",e),(0,a.jsxs)("tr",{className:"hover:bg-slate-50/80 transition-colors border-b border-slate-200/50",children:[(0,a.jsx)("td",{className:"p-3 text-sm text-slate-700 font-medium",children:e.group}),(0,a.jsx)("td",{className:"p-3 text-sm text-slate-800 font-medium",children:e.name}),(0,a.jsx)("td",{className:"p-3",children:(0,a.jsx)(r.Badge,{className:"bg-blue-100 text-blue-800 text-xs px-2 py-1",children:e.type})}),(0,a.jsx)("td",{className:"p-3 text-sm text-blue-600 font-mono max-w-xs",children:(0,a.jsx)("div",{className:"truncate",title:e.validation,children:e.validation})})]},t)))})]})})]})]}),(0,a.jsx)(R,{open:M,onOpenChange:H,onFieldCreated:()=>{_(S),H(!1),Y({title:"Success",description:"Field created successfully"})},componentId:S,componentName:ea?.englishName||""}),(0,a.jsx)(O,{open:E,onOpenChange:W,onFieldUpdated:()=>{_(S),W(!1),V(null),Y({title:"Success",description:"Field updated successfully"})},field:L}),(0,a.jsx)(A.AlertDialog,{open:!!$,onOpenChange:()=>G(null),children:(0,a.jsxs)(A.AlertDialogContent,{className:"border-0 shadow-2xl bg-white/95 backdrop-blur-sm",children:[(0,a.jsxs)(A.AlertDialogHeader,{children:[(0,a.jsx)(A.AlertDialogTitle,{className:"text-xl font-bold text-slate-800",children:"Delete Field"}),(0,a.jsx)(A.AlertDialogDescription,{className:"text-slate-600 leading-relaxed",children:"Are you sure you want to delete this field? This action cannot be undone."})]}),(0,a.jsxs)(A.AlertDialogFooter,{children:[(0,a.jsx)(A.AlertDialogCancel,{className:"border-slate-300 hover:bg-slate-50",children:"Cancel"}),(0,a.jsx)(A.AlertDialogAction,{onClick:()=>$&&Q($),className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white border-0 shadow-lg",children:"Delete"})]})]})})]})}e.s(["default",()=>el],54970)}]);