(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,59377,e=>{"use strict";let t=(0,e.i(80329).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],59377)},45634,e=>{"use strict";var t=e.i(45042),r=e.i(97817),a=e.i(69194),s=e.i(74536),i=e.i(47206),n=e.i(73261),l=e.i(36640),o=e.i(93474),d=e.i(48298),c=e.i(49572),u="Checkbox",[m,x]=(0,s.createContextScope)(u),[h,p]=m(u),g=r.forwardRef((e,s)=>{let{__scopeCheckbox:l,name:o,checked:d,defaultChecked:u,required:m,disabled:x,value:p="on",onCheckedChange:g,form:f,...y}=e,[N,w]=r.useState(null),k=(0,a.useComposedRefs)(s,e=>w(e)),C=r.useRef(!1),U=!N||f||!!N.closest("form"),[S=!1,T]=(0,n.useControllableState)({prop:d,defaultProp:u,onChange:g}),A=r.useRef(S);return r.useEffect(()=>{let e=N?.form;if(e){let t=()=>T(A.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[N,T]),(0,t.jsxs)(h,{scope:l,state:S,disabled:x,children:[(0,t.jsx)(c.Primitive.button,{type:"button",role:"checkbox","aria-checked":b(S)?"mixed":S,"aria-required":m,"data-state":j(S),"data-disabled":x?"":void 0,disabled:x,value:p,...y,ref:k,onKeyDown:(0,i.composeEventHandlers)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.composeEventHandlers)(e.onClick,e=>{T(e=>!!b(e)||!e),U&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),U&&(0,t.jsx)(v,{control:N,bubbles:!C.current,name:o,value:p,checked:S,required:m,disabled:x,form:f,style:{transform:"translateX(-100%)"},defaultChecked:!b(u)&&u})]})});g.displayName=u;var f="CheckboxIndicator",y=r.forwardRef((e,r)=>{let{__scopeCheckbox:a,forceMount:s,...i}=e,n=p(f,a);return(0,t.jsx)(d.Presence,{present:s||b(n.state)||!0===n.state,children:(0,t.jsx)(c.Primitive.span,{"data-state":j(n.state),"data-disabled":n.disabled?"":void 0,...i,ref:r,style:{pointerEvents:"none",...e.style}})})});y.displayName=f;var v=e=>{let{control:a,checked:s,bubbles:i=!0,defaultChecked:n,...d}=e,c=r.useRef(null),u=(0,l.usePrevious)(s),m=(0,o.useSize)(a);r.useEffect(()=>{let e=c.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(u!==s&&t){let r=new Event("click",{bubbles:i});e.indeterminate=b(s),t.call(e,!b(s)&&s),e.dispatchEvent(r)}},[u,s,i]);let x=r.useRef(!b(s)&&s);return(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??x.current,...d,tabIndex:-1,ref:c,style:{...e.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function b(e){return"indeterminate"===e}function j(e){return b(e)?"indeterminate":e?"checked":"unchecked"}var N=e.i(48583),w=e.i(18846);function k({className:e,...r}){return(0,t.jsx)(g,{"data-slot":"checkbox",className:(0,w.cn)("peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...r,children:(0,t.jsx)(y,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:(0,t.jsx)(N.CheckIcon,{className:"size-3.5"})})})}e.s(["Checkbox",()=>k],45634)},86541,e=>{"use strict";var t=e.i(45042),r=e.i(97817),a=e.i(49572),s=r.forwardRef((e,r)=>(0,t.jsx)(a.Primitive.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var i=e.i(18846);function n({className:e,...r}){return(0,t.jsx)(s,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...r})}e.s(["Label",()=>n],86541)},1508,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return a}});let a=e=>{}},95876,e=>{"use strict";var t=e.i(45042),r=e.i(18846);function a({className:e,type:a,...s}){return(0,t.jsx)("input",{type:a,"data-slot":"input",className:(0,r.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...s})}e.s(["Input",()=>a])},31737,e=>{"use strict";var t=e.i(45042),r=e.i(47937),a=e.i(48592),s=e.i(18846);function i({...e}){return(0,t.jsx)(r.Root,{"data-slot":"dialog",...e})}function n({...e}){return(0,t.jsx)(r.Portal,{"data-slot":"dialog-portal",...e})}function l({className:e,...a}){return(0,t.jsx)(r.Overlay,{"data-slot":"dialog-overlay",className:(0,s.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...a})}function o({className:e,children:i,showCloseButton:o=!0,...d}){return(0,t.jsxs)(n,{"data-slot":"dialog-portal",children:[(0,t.jsx)(l,{}),(0,t.jsxs)(r.Content,{"data-slot":"dialog-content",className:(0,s.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...d,children:[i,o&&(0,t.jsxs)(r.Close,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,t.jsx)(a.XIcon,{}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function d({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"dialog-header",className:(0,s.cn)("flex flex-col gap-2 text-center sm:text-left",e),...r})}function c({className:e,...r}){return(0,t.jsx)("div",{"data-slot":"dialog-footer",className:(0,s.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...r})}function u({className:e,...a}){return(0,t.jsx)(r.Title,{"data-slot":"dialog-title",className:(0,s.cn)("text-lg leading-none font-semibold",e),...a})}function m({className:e,...a}){return(0,t.jsx)(r.Description,{"data-slot":"dialog-description",className:(0,s.cn)("text-muted-foreground text-sm",e),...a})}e.s(["Dialog",()=>i,"DialogContent",()=>o,"DialogDescription",()=>m,"DialogFooter",()=>c,"DialogHeader",()=>d,"DialogTitle",()=>u])},53183,e=>{"use strict";let t=(0,e.i(80329).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>t],53183)},44073,e=>{"use strict";var t=e.i(45042),r=e.i(18846);function a({className:e,...a}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,r.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...a})}e.s(["Textarea",()=>a])},98786,e=>{"use strict";var t=e.i(45042),r=e.i(18846);function a({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...a})}function s({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...a})}function i({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",e),...a})}function n({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",e),...a})}function l({className:e,...a}){return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",e),...a})}e.s(["Card",()=>a,"CardContent",()=>l,"CardDescription",()=>n,"CardHeader",()=>s,"CardTitle",()=>i])},93456,e=>{"use strict";let t=(0,e.i(80329).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],93456)},44936,e=>{"use strict";let t=(0,e.i(80329).default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>t],44936)},27997,e=>{"use strict";let t=(0,e.i(80329).default)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);e.s(["ExternalLink",()=>t],27997)},7578,e=>{"use strict";var t=e.i(39403);let r="/api/v1/users",a=new class{async getUsers(){let e=await t.apiClient.get(`${r}`);if(e.success&&e.data)return e.data.map(e=>this.mapApiUserToUser(e));throw Error(e.error||"Failed to fetch users")}async createUser(e){let a=await t.apiClient.post(`${r}/register`,e);if(a.success&&a.data)return this.mapApiUserToUser(a.data);throw Error(a.error||"Failed to create user")}async deleteUser(e){let a=await t.apiClient.delete(`${r}/${e}`);if(!a.success)throw Error(a.error||"Failed to delete user")}async activateUser(e){let a=await t.apiClient.patch(`${r}/${e}/activate`);if(!a.success)throw Error(a.error||"Failed to activate user")}async deactivateUser(e){let a=await t.apiClient.patch(`${r}/${e}/deactivate`);if(!a.success)throw Error(a.error||"Failed to deactivate user")}async updatePassword(e,a){let s=await t.apiClient.patch(`${r}/${e}/password`,a);if(!s.success)throw Error(s.error||"Failed to update password")}async getUserStats(){try{let e=await this.getUsers(),t=e.filter(e=>e.isActive).length,r=e.length-t;return{totalUsers:e.length,activeUsers:t,inactiveUsers:r}}catch(e){return{totalUsers:0,activeUsers:0,inactiveUsers:0}}}mapApiUserToUser(e){return{id:e._id,name:e.name,email:e.email,phone:e.phone,role:e.role,isActive:e.isActive,createdAt:e.createdAt,fullName:e.fullName,userId:e.userId}}};e.s(["userService",0,a])},94686,e=>{"use strict";var t=e.i(45042),r=e.i(97817),a=e.i(71429),s=e.i(53790),i=e.i(98786),n=e.i(53183),l=e.i(59377),o=e.i(27997),d=e.i(20578),c=e.i(44936),u=e.i(80329);let m=(0,u.default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),x=[{id:"1",message:"System maintenance scheduled for tomorrow at 2 AM",url:"https://example.com/maintenance",createdAt:new Date(Date.now()-72e5).toISOString(),createdBy:"admin1",createdByName:"Admin User",targetType:"all",isRead:!1},{id:"2",message:"New scheme template available for review",createdAt:new Date(Date.now()-18e6).toISOString(),createdBy:"admin1",createdByName:"Admin User",targetType:"role",targetRole:"admin",isRead:!1},{id:"3",message:"Monthly report submission deadline is approaching",url:"https://example.com/reports",createdAt:new Date(Date.now()-864e5).toISOString(),createdBy:"admin1",createdByName:"Admin User",targetType:"all",isRead:!0}],h=new class{async delay(e=300){return new Promise(t=>setTimeout(t,e))}getCurrentUser(){let e=localStorage.getItem("user");return e?JSON.parse(e):null}async getUserNotifications(){await this.delay();let e=this.getCurrentUser();return e?x.filter(t=>!!("all"===t.targetType||"role"===t.targetType&&t.targetRole===e.role||"users"===t.targetType&&t.targetUserIds?.includes(e.id))):[]}async getAllNotifications(){return await this.delay(),[...x]}async createNotification(e){await this.delay();let t=this.getCurrentUser(),r={id:Date.now().toString(),message:e.message,url:e.url,createdAt:new Date().toISOString(),createdBy:t?.id||"unknown",createdByName:t?.name||"Unknown User",targetType:e.targetType,targetUserIds:e.targetUserIds,targetRole:e.targetRole,isRead:!1};return x.unshift(r),r}async markAsRead(e){await this.delay();let t=x.find(t=>t.id===e);t&&(t.isRead=!0)}async markAllAsRead(){await this.delay();let e=this.getCurrentUser();e&&x.forEach(t=>{"all"===t.targetType||"role"===t.targetType&&t.targetRole===e.role?t.isRead=!0:"users"===t.targetType&&t.targetUserIds?.includes(e.id)&&(t.isRead=!0)})}async deleteNotification(e){await this.delay();let t=x.findIndex(t=>t.id===e);-1!==t&&x.splice(t,1)}async getUnreadCount(){await this.delay();let e=this.getCurrentUser();return e?x.filter(t=>!t.isRead&&!!("all"===t.targetType||"role"===t.targetType&&t.targetRole===e.role||"users"===t.targetType&&t.targetUserIds?.includes(e.id))).length:0}};var p=e.i(61808),g=e.i(31737),f=e.i(95876),y=e.i(86541),v=e.i(44073),b=e.i(75987),j=e.i(7578),N=e.i(45634);function w({open:e,onOpenChange:a,onSuccess:i}){let[n,l]=(0,r.useState)(""),[o,d]=(0,r.useState)(""),[c,u]=(0,r.useState)("all"),[m,x]=(0,r.useState)([]),[p,w]=(0,r.useState)(""),[k,C]=(0,r.useState)([]),[U,S]=(0,r.useState)(!1),[T,A]=(0,r.useState)(!1);(0,r.useEffect)(()=>{e&&"users"===c&&D()},[e,c]);let D=async()=>{try{A(!0);let e=await j.userService.getUsers();C(e.filter(e=>e.isActive))}catch(e){console.error("[v0] Error loading users:",e)}finally{A(!1)}},R=async e=>{if(e.preventDefault(),!n.trim())return void alert("Please enter a message");if("users"===c&&0===m.length)return void alert("Please select at least one user");if("role"===c&&!p)return void alert("Please select a role");try{S(!0);let e={message:n.trim(),url:o.trim()||void 0,targetType:c,targetUserIds:"users"===c?m:void 0,targetRole:"role"===c?p:void 0};console.log("[v0] Creating notification:",e),await h.createNotification(e),l(""),d(""),u("all"),x([]),w(""),i(),a(!1)}catch(e){console.error("[v0] Error creating notification:",e),alert("Failed to create notification")}finally{S(!1)}};return(0,t.jsx)(g.Dialog,{open:e,onOpenChange:a,children:(0,t.jsxs)(g.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(g.DialogHeader,{children:(0,t.jsx)(g.DialogTitle,{className:"text-[#013A65]",children:"Create Notification"})}),(0,t.jsxs)("form",{onSubmit:R,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(y.Label,{htmlFor:"message",children:["Message ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(v.Textarea,{id:"message",value:n,onChange:e=>l(e.target.value),placeholder:"Enter notification message...",rows:4,required:!0,className:"resize-none"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(y.Label,{htmlFor:"url",children:"URL (Optional)"}),(0,t.jsx)(f.Input,{id:"url",type:"url",value:o,onChange:e=>d(e.target.value),placeholder:"https://example.com/page"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"Add a link for users to navigate to when clicking the notification"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(y.Label,{htmlFor:"targetType",children:["Send To ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)(b.Select,{value:c,onValueChange:e=>u(e),children:[(0,t.jsx)(b.SelectTrigger,{id:"targetType",children:(0,t.jsx)(b.SelectValue,{})}),(0,t.jsxs)(b.SelectContent,{children:[(0,t.jsx)(b.SelectItem,{value:"all",children:"All Users"}),(0,t.jsx)(b.SelectItem,{value:"users",children:"Specific Users"}),(0,t.jsx)(b.SelectItem,{value:"role",children:"By Role"})]})]})]}),"users"===c&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(y.Label,{children:["Select Users ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),T?(0,t.jsx)("div",{className:"text-sm text-gray-500 py-4",children:"Loading users..."}):(0,t.jsx)("div",{className:"border rounded-lg p-4 max-h-60 overflow-y-auto space-y-2",children:0===k.length?(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"No active users found"}):k.map(e=>(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(N.Checkbox,{id:`user-${e.id}`,checked:m.includes(e.id),onCheckedChange:()=>{var t;return t=e.id,void x(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])}}),(0,t.jsxs)("label",{htmlFor:`user-${e.id}`,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer flex-1",children:[e.name," (",e.email,") - ",e.role]})]},e.id))}),m.length>0&&(0,t.jsxs)("p",{className:"text-xs text-gray-600",children:[m.length," user(s) selected"]})]}),"role"===c&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(y.Label,{htmlFor:"role",children:["Select Role ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsxs)(b.Select,{value:p,onValueChange:w,children:[(0,t.jsx)(b.SelectTrigger,{id:"role",children:(0,t.jsx)(b.SelectValue,{placeholder:"Choose a role"})}),(0,t.jsx)(b.SelectContent,{children:["super_admin","admin","user","viewer"].map(e=>(0,t.jsx)(b.SelectItem,{value:e,children:e.replace("_"," ").toUpperCase()},e))})]})]}),(0,t.jsxs)(g.DialogFooter,{children:[(0,t.jsx)(s.Button,{type:"button",variant:"outline",onClick:()=>a(!1),disabled:U,children:"Cancel"}),(0,t.jsx)(s.Button,{type:"submit",disabled:U,className:"bg-gradient-to-r from-[#013A65] to-[#013A65]/90 hover:from-[#013A65]/90 hover:to-[#013A65] text-white",children:U?"Creating...":"Create Notification"})]})]})]})})}var k=e.i(93456);let C=(0,u.default)("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);function U({notification:e,open:r,onOpenChange:a}){return e?(0,t.jsx)(g.Dialog,{open:r,onOpenChange:a,children:(0,t.jsxs)(g.DialogContent,{className:"max-w-2xl bg-card",children:[(0,t.jsx)(g.DialogHeader,{children:(0,t.jsx)(g.DialogTitle,{className:"text-2xl text-primary",children:"Notification Details"})}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Message"}),(0,t.jsx)("p",{className:"text-base text-card-foreground leading-relaxed bg-muted/50 p-4 rounded-lg border border-border",children:e.message})]}),e.url&&(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Link"}),(0,t.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-primary hover:text-primary/80 hover:underline bg-muted/50 px-4 py-3 rounded-lg border border-border transition-colors",children:[(0,t.jsx)(o.ExternalLink,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"break-all",children:e.url})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Target Audience"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 bg-muted/50 p-4 rounded-lg border border-border",children:[(e=>{switch(e){case"all":return(0,t.jsx)(d.Users,{className:"h-5 w-5 text-primary"});case"users":return(0,t.jsx)(c.User,{className:"h-5 w-5 text-primary"});case"role":return(0,t.jsx)(m,{className:"h-5 w-5 text-primary"});default:return null}})(e.targetType),(0,t.jsx)("span",{className:"text-card-foreground font-medium",children:(e=>{switch(e.targetType){case"all":return"All Users";case"users":return`${e.targetUserIds?.length||0} Selected Users`;case"role":return`Role: ${e.targetRole}`;default:return"Unknown"}})(e)})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Created By"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-muted/50 p-3 rounded-lg border border-border",children:[(0,t.jsx)(C,{className:"h-4 w-4 text-primary"}),(0,t.jsx)("span",{className:"text-card-foreground",children:e.createdByName})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h3",{className:"text-sm font-semibold text-muted-foreground uppercase tracking-wide",children:"Created At"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 bg-muted/50 p-3 rounded-lg border border-border",children:[(0,t.jsx)(k.Calendar,{className:"h-4 w-4 text-primary"}),(0,t.jsx)("span",{className:"text-card-foreground text-sm",children:new Date(e.createdAt).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]})]}),(0,t.jsx)("div",{className:"flex justify-end pt-4 border-t border-border",children:(0,t.jsx)(s.Button,{onClick:()=>a(!1),variant:"outline",className:"border-border",children:"Close"})})]})}):null}function S(){let{user:e}=(0,p.useAuth)(),[u,x]=(0,r.useState)([]),[g,f]=(0,r.useState)(!0),[y,v]=(0,r.useState)(!1),[b,j]=(0,r.useState)(null),[N,k]=(0,r.useState)(!1);(0,r.useEffect)(()=>{C()},[]);let C=async()=>{try{f(!0);let e=await h.getAllNotifications();x(e)}catch(e){console.error("[v0] Error loading notifications:",e)}finally{f(!1)}},S=async e=>{if(confirm("Are you sure you want to delete this notification?"))try{await h.deleteNotification(e),x(t=>t.filter(t=>t.id!==e))}catch(e){console.error("[v0] Error deleting notification:",e),alert("Failed to delete notification")}};return(0,t.jsxs)(a.DashboardLayout,{children:[(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"bg-gradient-to-r from-[#013A65] to-[#013A65]/90 rounded-lg py-3 px-6 text-white shadow-lg",children:(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-semibold",children:"Notification Management"}),(0,t.jsx)("p",{className:"text-white/80 text-sm mt-1",children:"Create and manage system notifications for users"})]}),(0,t.jsxs)(s.Button,{size:"sm",className:"bg-gradient-to-r from-[#F3B335] to-[#F3B335]/90 hover:from-[#F3B335]/90 hover:to-[#F3B335]/80 text-[#013A65] border-0 shadow-lg hover:shadow-xl transition-all duration-300 h-9 px-4 text-sm font-medium",onClick:()=>v(!0),children:[(0,t.jsx)(n.Plus,{className:"h-4 w-4 mr-1.5"}),"Create Notification"]})]})}),(0,t.jsxs)(i.Card,{className:"border-border bg-card",children:[(0,t.jsx)(i.CardHeader,{children:(0,t.jsx)(i.CardTitle,{className:"text-primary",children:"All Notifications"})}),(0,t.jsx)(i.CardContent,{children:g?(0,t.jsx)("div",{className:"text-center py-12 text-muted-foreground",children:"Loading notifications..."}):0===u.length?(0,t.jsxs)("div",{className:"text-center py-12 text-muted-foreground",children:[(0,t.jsx)("p",{className:"text-lg font-medium mb-2",children:"No notifications yet"}),(0,t.jsx)("p",{className:"text-sm",children:"Create your first notification to get started"})]}):(0,t.jsx)("div",{className:"space-y-3",children:u.map(e=>(0,t.jsx)("div",{onClick:()=>{j(e),k(!0)},className:"border-l-4 border-[#F3B335] border-t border-r border-b border-border rounded-lg p-4 hover:shadow-md hover:border-[#F3B335]/50 transition-all cursor-pointer bg-white",children:(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsx)("div",{className:"flex items-start gap-3",children:(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium text-foreground mb-1",children:e.message}),e.url&&(0,t.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",onClick:e=>e.stopPropagation(),className:"text-sm text-primary hover:underline inline-flex items-center gap-1 mb-2 font-medium",children:[(0,t.jsx)(o.ExternalLink,{className:"h-3 w-3"}),e.url]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 text-sm text-muted-foreground mt-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(e=>{switch(e){case"all":return(0,t.jsx)(d.Users,{className:"h-4 w-4"});case"users":return(0,t.jsx)(c.User,{className:"h-4 w-4"});case"role":return(0,t.jsx)(m,{className:"h-4 w-4"});default:return null}})(e.targetType),(0,t.jsx)("span",{children:(e=>{switch(e.targetType){case"all":return"All Users";case"users":return`${e.targetUserIds?.length||0} Selected Users`;case"role":return`Role: ${e.targetRole}`;default:return"Unknown"}})(e)})]}),(0,t.jsx)("span",{className:"text-muted-foreground/40",children:"•"}),(0,t.jsxs)("span",{children:["Created by ",e.createdByName]}),(0,t.jsx)("span",{className:"text-muted-foreground/40",children:"•"}),(0,t.jsx)("span",{children:new Date(e.createdAt).toLocaleString()})]})]})})}),(0,t.jsx)(s.Button,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),S(e.id)},className:"text-destructive hover:text-destructive hover:bg-destructive/10 flex-shrink-0",children:(0,t.jsx)(l.Trash2,{className:"h-4 w-4"})})]})},e.id))})})]})]}),(0,t.jsx)(w,{open:y,onOpenChange:v,onSuccess:C}),(0,t.jsx)(U,{notification:b,open:N,onOpenChange:k})]})}e.s(["default",()=>S],94686)}]);